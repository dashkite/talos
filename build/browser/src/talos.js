var Talos;
import * as Meta from "@dashkite/joy/metaclass";
import * as Type from "@dashkite/joy/type";
import { Machine } from "./machine";
import { $start, $end, atStart, atEnd } from "./states";
Talos = (function() {
    class Talos {
        constructor({ machine: machine1 }){
            this.machine = machine1;
            this.state = $start;
            this.context = {};
            this.error = null;
        }
        static make(_machine) {
            var machine;
            machine = Machine.make(_machine);
            return new Talos({
                machine
            });
        }
        end() {
            return this.state = $end;
        }
        catch(error) {
            this.end();
            return this.error = error;
        }
    }
    ;
    Meta.mixin(Talos.prototype, [
        Meta.getters({
            ended: function() {
                return atEnd(this.state);
            },
            success: function() {
                return this.ended && this.error == null;
            },
            failure: function() {
                return this.ended && this.error != null;
            },
            running: function() {
                return !this.ended;
            }
        })
    ]);
    Talos.isType = Type.isType(Talos);
    return Talos;
}).call(this);
export { Talos }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL3RhbG9zLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLE9BQU8sQ0FBQSxRQUFQLE1BQUE7O0FBQ0EsT0FBTyxDQUFBLFFBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVMsT0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLE1BQVQ7RUFBaUIsSUFBakI7RUFBdUIsT0FBdkI7RUFBZ0MsS0FBaEM7Q0FBQSxNQUFBOztBQUdNO0VBQU4sTUFBQSxNQUFBO0lBQ0UsV0FBYSxDQUFDO1FBQUc7TUFBSCxDQUFELENBQUE7TUFBRyxJQUFDLENBQUE7TUFDZixJQUFDLENBQUEsS0FBRCxHQUFTO01BQ1QsSUFBQyxDQUFBLE9BQUQsR0FBVyxDQUFBO01BQ1gsSUFBQyxDQUFBLEtBQUQsR0FBUztJQUhFOztJQWFOLE9BQU4sSUFBTSxDQUFFLFFBQUYsQ0FBQTtBQUNULFVBQUE7TUFBSSxPQUFBLEdBQVUsT0FBTyxDQUFDLElBQVIsQ0FBYSxRQUFiO2FBQ1YsSUFBSSxLQUFKLENBQVUsQ0FBRSxPQUFGLENBQVY7SUFGSzs7SUFNUCxHQUFLLENBQUEsQ0FBQTthQUNILElBQUMsQ0FBQSxLQUFELEdBQVM7SUFETjs7SUFHTCxLQUFPLENBQUUsS0FBRixDQUFBO01BQ0wsSUFBQyxDQUFBLEdBQUQsQ0FBQTthQUNBLElBQUMsQ0FBQSxLQUFELEdBQVM7SUFGSjs7RUF2QlQ7O0VBTUUsSUFBSSxDQUFDLEtBQUwsQ0FBVyxLQUFDLENBQUEsU0FBWixFQUFnQjtJQUNkLElBQUksQ0FBQyxPQUFMLENBQ0U7TUFBQSxLQUFBLEVBQU8sUUFBQSxDQUFBLENBQUE7ZUFBRyxLQUFBLENBQU0sSUFBQyxDQUFBLEtBQVA7TUFBSCxDQUFQO01BQ0EsT0FBQSxFQUFTLFFBQUEsQ0FBQSxDQUFBO2VBQUcsSUFBQyxDQUFBLEtBQUQsSUFBVztNQUFkLENBRFQ7TUFFQSxPQUFBLEVBQVMsUUFBQSxDQUFBLENBQUE7ZUFBRyxJQUFDLENBQUEsS0FBRCxJQUFVO01BQWIsQ0FGVDtNQUdBLE9BQUEsRUFBUyxRQUFBLENBQUEsQ0FBQTtlQUFHLENBQUMsSUFBQyxDQUFBO01BQUw7SUFIVCxDQURGLENBRGM7R0FBaEI7O0VBWUEsS0FBQyxDQUFBLE1BQUQsR0FBUyxJQUFJLENBQUMsTUFBTCxDQUFZLEtBQVo7Ozs7OztBQVVYLE9BQUE7RUFDRSxLQURGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgTWV0YSBmcm9tIFwiQGRhc2hraXRlL2pveS9tZXRhY2xhc3NcIlxuaW1wb3J0ICogYXMgVHlwZSBmcm9tIFwiQGRhc2hraXRlL2pveS90eXBlXCJcbmltcG9ydCB7IE1hY2hpbmUgfSBmcm9tIFwiLi9tYWNoaW5lXCJcbmltcG9ydCB7ICRzdGFydCwgJGVuZCwgYXRTdGFydCwgYXRFbmQgfSBmcm9tIFwiLi9zdGF0ZXNcIlxuXG5cbmNsYXNzIFRhbG9zXG4gIGNvbnN0cnVjdG9yOiAoeyBAbWFjaGluZSB9KSAtPlxuICAgIEBzdGF0ZSA9ICRzdGFydFxuICAgIEBjb250ZXh0ID0ge31cbiAgICBAZXJyb3IgPSBudWxsXG5cbiAgTWV0YS5taXhpbiBAOjosIFtcbiAgICBNZXRhLmdldHRlcnNcbiAgICAgIGVuZGVkOiAtPiBhdEVuZCBAc3RhdGVcbiAgICAgIHN1Y2Nlc3M6IC0+IEBlbmRlZCAmJiAhQGVycm9yP1xuICAgICAgZmFpbHVyZTogLT4gQGVuZGVkICYmIEBlcnJvcj9cbiAgICAgIHJ1bm5pbmc6IC0+ICFAZW5kZWRcbiAgXVxuXG4gIEBtYWtlOiAoIF9tYWNoaW5lICkgLT4gXG4gICAgbWFjaGluZSA9IE1hY2hpbmUubWFrZSBfbWFjaGluZVxuICAgIG5ldyBUYWxvcyB7IG1hY2hpbmUgfVxuICBcbiAgQGlzVHlwZTogVHlwZS5pc1R5cGUgQFxuXG4gIGVuZDogLT5cbiAgICBAc3RhdGUgPSAkZW5kXG5cbiAgY2F0Y2g6ICggZXJyb3IgKSAtPlxuICAgIEBlbmQoKVxuICAgIEBlcnJvciA9IGVycm9yXG5cblxuZXhwb3J0IHtcbiAgVGFsb3Ncbn0iXX0=
 //# sourceURL=src/talos.coffee

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy90YWxvcy5jb2ZmZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgTWV0YSBmcm9tIFwiQGRhc2hraXRlL2pveS9tZXRhY2xhc3NcIlxuaW1wb3J0ICogYXMgVHlwZSBmcm9tIFwiQGRhc2hraXRlL2pveS90eXBlXCJcbmltcG9ydCB7IE1hY2hpbmUgfSBmcm9tIFwiLi9tYWNoaW5lXCJcbmltcG9ydCB7ICRzdGFydCwgJGVuZCwgYXRTdGFydCwgYXRFbmQgfSBmcm9tIFwiLi9zdGF0ZXNcIlxuXG5cbmNsYXNzIFRhbG9zXG4gIGNvbnN0cnVjdG9yOiAoeyBAbWFjaGluZSB9KSAtPlxuICAgIEBzdGF0ZSA9ICRzdGFydFxuICAgIEBjb250ZXh0ID0ge31cbiAgICBAZXJyb3IgPSBudWxsXG5cbiAgTWV0YS5taXhpbiBAOjosIFtcbiAgICBNZXRhLmdldHRlcnNcbiAgICAgIGVuZGVkOiAtPiBhdEVuZCBAc3RhdGVcbiAgICAgIHN1Y2Nlc3M6IC0+IEBlbmRlZCAmJiAhQGVycm9yP1xuICAgICAgZmFpbHVyZTogLT4gQGVuZGVkICYmIEBlcnJvcj9cbiAgICAgIHJ1bm5pbmc6IC0+ICFAZW5kZWRcbiAgXVxuXG4gIEBtYWtlOiAoIF9tYWNoaW5lICkgLT4gXG4gICAgbWFjaGluZSA9IE1hY2hpbmUubWFrZSBfbWFjaGluZVxuICAgIG5ldyBUYWxvcyB7IG1hY2hpbmUgfVxuICBcbiAgQGlzVHlwZTogVHlwZS5pc1R5cGUgQFxuXG4gIGVuZDogLT5cbiAgICBAc3RhdGUgPSAkZW5kXG5cbiAgY2F0Y2g6ICggZXJyb3IgKSAtPlxuICAgIEBlbmQoKVxuICAgIEBlcnJvciA9IGVycm9yXG5cblxuZXhwb3J0IHtcbiAgVGFsb3Ncbn0iXSwibmFtZXMiOlsiVGFsb3MiLCJNZXRhIiwiVHlwZSIsIk1hY2hpbmUiLCIkc3RhcnQiLCIkZW5kIiwiYXRTdGFydCIsImF0RW5kIiwiY29uc3RydWN0b3IiLCJtYWNoaW5lIiwibWFjaGluZTEiLCJzdGF0ZSIsImNvbnRleHQiLCJlcnJvciIsIm1ha2UiLCJfbWFjaGluZSIsImVuZCIsImNhdGNoIiwibWl4aW4iLCJwcm90b3R5cGUiLCJnZXR0ZXJzIiwiZW5kZWQiLCJzdWNjZXNzIiwiZmFpbHVyZSIsInJ1bm5pbmciLCJpc1R5cGUiXSwibWFwcGluZ3MiOiJBQUFBLElBQUFBO0FBQUEsWUFBT0MsVUFBUCwwQkFBQTtBQUNBLFlBQU9DLFVBQVAscUJBQUE7QUFDQSxTQUFTQyxPQUFULFFBQUEsWUFBQTtBQUNBLFNBQVNDLE1BQVQsRUFBaUJDLElBQWpCLEVBQXVCQyxPQUF2QixFQUFnQ0MsS0FBaEMsUUFBQSxXQUFBO0FBR01QLFFBQUEsQ0FBQTtJQUFOLE1BQUFBO1FBQ0VRLFlBQWMsRUFBR0MsU0FBQUMsUUFBQSxFQUFKLENBQUE7WUFBRyxJQUFDLENBQUFELE9BQUEsR0FBQUM7WUFDZixJQUFDLENBQUFDLEtBQUQsR0FBU1A7WUFDVCxJQUFDLENBQUFRLE9BQUQsR0FBVyxDQUFBO1lBQ1gsSUFBQyxDQUFBQyxLQUFELEdBQVM7UUFIRTtRQWFOLE9BQU5DLEtBQVFDLFFBQUYsRUFBQTtZQUNULElBQUFOO1lBQUlBLFVBQVVOLFFBQVFXLElBQVIsQ0FBYUM7bUJBQ3ZCLElBQUlmLE1BQU07Z0JBQUVTO1lBQUY7UUFGTDtRQU1QTyxNQUFLO21CQUNILElBQUMsQ0FBQUwsS0FBRCxHQUFTTjtRQUROO1FBR0xZLE1BQVNKLEtBQUYsRUFBQTtZQUNMLElBQUMsQ0FBQUcsR0FBRDttQkFDQSxJQUFDLENBQUFILEtBQUQsR0FBU0E7UUFGSjtJQXZCVDs7SUFNRVosS0FBS2lCLEtBQUwsQ0FBV2xCLE1BQUNtQixTQUFaLEVBQWdCO1FBQ2RsQixLQUFLbUIsT0FBTCxDQUNFO1lBQUFDLE9BQU87dUJBQUdkLE1BQU0sSUFBQyxDQUFBSSxLQUFQO1lBQUg7WUFDUFcsU0FBUzt1QkFBRyxJQUFDLENBQUFELEtBQUQsSUFBVyxJQUFBLENBQUFSLEtBQUEsSUFBQTtZQUFkO1lBQ1RVLFNBQVM7dUJBQUcsSUFBQyxDQUFBRixLQUFELElBQVUsSUFBQSxDQUFBUixLQUFBLElBQUE7WUFBYjtZQUNUVyxTQUFTO3VCQUFHLENBQUMsSUFBQyxDQUFBSCxLQUFBO1lBQUw7UUFIVDtLQUZKO0lBWUFyQixNQUFDeUIsTUFBRCxHQUFTdkIsS0FBS3VCLE1BQUwsQ0FBWXpCOzs7QUFVdkIsU0FDRUEsS0FERiJ9