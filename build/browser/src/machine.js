var Edge, Edges, Machine, Vertex, isState, normalizeMove, normalizeWhen, prioritize;
import { generic } from "@dashkite/joy/generic";
import * as Type from "@dashkite/joy/type";
import { $start, $end } from "./states";
isState = function(x) {
    return Type.isString(x) || Type.isSymbol(x);
};
normalizeWhen = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return event === condition;
        };
    } else if (Type.isFunction(x)) {
        return x;
    } else if (Type.isBoolean(x)) {
        return function() {
            return x;
        };
    } else {
        throw new Error("unable to normalize when description");
    }
};
normalizeMove = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return talos.state = x;
        };
    } else if (Type.isFunction(x)) {
        return x;
    } else {
        throw new Error("unable to normalize move description");
    }
};
prioritize = function(frames) {
    return frames.sort(function(a, b) {
        if (a.priority < b.priority) {
            return -1;
        } else if (a.priority > b.priority) {
            return 1;
        } else {
            return 0;
        }
    });
};
Edge = {
    make: generic({
        name: "talos: make edge",
        default: function() {
            for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){
                args[_key] = arguments[_key];
            }
            throw new Error(`talos make edge: input is malformed ${JSON.stringify(args)}`);
        }
    })
};
generic(Edge.make, Type.isObject, function(object) {
    return {
        when: normalizeWhen(object.when),
        run: object.run,
        move: normalizeMove(object.move)
    };
});
generic(Edge.make, isState, Type.isAny, function(move, _when) {
    return Edge.make({
        move,
        when: _when
    });
});
generic(Edge.make, isState, Type.isObject, function(move, object) {
    var ref;
    return {
        when: normalizeWhen(object.when),
        run: object.run,
        move: normalizeMove((ref = object.move) != null ? ref : move)
    };
});
Edges = {
    make: generic({
        name: "talos: make edges",
        default: function() {
            for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){
                args[_key] = arguments[_key];
            }
            throw new Error(`talos make edges: input is malformed ${JSON.stringify(args)}`);
        }
    })
};
generic(Edges.make, Type.isObject, function(object) {
    var defaultFrame, edges, frames, i, j, key, len, len1, priority, ref, ref1, value;
    frames = [];
    defaultFrame = null;
    ref = Reflect.ownKeys(object);
    for(i = 0, len = ref.length; i < len; i++){
        key = ref[i];
        value = object[key];
        priority = (ref1 = value.priority) != null ? ref1 : 100;
        if (key === "default") {
            defaultFrame = {
                key,
                value
            };
        } else {
            if (key === "end") {
                key = $end;
            }
            frames.push({
                key,
                value,
                priority
            });
        }
    }
    prioritize(frames);
    edges = [];
    for(j = 0, len1 = frames.length; j < len1; j++){
        ({ key, value } = frames[j]);
        edges.push(Edge.make(key, value));
    }
    if (defaultFrame != null) {
        // default is a special case emphasizing an always true "when" function.
        ({ value } = defaultFrame);
        if (Type.isObject(value)) {
            edges.push(Edge.make({
                ...value,
                when: true
            }));
        } else {
            edges.push(Edge.make({
                when: true,
                move: value
            }));
        }
    }
    return edges;
});
generic(Edges.make, Type.isArray, function(array) {
    var edge, i, len, results;
    results = [];
    for(i = 0, len = array.length; i < len; i++){
        edge = array[i];
        results.push(Edge.make(edge));
    }
    return results;
});
generic(Edges.make, Type.isFunction, function(f) {
    var edge;
    edge = {
        when: true,
        run: f,
        move: $end
    };
    return [
        Edge.make(edge)
    ];
});
generic(Edges.make, isState, function(move) {
    return Edges.make({
        [move]: true
    });
});
Vertex = {
    make: function(key, value) {
        return {
            name: key,
            edges: Edges.make(value)
        };
    }
};
Machine = {
    make: function(graph) {
        var i, key, len, machine, ref, value;
        if (!Type.isObject(graph)) {
            throw new Error("Talos machine representation is malformed");
        }
        if (graph[$start] == null) {
            if (graph.start != null) {
                graph[$start] = graph.start;
                delete graph.start;
            } else {
                throw new Error("no start state defined for this machine");
            }
        }
        if (graph[$end] == null) {
            if (graph.end != null) {
                graph[$end] = graph.end;
                delete graph.end;
            }
        }
        // TODO: Do we want a clone operation here?
        machine = {
            graph: {}
        };
        ref = Reflect.ownKeys(graph);
        for(i = 0, len = ref.length; i < len; i++){
            key = ref[i];
            value = graph[key];
            machine.graph[key] = Vertex.make(key, value);
        }
        return machine;
    }
};
export { Machine, Vertex, Edges, Edge }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL21hY2hpbmUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxhQUFBLEVBQUEsYUFBQSxFQUFBOztBQUFBLE9BQUE7RUFBUyxPQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFPLENBQUEsUUFBUCxNQUFBOztBQUNBLE9BQUE7RUFBUyxNQUFUO0VBQWlCLElBQWpCO0NBQUEsTUFBQTs7QUFFQSxPQUFBLEdBQVUsUUFBQSxDQUFFLENBQUYsQ0FBQTtTQUFTLENBQUUsSUFBSSxDQUFDLFFBQUwsQ0FBYyxDQUFkLENBQUYsQ0FBQSxJQUF1QixDQUFFLElBQUksQ0FBQyxRQUFMLENBQWMsQ0FBZCxDQUFGO0FBQWhDOztBQUVWLGFBQUEsR0FBZ0IsUUFBQSxDQUFFLENBQUYsQ0FBQTtFQUNkLElBQUcsT0FBQSxDQUFRLENBQVIsQ0FBSDtXQUNFLFFBQUEsQ0FBRSxLQUFGLEVBQVMsS0FBVCxDQUFBO2FBQW9CLEtBQUEsS0FBUztJQUE3QixFQURGO0dBQUEsTUFFSyxJQUFHLElBQUksQ0FBQyxVQUFMLENBQWdCLENBQWhCLENBQUg7V0FDSCxFQURHO0dBQUEsTUFFQSxJQUFHLElBQUksQ0FBQyxTQUFMLENBQWUsQ0FBZixDQUFIO1dBQ0gsUUFBQSxDQUFBLENBQUE7YUFBRztJQUFILEVBREc7R0FBQSxNQUFBO0lBR0gsTUFBTSxJQUFJLEtBQUosQ0FBVSxzQ0FBVixFQUhIOztBQUxTOztBQVVoQixhQUFBLEdBQWdCLFFBQUEsQ0FBRSxDQUFGLENBQUE7RUFDZCxJQUFHLE9BQUEsQ0FBUSxDQUFSLENBQUg7V0FDRSxRQUFBLENBQUUsS0FBRixFQUFTLEtBQVQsQ0FBQTthQUFvQixLQUFLLENBQUMsS0FBTixHQUFjO0lBQWxDLEVBREY7R0FBQSxNQUVLLElBQUcsSUFBSSxDQUFDLFVBQUwsQ0FBZ0IsQ0FB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LEtBQUssQ0FBRSxHQUFGLENBQWIsR0FBdUIsTUFBTSxDQUFDLElBQVAsQ0FBWSxHQUFaLEVBQWlCLEtBQWpCO0lBRnpCO1dBSUE7RUF2Qkk7QUFBTjs7QUEwQkYsT0FBQTtFQUFTLE9BQVQ7RUFBa0IsTUFBbEI7RUFBMEIsS0FBMUI7RUFBaUMsSUFBakMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmljIH0gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZ2VuZXJpY1wiXG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gXCJAZGFzaGtpdGUvam95L3R5cGVcIlxuaW1wb3J0IHsgJHN0YXJ0LCAkZW5kIH0gZnJvbSBcIi4vc3RhdGVzXCJcblxuaXNTdGF0ZSA9ICggeCApIC0+ICggVHlwZS5pc1N0cmluZyB4ICkgfHwgKCBUeXBlLmlzU3ltYm9sIHggKVxuXG5ub3JtYWxpemVXaGVuID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiBldmVudCA9PSBjb25kaXRpb25cbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZSBpZiBUeXBlLmlzQm9vbGVhbiB4XG4gICAgLT4geFxuICBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yIFwidW5hYmxlIHRvIG5vcm1hbGl6ZSB3aGVuIGRlc2NyaXB0aW9uXCJcblxubm9ybWFsaXplTW92ZSA9ICggeCApIC0+XG4gIGlmIGlzU3RhdGUgeFxuICAgICggdGFsb3MsIGV2ZW50ICkgLT4gdGFsb3Muc3RhdGUgPSB4XG4gIGVsc2UgaWYgVHlwZS5pc0Z1bmN0aW9uIHhcbiAgICB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIG1vdmUgZGVzY3JpcHRpb25cIlxuXG5wcmlvcml0aXplID0gKCBmcmFtZXMgKSAtPlxuICBmcmFtZXMuc29ydCAoIGEsIGIgKSAtPiBcbiAgICBpZiBhLnByaW9yaXR5IDwgYi5wcmlvcml0eVxuICAgICAgLTFcbiAgICBlbHNlIGlmIGEucHJpb3JpdHkgPiBiLnByaW9yaXR5XG4gICAgICAxXG4gICAgZWxzZVxuICAgICAgMFxuXG5cbkVkZ2UgPVxuICBtYWtlOiBnZW5lcmljIFxuICAgIG5hbWU6IFwidGFsb3M6IG1ha2UgZWRnZVwiXG4gICAgZGVmYXVsdDogKCBhcmdzLi4uICkgLT4gXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJ0YWxvcyBtYWtlIGVkZ2U6IGlucHV0IGlzIG1hbGZvcm1lZCAjeyBKU09OLnN0cmluZ2lmeSBhcmdzIH1cIlxuXG5nZW5lcmljIEVkZ2UubWFrZSwgVHlwZS5pc09iamVjdCwgKCBvYmplY3QgKSAtPlxuICB3aGVuOiBub3JtYWxpemVXaGVuIG9iamVjdC53aGVuXG4gIHJ1bjogb2JqZWN0LnJ1blxuICBtb3ZlOiBub3JtYWxpemVNb3ZlIG9iamVjdC5tb3ZlXG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBpc1N0YXRlLCBUeXBlLmlzQW55LCAoIG1vdmUsIF93aGVuICkgLT5cbiAgRWRnZS5tYWtlIHsgbW92ZSwgd2hlbjogX3doZW4gfVxuXG5nZW5lcmljIEVkZ2UubWFrZSwgaXNTdGF0ZSwgVHlwZS5pc09iamVjdCwgKCBtb3ZlLCBvYmplY3QgKSAtPlxuICB3aGVuOiBub3JtYWxpemVXaGVuIG9iamVjdC53aGVuXG4gIHJ1bjogb2JqZWN0LnJ1blxuICBtb3ZlOiBub3JtYWxpemVNb3ZlIG9iamVjdC5tb3ZlID8gbW92ZVxuXG5cbkVkZ2VzID0gXG4gIG1ha2U6IGdlbmVyaWMgXG4gICAgbmFtZTogXCJ0YWxvczogbWFrZSBlZGdlc1wiXG4gICAgZGVmYXVsdDogKCBhcmdzLi4uICkgLT4gXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJ0YWxvcyBtYWtlIGVkZ2VzOiBpbnB1dCBpcyBtYWxmb3JtZWQgI3sgSlNPTi5zdHJpbmdpZnkgYXJncyB9XCJcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIGZyYW1lcyA9IFtdXG4gIGRlZmF1bHRGcmFtZSA9IG51bGxcbiAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgb2JqZWN0XG4gICAgdmFsdWUgPSBvYmplY3RbIGtleSBdXG4gICAgcHJpb3JpdHkgPSB2YWx1ZS5wcmlvcml0eSA/IDEwMFxuICAgIGlmIGtleSA9PSBcImRlZmF1bHRcIlxuICAgICAgZGVmYXVsdEZyYW1lID0geyBrZXksIHZhbHVlIH1cbiAgICBlbHNlXG4gICAgICBrZXkgPSAkZW5kIGlmIGtleSA9PSBcImVuZFwiXG4gICAgICBmcmFtZXMucHVzaCB7IGtleSwgdmFsdWUsIHByaW9yaXR5IH1cblxuICBwcmlvcml0aXplIGZyYW1lc1xuXG4gIGVkZ2VzID0gW11cbiAgZm9yIHsga2V5LCB2YWx1ZSB9IGluIGZyYW1lc1xuICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIGtleSwgdmFsdWVcblxuICBpZiBkZWZhdWx0RnJhbWU/XG4gICAgIyBkZWZhdWx0IGlzIGEgc3BlY2lhbCBjYXNlIGVtcGhhc2l6aW5nIGFuIGFsd2F5cyB0cnVlIFwid2hlblwiIGZ1bmN0aW9uLlxuICAgIHsgdmFsdWUgfSA9IGRlZmF1bHRGcmFtZVxuICAgIGlmIFR5cGUuaXNPYmplY3QgdmFsdWVcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHsgdmFsdWUuLi4sIHdoZW46IHRydWUgfVxuICAgIGVsc2VcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHdoZW46IHRydWUsIG1vdmU6IHZhbHVlXG4gIFxuICBlZGdlc1xuICBcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzQXJyYXksICggYXJyYXkgKSAtPlxuICBmb3IgZWRnZSBpbiBhcnJheVxuICAgIEVkZ2UubWFrZSBlZGdlXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgVHlwZS5pc0Z1bmN0aW9uLCAoIGYgKSAtPlxuICBlZGdlID0gd2hlbjogdHJ1ZSwgcnVuOiBmLCBtb3ZlOiAkZW5kXG4gIFsgRWRnZS5tYWtlIGVkZ2UgXVxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIGlzU3RhdGUsICggbW92ZSApIC0+XG4gIEVkZ2VzLm1ha2UgWyBtb3ZlIF06IHRydWVcblxuXG5cblZlcnRleCA9XG4gIG1ha2U6ICgga2V5LCB2YWx1ZSApIC0+XG4gICAgbmFtZToga2V5XG4gICAgZWRnZXM6IEVkZ2VzLm1ha2UgdmFsdWVcblxuXG5NYWNoaW5lID1cbiAgbWFrZTogKCBncmFwaCApIC0+XG4gICAgaWYgISBUeXBlLmlzT2JqZWN0IGdyYXBoXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJUYWxvcyBtYWNoaW5lIHJlcHJlc2VudGF0aW9uIGlzIG1hbGZvcm1lZFwiXG5cbiAgICBpZiAhZ3JhcGhbICRzdGFydCBdP1xuICAgICAgaWYgZ3JhcGguc3RhcnQ/XG4gICAgICAgIGdyYXBoWyAkc3RhcnQgXSA9IGdyYXBoLnN0YXJ0XG4gICAgICAgIGRlbGV0ZSBncmFwaC5zdGFydFxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IgXCJubyBzdGFydCBzdGF0ZSBkZWZpbmVkIGZvciB0aGlzIG1hY2hpbmVcIlxuXG4gICAgaWYgIWdyYXBoWyAkZW5kIF0/XG4gICAgICBpZiBncmFwaC5lbmQ/XG4gICAgICAgIGdyYXBoWyAkZW5kIF0gPSBncmFwaC5lbmRcbiAgICAgICAgZGVsZXRlIGdyYXBoLmVuZFxuXG4gICAgIyBUT0RPOiBEbyB3ZSB3YW50IGEgY2xvbmUgb3BlcmF0aW9uIGhlcmU/XG4gICAgbWFjaGluZSA9IGdyYXBoOiB7fVxuXG4gICAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgZ3JhcGhcbiAgICAgIHZhbHVlID0gZ3JhcGhbIGtleSBdXG4gICAgICBtYWNoaW5lLmdyYXBoWyBrZXkgXSA9IFZlcnRleC5tYWtlIGtleSwgdmFsdWVcbiAgICBcbiAgICBtYWNoaW5lXG5cblxuZXhwb3J0IHsgTWFjaGluZSwgVmVydGV4LCBFZGdlcywgRWRnZSB9Il19
 //# sourceURL=src/machine.coffee

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tYWNoaW5lLmNvZmZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmljIH0gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZ2VuZXJpY1wiXG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gXCJAZGFzaGtpdGUvam95L3R5cGVcIlxuaW1wb3J0IHsgJHN0YXJ0LCAkZW5kIH0gZnJvbSBcIi4vc3RhdGVzXCJcblxuaXNTdGF0ZSA9ICggeCApIC0+ICggVHlwZS5pc1N0cmluZyB4ICkgfHwgKCBUeXBlLmlzU3ltYm9sIHggKVxuXG5ub3JtYWxpemVXaGVuID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiBldmVudCA9PSBjb25kaXRpb25cbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZSBpZiBUeXBlLmlzQm9vbGVhbiB4XG4gICAgLT4geFxuICBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yIFwidW5hYmxlIHRvIG5vcm1hbGl6ZSB3aGVuIGRlc2NyaXB0aW9uXCJcblxubm9ybWFsaXplTW92ZSA9ICggeCApIC0+XG4gIGlmIGlzU3RhdGUgeFxuICAgICggdGFsb3MsIGV2ZW50ICkgLT4gdGFsb3Muc3RhdGUgPSB4XG4gIGVsc2UgaWYgVHlwZS5pc0Z1bmN0aW9uIHhcbiAgICB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIG1vdmUgZGVzY3JpcHRpb25cIlxuXG5wcmlvcml0aXplID0gKCBmcmFtZXMgKSAtPlxuICBmcmFtZXMuc29ydCAoIGEsIGIgKSAtPiBcbiAgICBpZiBhLnByaW9yaXR5IDwgYi5wcmlvcml0eVxuICAgICAgLTFcbiAgICBlbHNlIGlmIGEucHJpb3JpdHkgPiBiLnByaW9yaXR5XG4gICAgICAxXG4gICAgZWxzZVxuICAgICAgMFxuXG5cbkVkZ2UgPVxuICBtYWtlOiBnZW5lcmljIFxuICAgIG5hbWU6IFwidGFsb3M6IG1ha2UgZWRnZVwiXG4gICAgZGVmYXVsdDogKCBhcmdzLi4uICkgLT4gXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJ0YWxvcyBtYWtlIGVkZ2U6IGlucHV0IGlzIG1hbGZvcm1lZCAjeyBKU09OLnN0cmluZ2lmeSBhcmdzIH1cIlxuXG5nZW5lcmljIEVkZ2UubWFrZSwgVHlwZS5pc09iamVjdCwgKCBvYmplY3QgKSAtPlxuICB3aGVuOiBub3JtYWxpemVXaGVuIG9iamVjdC53aGVuXG4gIHJ1bjogb2JqZWN0LnJ1blxuICBtb3ZlOiBub3JtYWxpemVNb3ZlIG9iamVjdC5tb3ZlXG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBpc1N0YXRlLCBUeXBlLmlzQW55LCAoIG1vdmUsIF93aGVuICkgLT5cbiAgRWRnZS5tYWtlIHsgbW92ZSwgd2hlbjogX3doZW4gfVxuXG5nZW5lcmljIEVkZ2UubWFrZSwgaXNTdGF0ZSwgVHlwZS5pc09iamVjdCwgKCBtb3ZlLCBvYmplY3QgKSAtPlxuICB3aGVuOiBub3JtYWxpemVXaGVuIG9iamVjdC53aGVuXG4gIHJ1bjogb2JqZWN0LnJ1blxuICBtb3ZlOiBub3JtYWxpemVNb3ZlIG9iamVjdC5tb3ZlID8gbW92ZVxuXG5cbkVkZ2VzID0gXG4gIG1ha2U6IGdlbmVyaWMgXG4gICAgbmFtZTogXCJ0YWxvczogbWFrZSBlZGdlc1wiXG4gICAgZGVmYXVsdDogKCBhcmdzLi4uICkgLT4gXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJ0YWxvcyBtYWtlIGVkZ2VzOiBpbnB1dCBpcyBtYWxmb3JtZWQgI3sgSlNPTi5zdHJpbmdpZnkgYXJncyB9XCJcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIGZyYW1lcyA9IFtdXG4gIGRlZmF1bHRGcmFtZSA9IG51bGxcbiAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgb2JqZWN0XG4gICAgdmFsdWUgPSBvYmplY3RbIGtleSBdXG4gICAgcHJpb3JpdHkgPSB2YWx1ZS5wcmlvcml0eSA/IDEwMFxuICAgIGlmIGtleSA9PSBcImRlZmF1bHRcIlxuICAgICAgZGVmYXVsdEZyYW1lID0geyBrZXksIHZhbHVlIH1cbiAgICBlbHNlXG4gICAgICBrZXkgPSAkZW5kIGlmIGtleSA9PSBcImVuZFwiXG4gICAgICBmcmFtZXMucHVzaCB7IGtleSwgdmFsdWUsIHByaW9yaXR5IH1cblxuICBwcmlvcml0aXplIGZyYW1lc1xuXG4gIGVkZ2VzID0gW11cbiAgZm9yIHsga2V5LCB2YWx1ZSB9IGluIGZyYW1lc1xuICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIGtleSwgdmFsdWVcblxuICBpZiBkZWZhdWx0RnJhbWU/XG4gICAgIyBkZWZhdWx0IGlzIGEgc3BlY2lhbCBjYXNlIGVtcGhhc2l6aW5nIGFuIGFsd2F5cyB0cnVlIFwid2hlblwiIGZ1bmN0aW9uLlxuICAgIHsgdmFsdWUgfSA9IGRlZmF1bHRGcmFtZVxuICAgIGlmIFR5cGUuaXNPYmplY3QgdmFsdWVcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHsgdmFsdWUuLi4sIHdoZW46IHRydWUgfVxuICAgIGVsc2VcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHdoZW46IHRydWUsIG1vdmU6IHZhbHVlXG4gIFxuICBlZGdlc1xuICBcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzQXJyYXksICggYXJyYXkgKSAtPlxuICBmb3IgZWRnZSBpbiBhcnJheVxuICAgIEVkZ2UubWFrZSBlZGdlXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgVHlwZS5pc0Z1bmN0aW9uLCAoIGYgKSAtPlxuICBlZGdlID0gd2hlbjogdHJ1ZSwgcnVuOiBmLCBtb3ZlOiAkZW5kXG4gIFsgRWRnZS5tYWtlIGVkZ2UgXVxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIGlzU3RhdGUsICggbW92ZSApIC0+XG4gIEVkZ2VzLm1ha2UgWyBtb3ZlIF06IHRydWVcblxuXG5cblZlcnRleCA9XG4gIG1ha2U6ICgga2V5LCB2YWx1ZSApIC0+XG4gICAgbmFtZToga2V5XG4gICAgZWRnZXM6IEVkZ2VzLm1ha2UgdmFsdWVcblxuXG5NYWNoaW5lID1cbiAgbWFrZTogKCBncmFwaCApIC0+XG4gICAgaWYgISBUeXBlLmlzT2JqZWN0IGdyYXBoXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJUYWxvcyBtYWNoaW5lIHJlcHJlc2VudGF0aW9uIGlzIG1hbGZvcm1lZFwiXG5cbiAgICBpZiAhZ3JhcGhbICRzdGFydCBdP1xuICAgICAgaWYgZ3JhcGguc3RhcnQ/XG4gICAgICAgIGdyYXBoWyAkc3RhcnQgXSA9IGdyYXBoLnN0YXJ0XG4gICAgICAgIGRlbGV0ZSBncmFwaC5zdGFydFxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IgXCJubyBzdGFydCBzdGF0ZSBkZWZpbmVkIGZvciB0aGlzIG1hY2hpbmVcIlxuXG4gICAgaWYgIWdyYXBoWyAkZW5kIF0/XG4gICAgICBpZiBncmFwaC5lbmQ/XG4gICAgICAgIGdyYXBoWyAkZW5kIF0gPSBncmFwaC5lbmRcbiAgICAgICAgZGVsZXRlIGdyYXBoLmVuZFxuXG4gICAgIyBUT0RPOiBEbyB3ZSB3YW50IGEgY2xvbmUgb3BlcmF0aW9uIGhlcmU/XG4gICAgbWFjaGluZSA9IGdyYXBoOiB7fVxuXG4gICAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgZ3JhcGhcbiAgICAgIHZhbHVlID0gZ3JhcGhbIGtleSBdXG4gICAgICBtYWNoaW5lLmdyYXBoWyBrZXkgXSA9IFZlcnRleC5tYWtlIGtleSwgdmFsdWVcbiAgICBcbiAgICBtYWNoaW5lXG5cblxuZXhwb3J0IHsgTWFjaGluZSwgVmVydGV4LCBFZGdlcywgRWRnZSB9Il0sIm5hbWVzIjpbIkVkZ2UiLCJFZGdlcyIsIk1hY2hpbmUiLCJWZXJ0ZXgiLCJpc1N0YXRlIiwibm9ybWFsaXplTW92ZSIsIm5vcm1hbGl6ZVdoZW4iLCJwcmlvcml0aXplIiwiZ2VuZXJpYyIsIlR5cGUiLCIkc3RhcnQiLCIkZW5kIiwieCIsImlzU3RyaW5nIiwiaXNTeW1ib2wiLCJ0YWxvcyIsImV2ZW50IiwiY29uZGl0aW9uIiwiaXNGdW5jdGlvbiIsImlzQm9vbGVhbiIsIkVycm9yIiwic3RhdGUiLCJmcmFtZXMiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eSIsIm1ha2UiLCJuYW1lIiwiZGVmYXVsdCIsImFyZ3MiLCJKU09OIiwic3RyaW5naWZ5IiwiaXNPYmplY3QiLCJvYmplY3QiLCJ3aGVuIiwicnVuIiwibW92ZSIsImlzQW55IiwiX3doZW4iLCJyZWYiLCJkZWZhdWx0RnJhbWUiLCJlZGdlcyIsImkiLCJqIiwia2V5IiwibGVuIiwibGVuMSIsInJlZjEiLCJ2YWx1ZSIsIlJlZmxlY3QiLCJvd25LZXlzIiwibGVuZ3RoIiwicHVzaCIsImlzQXJyYXkiLCJhcnJheSIsImVkZ2UiLCJyZXN1bHRzIiwiZiIsImdyYXBoIiwibWFjaGluZSIsInN0YXJ0IiwiZW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxNQUFBQyxPQUFBQyxTQUFBQyxRQUFBQyxTQUFBQyxlQUFBQyxlQUFBQztBQUFBLFNBQVNDLE9BQVQsUUFBQSx3QkFBQTtBQUNBLFlBQU9DLFVBQVAscUJBQUE7QUFDQSxTQUFTQyxNQUFULEVBQWlCQyxJQUFqQixRQUFBLFdBQUE7QUFFQVAsVUFBVSxTQUFFUSxDQUFGO1dBQVMsQUFBRUgsS0FBS0ksUUFBTCxDQUFjRCxNQUFTSCxLQUFLSyxRQUFMLENBQWNGO0FBQWhEO0FBRVZOLGdCQUFnQixTQUFFTSxDQUFGO0lBQ2QsSUFBR1IsUUFBUVEsSUFBWDtlQUNFLFNBQUVHLEtBQUYsRUFBU0MsS0FBVDttQkFBb0JBLFVBQVNDO1FBQTdCO1dBQ0csSUFBR1IsS0FBS1MsVUFBTCxDQUFnQk4sSUFBbkI7ZUFDSEE7V0FDRyxJQUFHSCxLQUFLVSxTQUFMLENBQWVQLElBQWxCO2VBQ0g7bUJBQUdBO1FBQUg7V0FERztRQUdILE1BQU0sSUFBSVEsTUFBTTs7QUFSSjtBQVVoQmYsZ0JBQWdCLFNBQUVPLENBQUY7SUFDZCxJQUFHUixRQUFRUSxJQUFYO2VBQ0UsU0FBRUcsS0FBRixFQUFTQyxLQUFU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