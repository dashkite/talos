"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Talos = void 0;
var Meta = _interopRequireWildcard(require("@dashkite/joy/metaclass"));
var Type = _interopRequireWildcard(require("@dashkite/joy/type"));
var $ = _interopRequireWildcard(require("../internal/states.js"));
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
var Talos;
exports.Talos = Talos = function () {
  class Talos {
    constructor({
      state: state1,
      context
    }) {
      this.state = state1;
      this.context = context;
      if (this.state == null) {
        this.state = $.start;
      }
      if (this.context == null) {
        this.context = {};
      }
      this.error = null;
    }
    static create(options = {}) {
      return new Talos(options);
    }
    halt() {
      return this.state = $.halt;
    }
    restart(state) {
      return this.state = state != null ? state : this.start;
    }
  }
  ;
  Meta.mixin(Talos.prototype, [Meta.getters({
    starting: function () {
      return $.atStart(this.state);
    },
    halted: function () {
      return $.atHalt(this.state);
    },
    success: function () {
      return this.halted && this.error == null;
    },
    failure: function () {
      return this.halted && this.error != null;
    },
    paused: function () {
      return $.atPause(this.state);
    },
    running: function () {
      return !this.paused;
    }
  })]);
  Talos.isType = Type.isType(Talos);
  return Talos;
}.call(void 0);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jb250YWluZXJzL3RhbG9zLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBLElBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUE7QUFDQSxJQUFBLElBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUE7QUFBQSxJQUFBLENBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUE7QUFBQSxTQUFBLHlCQUFBLENBQUEsNkJBQUEsT0FBQSxtQkFBQSxDQUFBLE9BQUEsT0FBQSxJQUFBLENBQUEsT0FBQSxPQUFBLFlBQUEsd0JBQUEsWUFBQSxDQUFBLENBQUEsV0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxDQUFBO0FBQUEsU0FBQSx3QkFBQSxDQUFBLEVBQUEsQ0FBQSxTQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLFVBQUEsU0FBQSxDQUFBLGVBQUEsQ0FBQSx1QkFBQSxDQUFBLHlCQUFBLENBQUEsV0FBQSxPQUFBLEVBQUEsQ0FBQSxRQUFBLENBQUEsR0FBQSx3QkFBQSxDQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxLQUFBLFNBQUEsVUFBQSxDQUFBLEdBQUEsTUFBQSxDQUFBLGNBQUEsSUFBQSxNQUFBLENBQUEsd0JBQUEsV0FBQSxDQUFBLElBQUEsQ0FBQSxvQkFBQSxDQUFBLElBQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsRUFBQSxDQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxNQUFBLENBQUEsd0JBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxVQUFBLENBQUEsS0FBQSxDQUFBLENBQUEsR0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLElBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLE9BQUEsR0FBQSxDQUFBLEVBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxFQUFBLENBQUEsR0FBQSxDQUFBO0FBREEsSUFBQSxLQUFBO0FBS00sT0FBQSxDQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsWUFBQTtFQUFOLE1BQUEsS0FBQSxDQUFBO0lBQ0UsV0FBYSxDQUFDO01BQUcsS0FBQSxFQUFBLE1BQUg7O0lBQUEsQ0FBRCxFQUFBO01BQUcsSUFBQyxDQUFBLEtBQUEsR0FBQSxNQUFBO01BQU8sSUFBQyxDQUFBLE9BQUEsR0FBQSxPQUFBOztRQUN2QixJQUFDLENBQUEsS0FBQSxHQUFTLENBQUMsQ0FBQyxLQUFBOzs7UUFDWixJQUFDLENBQUEsT0FBQSxHQUFXLENBQUEsQ0FBQTs7TUFDWixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUE7SUFIRTtJQWVKLE9BQVIsTUFBUSxDQUFFLE9BQUEsR0FBVSxDQUFBLENBQVosRUFBQTthQUNQLElBQUksS0FBSixDQUFVLE9BQVYsQ0FBQTtJQURPO0lBS1QsSUFBTSxDQUFBLEVBQUE7YUFDSixJQUFDLENBQUEsS0FBRCxHQUFTLENBQUMsQ0FBQyxJQUFBO0lBRFA7SUFHTixPQUFTLENBQUUsS0FBRixFQUFBO2FBQ1AsSUFBQyxDQUFBLEtBQUQsR0FBQSxLQUFBLElBQUEsSUFBQSxHQUFTLEtBQUEsR0FBUSxJQUFDLENBQUMsS0FBQTtJQURaO0VBeEJYO0VBQUE7RUFNRSxJQUFJLENBQUMsS0FBTCxDQUFXLEtBQUMsQ0FBQSxTQUFaLEVBQWdCLENBQ2QsSUFBSSxDQUFDLE9BQUwsQ0FDRTtJQUFBLFFBQUEsRUFBVSxTQUFBLENBQUEsRUFBQTthQUFHLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBQyxDQUFBLEtBQVgsQ0FBQTtJQUFILENBQVY7SUFDQSxNQUFBLEVBQVEsU0FBQSxDQUFBLEVBQUE7YUFBRyxDQUFDLENBQUMsTUFBRixDQUFTLElBQUMsQ0FBQSxLQUFWLENBQUE7SUFBSCxDQURSO0lBRUEsT0FBQSxFQUFTLFNBQUEsQ0FBQSxFQUFBO2FBQUcsSUFBQyxDQUFBLE1BQUQsSUFBWSxJQUFBLENBQUEsS0FBQSxJQUFBLElBQUE7SUFBZixDQUZUO0lBR0EsT0FBQSxFQUFTLFNBQUEsQ0FBQSxFQUFBO2FBQUcsSUFBQyxDQUFBLE1BQUQsSUFBVyxJQUFBLENBQUEsS0FBQSxJQUFBLElBQUE7SUFBZCxDQUhUO0lBSUEsTUFBQSxFQUFRLFNBQUEsQ0FBQSxFQUFBO2FBQUcsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxJQUFDLENBQUEsS0FBWCxDQUFBO0lBQUgsQ0FKUjtJQUtBLE9BQUEsRUFBUyxTQUFBLENBQUEsRUFBQTthQUFHLENBQUMsSUFBQyxDQUFBLE1BQUE7SUFBTDtFQUxULENBREYsQ0FEYyxDQUFoQixDQUFBO0VBYUEsS0FBQyxDQUFBLE1BQUQsR0FBUyxJQUFJLENBQUMsTUFBTCxDQUFZLEtBQVosQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIE1ldGEgZnJvbSBcIkBkYXNoa2l0ZS9qb3kvbWV0YWNsYXNzXCJcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSBcIkBkYXNoa2l0ZS9qb3kvdHlwZVwiXG5pbXBvcnQgKiBhcyAkIGZyb20gXCIuLi9pbnRlcm5hbC9zdGF0ZXNcIlxuXG5cbmNsYXNzIFRhbG9zXG4gIGNvbnN0cnVjdG9yOiAoeyBAc3RhdGUsIEBjb250ZXh0IH0pIC0+XG4gICAgQHN0YXRlID89ICQuc3RhcnRcbiAgICBAY29udGV4dCA/PSB7fVxuICAgIEBlcnJvciA9IG51bGxcblxuICBNZXRhLm1peGluIEA6OiwgW1xuICAgIE1ldGEuZ2V0dGVyc1xuICAgICAgc3RhcnRpbmc6IC0+ICQuYXRTdGFydCBAc3RhdGVcbiAgICAgIGhhbHRlZDogLT4gJC5hdEhhbHQgQHN0YXRlXG4gICAgICBzdWNjZXNzOiAtPiBAaGFsdGVkICYmICFAZXJyb3I/XG4gICAgICBmYWlsdXJlOiAtPiBAaGFsdGVkICYmIEBlcnJvcj9cbiAgICAgIHBhdXNlZDogLT4gJC5hdFBhdXNlIEBzdGF0ZVxuICAgICAgcnVubmluZzogLT4gIUBwYXVzZWRcbiAgXVxuXG4gIEBjcmVhdGU6ICggb3B0aW9ucyA9IHt9ICkgLT5cbiAgICBuZXcgVGFsb3Mgb3B0aW9uc1xuXG4gIEBpc1R5cGU6IFR5cGUuaXNUeXBlIEBcblxuICBoYWx0OiAtPlxuICAgIEBzdGF0ZSA9ICQuaGFsdFxuXG4gIHJlc3RhcnQ6ICggc3RhdGUgKSAtPlxuICAgIEBzdGF0ZSA9IHN0YXRlID8gQC5zdGFydFxuXG5cblxuZXhwb3J0IHtcbiAgVGFsb3Ncbn0iXSwic291cmNlUm9vdCI6IiJ9
//# sourceURL=src/containers/talos.coffee