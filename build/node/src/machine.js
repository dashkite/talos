"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    Machine: function() {
        return Machine;
    },
    Vertex: function() {
        return Vertex;
    },
    Edges: function() {
        return Edges;
    },
    Edge: function() {
        return Edge;
    }
});
const _generic = require("@dashkite/joy/generic");
const _type = /*#__PURE__*/ _interop_require_wildcard(require("@dashkite/joy/type"));
const _states = require("./states");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
var Edge, Edges, Machine, Vertex, isState, normalizeMove, normalizeWhen, prioritize;
isState = function(x) {
    return _type.isString(x) || _type.isSymbol(x);
};
normalizeWhen = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return event === condition;
        };
    } else if (_type.isFunction(x)) {
        return x;
    } else if (_type.isBoolean(x)) {
        return function() {
            return x;
        };
    } else {
        throw new Error("unable to normalize when description");
    }
};
normalizeMove = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return talos.state = x;
        };
    } else if (_type.isFunction(x)) {
        return x;
    } else {
        throw new Error("unable to normalize move description");
    }
};
prioritize = function(frames) {
    return frames.sort(function(a, b) {
        if (a.priority < b.priority) {
            return -1;
        } else if (a.priority > b.priority) {
            return 1;
        } else {
            return 0;
        }
    });
};
Edge = {
    make: (0, _generic.generic)({
        name: "talos: make edge",
        default: function(...args) {
            throw new Error(`talos make edge: input is malformed ${JSON.stringify(args)}`);
        }
    })
};
(0, _generic.generic)(Edge.make, _type.isObject, function(object) {
    return {
        when: normalizeWhen(object.when),
        run: object.run,
        move: normalizeMove(object.move)
    };
});
(0, _generic.generic)(Edge.make, isState, _type.isAny, function(move, _when) {
    return Edge.make({
        move,
        when: _when
    });
});
(0, _generic.generic)(Edge.make, isState, _type.isObject, function(move, object) {
    var ref;
    return {
        when: normalizeWhen(object.when),
        run: object.run,
        move: normalizeMove((ref = object.move) != null ? ref : move)
    };
});
Edges = {
    make: (0, _generic.generic)({
        name: "talos: make edges",
        default: function(...args) {
            throw new Error(`talos make edges: input is malformed ${JSON.stringify(args)}`);
        }
    })
};
(0, _generic.generic)(Edges.make, _type.isObject, function(object) {
    var defaultFrame, edges, frames, i, j, key, len, len1, priority, ref, ref1, value;
    frames = [];
    defaultFrame = null;
    ref = Reflect.ownKeys(object);
    for(i = 0, len = ref.length; i < len; i++){
        key = ref[i];
        value = object[key];
        priority = (ref1 = value.priority) != null ? ref1 : 100;
        if (key === "default") {
            defaultFrame = {
                key,
                value
            };
        } else {
            if (key === "end") {
                key = _states.$end;
            }
            frames.push({
                key,
                value,
                priority
            });
        }
    }
    prioritize(frames);
    edges = [];
    for(j = 0, len1 = frames.length; j < len1; j++){
        ({ key, value } = frames[j]);
        edges.push(Edge.make(key, value));
    }
    if (defaultFrame != null) {
        // default is a special case emphasizing an always true "when" function.
        ({ value } = defaultFrame);
        if (_type.isObject(value)) {
            edges.push(Edge.make({
                ...value,
                when: true
            }));
        } else {
            edges.push(Edge.make({
                when: true,
                move: value
            }));
        }
    }
    return edges;
});
(0, _generic.generic)(Edges.make, _type.isArray, function(array) {
    var edge, i, len, results;
    results = [];
    for(i = 0, len = array.length; i < len; i++){
        edge = array[i];
        results.push(Edge.make(edge));
    }
    return results;
});
(0, _generic.generic)(Edges.make, _type.isFunction, function(f) {
    var edge;
    edge = {
        when: true,
        run: f,
        move: _states.$end
    };
    return [
        Edge.make(edge)
    ];
});
(0, _generic.generic)(Edges.make, isState, function(move) {
    return Edges.make({
        [move]: true
    });
});
Vertex = {
    make: function(key, value) {
        return {
            name: key,
            edges: Edges.make(value)
        };
    }
};
Machine = {
    make: function(graph) {
        var i, key, len, machine, ref, value;
        if (!_type.isObject(graph)) {
            throw new Error("Talos machine representation is malformed");
        }
        if (graph[_states.$start] == null) {
            if (graph.start != null) {
                graph[_states.$start] = graph.start;
                delete graph.start;
            } else {
                throw new Error("no start state defined for this machine");
            }
        }
        if (graph[_states.$end] == null) {
            if (graph.end != null) {
                graph[_states.$end] = graph.end;
                delete graph.end;
            }
        }
        // TODO: Do we want a clone operation here?
        machine = {
            graph: {}
        };
        ref = Reflect.ownKeys(graph);
        for(i = 0, len = ref.length; i < len; i++){
            key = ref[i];
            value = graph[key];
            machine.graph[key] = Vertex.make(key, value);
        }
        return machine;
    }
};
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL0BkYXNoa2l0ZS90YWxvcy9zcmMvbWFjaGluZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxhQUFBLEVBQUE7O0FBQUEsT0FBQTtFQUFTLE9BQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQU8sQ0FBQSxRQUFQLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLE1BQVQ7RUFBaUIsSUFBakI7Q0FBQSxNQUFBOztBQUVBLE9BQUEsR0FBVSxRQUFBLENBQUUsQ0FBRixDQUFBO1NBQVMsQ0FBRSxJQUFJLENBQUMsUUFBTCxDQUFjLENBQWQsQ0FBRixDQUFBLElBQXVCLENBQUUsSUFBSSxDQUFDLFFBQUwsQ0FBYyxDQUFkLENBQUY7QUFBaEM7O0FBRVYsYUFBQSxHQUFnQixRQUFBLENBQUUsQ0FBRixDQUFBO0VBQ2QsSUFBRyxPQUFBLENBQVEsQ0FBUixDQUFIO1dBQ0UsUUFBQSxDQUFFLEtBQUYsRUFBUyxLQUFULENBQUE7YUFBb0IsS0FBQSxLQUFTO0lBQTdCLEVBREY7R0FBQSxNQUVLLElBQUcsSUFBSSxDQUFDLFVBQUwsQ0FBZ0IsQ0FBaEIsQ0FBSDtXQUNILEVBREc7R0FBQSxNQUVBLElBQUcsSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFmLENBQUg7V0FDSCxRQUFBLENBQUEsQ0FBQTthQUFHO0lBQUgsRUFERztHQUFBLE1BQUE7SUFHSCxNQUFNLElBQUksS0FBSixDQUFVLHNDQUFWLEVBSEg7O0FBTFM7O0FBVWhCLGFBQUEsR0FBZ0IsUUFBQSxDQUFFLENBQUYsQ0FBQTtFQUNkLElBQUcsT0FBQSxDQUFRLENBQVIsQ0FBSDtXQUNFLFFBQUEsQ0FBRSxLQUFGLEVBQVMsS0FBVCxDQUFBO2FBQW9CLEtBQUssQ0FBQyxLQUFOLEdBQWM7SUFBbEMsRUFERjtHQUFBLE1BRUssSUFBRyxJQUFJLENB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QUY7TUFDYixPQUFPLENBQUMsS0FBSyxDQUFFLEdBQUYsQ0FBYixHQUF1QixNQUFNLENBQUMsSUFBUCxDQUFZLEdBQVosRUFBaUIsS0FBakI7SUFGekI7V0FJQTtFQXZCSTtBQUFOOztBQTBCRixPQUFBO0VBQVMsT0FBVDtFQUFrQixNQUFsQjtFQUEwQixLQUExQjtFQUFpQyxJQUFqQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyaWMgfSBmcm9tIFwiQGRhc2hraXRlL2pveS9nZW5lcmljXCJcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSBcIkBkYXNoa2l0ZS9qb3kvdHlwZVwiXG5pbXBvcnQgeyAkc3RhcnQsICRlbmQgfSBmcm9tIFwiLi9zdGF0ZXNcIlxuXG5pc1N0YXRlID0gKCB4ICkgLT4gKCBUeXBlLmlzU3RyaW5nIHggKSB8fCAoIFR5cGUuaXNTeW1ib2wgeCApXG5cbm5vcm1hbGl6ZVdoZW4gPSAoIHggKSAtPlxuICBpZiBpc1N0YXRlIHhcbiAgICAoIHRhbG9zLCBldmVudCApIC0+IGV2ZW50ID09IGNvbmRpdGlvblxuICBlbHNlIGlmIFR5cGUuaXNGdW5jdGlvbiB4XG4gICAgeFxuICBlbHNlIGlmIFR5cGUuaXNCb29sZWFuIHhcbiAgICAtPiB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIHdoZW4gZGVzY3JpcHRpb25cIlxuXG5ub3JtYWxpemVNb3ZlID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiB0YWxvcy5zdGF0ZSA9IHhcbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvciBcInVuYWJsZSB0byBub3JtYWxpemUgbW92ZSBkZXNjcmlwdGlvblwiXG5cbnByaW9yaXRpemUgPSAoIGZyYW1lcyApIC0+XG4gIGZyYW1lcy5zb3J0ICggYSwgYiApIC0+IFxuICAgIGlmIGEucHJpb3JpdHkgPCBiLnByaW9yaXR5XG4gICAgICAtMVxuICAgIGVsc2UgaWYgYS5wcmlvcml0eSA+IGIucHJpb3JpdHlcbiAgICAgIDFcbiAgICBlbHNlXG4gICAgICAwXG5cblxuRWRnZSA9XG4gIG1ha2U6IGdlbmVyaWMgXG4gICAgbmFtZTogXCJ0YWxvczogbWFrZSBlZGdlXCJcbiAgICBkZWZhdWx0OiAoIGFyZ3MuLi4gKSAtPiBcbiAgICAgIHRocm93IG5ldyBFcnJvciBcInRhbG9zIG1ha2UgZWRnZTogaW5wdXQgaXMgbWFsZm9ybWVkICN7IEpTT04uc3RyaW5naWZ5IGFyZ3MgfVwiXG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIHdoZW46IG5vcm1hbGl6ZVdoZW4gb2JqZWN0LndoZW5cbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmVcblxuZ2VuZXJpYyBFZGdlLm1ha2UsIGlzU3RhdGUsIFR5cGUuaXNBbnksICggbW92ZSwgX3doZW4gKSAtPlxuICBFZGdlLm1ha2UgeyBtb3ZlLCB3aGVuOiBfd2hlbiB9XG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBpc1N0YXRlLCBUeXBlLmlzT2JqZWN0LCAoIG1vdmUsIG9iamVjdCApIC0+XG4gIHdoZW46IG5vcm1hbGl6ZVdoZW4gb2JqZWN0LndoZW5cbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmUgPyBtb3ZlXG5cblxuRWRnZXMgPSBcbiAgbWFrZTogZ2VuZXJpYyBcbiAgICBuYW1lOiBcInRhbG9zOiBtYWtlIGVkZ2VzXCJcbiAgICBkZWZhdWx0OiAoIGFyZ3MuLi4gKSAtPiBcbiAgICAgIHRocm93IG5ldyBFcnJvciBcInRhbG9zIG1ha2UgZWRnZXM6IGlucHV0IGlzIG1hbGZvcm1lZCAjeyBKU09OLnN0cmluZ2lmeSBhcmdzIH1cIlxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIFR5cGUuaXNPYmplY3QsICggb2JqZWN0ICkgLT5cbiAgZnJhbWVzID0gW11cbiAgZGVmYXVsdEZyYW1lID0gbnVsbFxuICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBvYmplY3RcbiAgICB2YWx1ZSA9IG9iamVjdFsga2V5IF1cbiAgICBwcmlvcml0eSA9IHZhbHVlLnByaW9yaXR5ID8gMTAwXG4gICAgaWYga2V5ID09IFwiZGVmYXVsdFwiXG4gICAgICBkZWZhdWx0RnJhbWUgPSB7IGtleSwgdmFsdWUgfVxuICAgIGVsc2VcbiAgICAgIGtleSA9ICRlbmQgaWYga2V5ID09IFwiZW5kXCJcbiAgICAgIGZyYW1lcy5wdXNoIHsga2V5LCB2YWx1ZSwgcHJpb3JpdHkgfVxuXG4gIHByaW9yaXRpemUgZnJhbWVzXG5cbiAgZWRnZXMgPSBbXVxuICBmb3IgeyBrZXksIHZhbHVlIH0gaW4gZnJhbWVzXG4gICAgZWRnZXMucHVzaCBFZGdlLm1ha2Uga2V5LCB2YWx1ZVxuXG4gIGlmIGRlZmF1bHRGcmFtZT9cbiAgICAjIGRlZmF1bHQgaXMgYSBzcGVjaWFsIGNhc2UgZW1waGFzaXppbmcgYW4gYWx3YXlzIHRydWUgXCJ3aGVuXCIgZnVuY3Rpb24uXG4gICAgeyB2YWx1ZSB9ID0gZGVmYXVsdEZyYW1lXG4gICAgaWYgVHlwZS5pc09iamVjdCB2YWx1ZVxuICAgICAgZWRnZXMucHVzaCBFZGdlLm1ha2UgeyB2YWx1ZS4uLiwgd2hlbjogdHJ1ZSB9XG4gICAgZWxzZVxuICAgICAgZWRnZXMucHVzaCBFZGdlLm1ha2Ugd2hlbjogdHJ1ZSwgbW92ZTogdmFsdWVcbiAgXG4gIGVkZ2VzXG4gIFxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIFR5cGUuaXNBcnJheSwgKCBhcnJheSApIC0+XG4gIGZvciBlZGdlIGluIGFycmF5XG4gICAgRWRnZS5tYWtlIGVkZ2VcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzRnVuY3Rpb24sICggZiApIC0+XG4gIGVkZ2UgPSB3aGVuOiB0cnVlLCBydW46IGYsIG1vdmU6ICRlbmRcbiAgWyBFZGdlLm1ha2UgZWRnZSBdXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgaXNTdGF0ZSwgKCBtb3ZlICkgLT5cbiAgRWRnZXMubWFrZSBbIG1vdmUgXTogdHJ1ZVxuXG5cblxuVmVydGV4ID1cbiAgbWFrZTogKCBrZXksIHZhbHVlICkgLT5cbiAgICBuYW1lOiBrZXlcbiAgICBlZGdlczogRWRnZXMubWFrZSB2YWx1ZVxuXG5cbk1hY2hpbmUgPVxuICBtYWtlOiAoIGdyYXBoICkgLT5cbiAgICBpZiAhIFR5cGUuaXNPYmplY3QgZ3JhcGhcbiAgICAgIHRocm93IG5ldyBFcnJvciBcIlRhbG9zIG1hY2hpbmUgcmVwcmVzZW50YXRpb24gaXMgbWFsZm9ybWVkXCJcblxuICAgIGlmICFncmFwaFsgJHN0YXJ0IF0/XG4gICAgICBpZiBncmFwaC5zdGFydD9cbiAgICAgICAgZ3JhcGhbICRzdGFydCBdID0gZ3JhcGguc3RhcnRcbiAgICAgICAgZGVsZXRlIGdyYXBoLnN0YXJ0XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvciBcIm5vIHN0YXJ0IHN0YXRlIGRlZmluZWQgZm9yIHRoaXMgbWFjaGluZVwiXG5cbiAgICBpZiAhZ3JhcGhbICRlbmQgXT9cbiAgICAgIGlmIGdyYXBoLmVuZD9cbiAgICAgICAgZ3JhcGhbICRlbmQgXSA9IGdyYXBoLmVuZFxuICAgICAgICBkZWxldGUgZ3JhcGguZW5kXG5cbiAgICAjIFRPRE86IERvIHdlIHdhbnQgYSBjbG9uZSBvcGVyYXRpb24gaGVyZT9cbiAgICBtYWNoaW5lID0gZ3JhcGg6IHt9XG5cbiAgICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBncmFwaFxuICAgICAgdmFsdWUgPSBncmFwaFsga2V5IF1cbiAgICAgIG1hY2hpbmUuZ3JhcGhbIGtleSBdID0gVmVydGV4Lm1ha2Uga2V5LCB2YWx1ZVxuICAgIFxuICAgIG1hY2hpbmVcblxuXG5leHBvcnQgeyBNYWNoaW5lLCBWZXJ0ZXgsIEVkZ2VzLCBFZGdlIH0iXX0=
 //# sourceURL=/@dashkite/talos/src/machine.coffee

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9AZGFzaGtpdGUvdGFsb3Mvc3JjL21hY2hpbmUuY29mZmVlIiwiPGFub24+Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyaWMgfSBmcm9tIFwiQGRhc2hraXRlL2pveS9nZW5lcmljXCJcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSBcIkBkYXNoa2l0ZS9qb3kvdHlwZVwiXG5pbXBvcnQgeyAkc3RhcnQsICRlbmQgfSBmcm9tIFwiLi9zdGF0ZXNcIlxuXG5pc1N0YXRlID0gKCB4ICkgLT4gKCBUeXBlLmlzU3RyaW5nIHggKSB8fCAoIFR5cGUuaXNTeW1ib2wgeCApXG5cbm5vcm1hbGl6ZVdoZW4gPSAoIHggKSAtPlxuICBpZiBpc1N0YXRlIHhcbiAgICAoIHRhbG9zLCBldmVudCApIC0+IGV2ZW50ID09IGNvbmRpdGlvblxuICBlbHNlIGlmIFR5cGUuaXNGdW5jdGlvbiB4XG4gICAgeFxuICBlbHNlIGlmIFR5cGUuaXNCb29sZWFuIHhcbiAgICAtPiB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIHdoZW4gZGVzY3JpcHRpb25cIlxuXG5ub3JtYWxpemVNb3ZlID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiB0YWxvcy5zdGF0ZSA9IHhcbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvciBcInVuYWJsZSB0byBub3JtYWxpemUgbW92ZSBkZXNjcmlwdGlvblwiXG5cbnByaW9yaXRpemUgPSAoIGZyYW1lcyApIC0+XG4gIGZyYW1lcy5zb3J0ICggYSwgYiApIC0+IFxuICAgIGlmIGEucHJpb3JpdHkgPCBiLnByaW9yaXR5XG4gICAgICAtMVxuICAgIGVsc2UgaWYgYS5wcmlvcml0eSA+IGIucHJpb3JpdHlcbiAgICAgIDFcbiAgICBlbHNlXG4gICAgICAwXG5cblxuRWRnZSA9XG4gIG1ha2U6IGdlbmVyaWMgXG4gICAgbmFtZTogXCJ0YWxvczogbWFrZSBlZGdlXCJcbiAgICBkZWZhdWx0OiAoIGFyZ3MuLi4gKSAtPiBcbiAgICAgIHRocm93IG5ldyBFcnJvciBcInRhbG9zIG1ha2UgZWRnZTogaW5wdXQgaXMgbWFsZm9ybWVkICN7IEpTT04uc3RyaW5naWZ5IGFyZ3MgfVwiXG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIHdoZW46IG5vcm1hbGl6ZVdoZW4gb2JqZWN0LndoZW5cbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmVcblxuZ2VuZXJpYyBFZGdlLm1ha2UsIGlzU3RhdGUsIFR5cGUuaXNBbnksICggbW92ZSwgX3doZW4gKSAtPlxuICBFZGdlLm1ha2UgeyBtb3ZlLCB3aGVuOiBfd2hlbiB9XG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBpc1N0YXRlLCBUeXBlLmlzT2JqZWN0LCAoIG1vdmUsIG9iamVjdCApIC0+XG4gIHdoZW46IG5vcm1hbGl6ZVdoZW4gb2JqZWN0LndoZW5cbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmUgPyBtb3ZlXG5cblxuRWRnZXMgPSBcbiAgbWFrZTogZ2VuZXJpYyBcbiAgICBuYW1lOiBcInRhbG9zOiBtYWtlIGVkZ2VzXCJcbiAgICBkZWZhdWx0OiAoIGFyZ3MuLi4gKSAtPiBcbiAgICAgIHRocm93IG5ldyBFcnJvciBcInRhbG9zIG1ha2UgZWRnZXM6IGlucHV0IGlzIG1hbGZvcm1lZCAjeyBKU09OLnN0cmluZ2lmeSBhcmdzIH1cIlxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIFR5cGUuaXNPYmplY3QsICggb2JqZWN0ICkgLT5cbiAgZnJhbWVzID0gW11cbiAgZGVmYXVsdEZyYW1lID0gbnVsbFxuICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBvYmplY3RcbiAgICB2YWx1ZSA9IG9iamVjdFsga2V5IF1cbiAgICBwcmlvcml0eSA9IHZhbHVlLnByaW9yaXR5ID8gMTAwXG4gICAgaWYga2V5ID09IFwiZGVmYXVsdFwiXG4gICAgICBkZWZhdWx0RnJhbWUgPSB7IGtleSwgdmFsdWUgfVxuICAgIGVsc2VcbiAgICAgIGtleSA9ICRlbmQgaWYga2V5ID09IFwiZW5kXCJcbiAgICAgIGZyYW1lcy5wdXNoIHsga2V5LCB2YWx1ZSwgcHJpb3JpdHkgfVxuXG4gIHByaW9yaXRpemUgZnJhbWVzXG5cbiAgZWRnZXMgPSBbXVxuICBmb3IgeyBrZXksIHZhbHVlIH0gaW4gZnJhbWVzXG4gICAgZWRnZXMucHVzaCBFZGdlLm1ha2Uga2V5LCB2YWx1ZVxuXG4gIGlmIGRlZmF1bHRGcmFtZT9cbiAgICAjIGRlZmF1bHQgaXMgYSBzcGVjaWFsIGNhc2UgZW1waGFzaXppbmcgYW4gYWx3YXlzIHRydWUgXCJ3aGVuXCIgZnVuY3Rpb24uXG4gICAgeyB2YWx1ZSB9ID0gZGVmYXVsdEZyYW1lXG4gICAgaWYgVHlwZS5pc09iamVjdCB2YWx1ZVxuICAgICAgZWRnZXMucHVzaCBFZGdlLm1ha2UgeyB2YWx1ZS4uLiwgd2hlbjogdHJ1ZSB9XG4gICAgZWxzZVxuICAgICAgZWRnZXMucHVzaCBFZGdlLm1ha2Ugd2hlbjogdHJ1ZSwgbW92ZTogdmFsdWVcbiAgXG4gIGVkZ2VzXG4gIFxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIFR5cGUuaXNBcnJheSwgKCBhcnJheSApIC0+XG4gIGZvciBlZGdlIGluIGFycmF5XG4gICAgRWRnZS5tYWtlIGVkZ2VcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzRnVuY3Rpb24sICggZiApIC0+XG4gIGVkZ2UgPSB3aGVuOiB0cnVlLCBydW46IGYsIG1vdmU6ICRlbmRcbiAgWyBFZGdlLm1ha2UgZWRnZSBdXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgaXNTdGF0ZSwgKCBtb3ZlICkgLT5cbiAgRWRnZXMubWFrZSBbIG1vdmUgXTogdHJ1ZVxuXG5cblxuVmVydGV4ID1cbiAgbWFrZTogKCBrZXksIHZhbHVlICkgLT5cbiAgICBuYW1lOiBrZXlcbiAgICBlZGdlczogRWRnZXMubWFrZSB2YWx1ZVxuXG5cbk1hY2hpbmUgPVxuICBtYWtlOiAoIGdyYXBoICkgLT5cbiAgICBpZiAhIFR5cGUuaXNPYmplY3QgZ3JhcGhcbiAgICAgIHRocm93IG5ldyBFcnJvciBcIlRhbG9zIG1hY2hpbmUgcmVwcmVzZW50YXRpb24gaXMgbWFsZm9ybWVkXCJcblxuICAgIGlmICFncmFwaFsgJHN0YXJ0IF0/XG4gICAgICBpZiBncmFwaC5zdGFydD9cbiAgICAgICAgZ3JhcGhbICRzdGFydCBdID0gZ3JhcGguc3RhcnRcbiAgICAgICAgZGVsZXRlIGdyYXBoLnN0YXJ0XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvciBcIm5vIHN0YXJ0IHN0YXRlIGRlZmluZWQgZm9yIHRoaXMgbWFjaGluZVwiXG5cbiAgICBpZiAhZ3JhcGhbICRlbmQgXT9cbiAgICAgIGlmIGdyYXBoLmVuZD9cbiAgICAgICAgZ3JhcGhbICRlbmQgXSA9IGdyYXBoLmVuZFxuICAgICAgICBkZWxldGUgZ3JhcGguZW5kXG5cbiAgICAjIFRPRE86IERvIHdlIHdhbnQgYSBjbG9uZSBvcGVyYXRpb24gaGVyZT9cbiAgICBtYWNoaW5lID0gZ3JhcGg6IHt9XG5cbiAgICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBncmFwaFxuICAgICAgdmFsdWUgPSBncmFwaFsga2V5IF1cbiAgICAgIG1hY2hpbmUuZ3JhcGhbIGtleSBdID0gVmVydGV4Lm1ha2Uga2V5LCB2YWx1ZVxuICAgIFxuICAgIG1hY2hpbmVcblxuXG5leHBvcnQgeyBNYWNoaW5lLCBWZXJ0ZXgsIEVkZ2VzLCBFZGdlIH0iLG51bGxdLCJuYW1lcyI6WyJNYWNoaW5lIiwiVmVydGV4IiwiRWRnZXMiLCJFZGdlIiwiaXNTdGF0ZSIsIm5vcm1hbGl6ZU1vdmUiLCJub3JtYWxpemVXaGVuIiwicHJpb3JpdGl6ZSIsIngiLCJUeXBlIiwiaXNTdHJpbmciLCJpc1N5bWJvbCIsInRhbG9zIiwiZXZlbnQiLCJjb25kaXRpb24iLCJpc0Z1bmN0aW9uIiwiaXNCb29sZWFuIiwiRXJyb3IiLCJzdGF0ZSIsImZyYW1lcyIsInNvcnQiLCJhIiwiYiIsInByaW9yaXR5IiwibWFrZSIsImdlbmVyaWMiLCJuYW1lIiwiZGVmYXVsdCIsImFyZ3MiLCJKU09OIiwic3RyaW5naWZ5IiwiaXNPYmplY3QiLCJvYmplY3QiLCJ3aGVuIiwicnVuIiwibW92ZSIsImlzQW55IiwiX3doZW4iLCJyZWYiLCJkZWZhdWx0RnJhbWUiLCJlZGdlcyIsImkiLCJqIiwia2V5IiwibGVuIiwibGVuMSIsInJlZjEiLCJ2YWx1ZSIsIlJlZmxlY3QiLCJvd25LZXlzIiwibGVuZ3RoIiwiJGVuZCIsInB1c2giLCJpc0FycmF5IiwiYXJyYXkiLCJlZGdlIiwicmVzdWx0cyIsImYiLCJncmFwaCIsIm1hY2hpbmUiLCIkc3RhcnQiLCJzdGFydCIsImVuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7SUF1SVNBLE9BQVQ7ZUFBU0E7O0lBQVNDLE1BQWxCO2VBQWtCQTs7SUFBUUMsS0FBMUI7ZUFBMEJBOztJQUFPQyxJQUFqQztlQUFpQ0E7Ozt5QkF2SWpDOzhEQUNBO3dCQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRkEsSUFBQUEsTUFBQUQsT0FBQUYsU0FBQUMsUUFBQUcsU0FBQUMsZUFBQUMsZUFBQUM7QUFJQUgsVUFBVSxTQUFFSSxDQUFGO1dBQVMsQUFBRUMsTUFBS0MsUUFBTCxDQUFjRixNQUFTQyxNQUFLRSxRQUFMLENBQWNIO0FBQWhEO0FBRVZGLGdCQUFnQixTQUFFRSxDQUFGO0lBQ2QsSUFBR0osUUFBUUksSUFBWDtlQUNFLFNBQUVJLEtBQUYsRUFBU0MsS0FBVDttQkFBb0JBLFVBQVNDO1FBQTdCO1dBQ0csSUFBR0wsTUFBS00sVUFBTCxDQUFnQlAsSUFBbkI7ZUFDSEE7V0FDRyxJQUFHQyxNQUFLTyxTQUFMLENBQWVSLElBQWxCO2VBQ0g7bUJBQUdBO1FBQUg7V0FERztRQUdILE1BQU0sSUFBSVMsTUFBTTs7QUFSSjtBQVVoQlosZ0JBQWdCLFNBQUVHLENBQUY7SUFDZCxJQUFHSixRQUFRSSxJQUFYO2VBQ0UsU0FBRUksS0FBRixFQUFTQyxLQUFUO21CQUFvQkQsTUFBTU0sS0FBTixHQUFjVjtRQUFsQztXQUNHLElBQUdDLE1BQUtNLFVBQUwsQ0FBZ0JQLElBQW5CO2VBQ0hBO1dBREc7UUFHSCxNQUFNLElBQUlTLE1BQU07O0FBTko7QUFRaEJWLGFBQWEsU0FBRVksTUFBRjtXQUNYQSxPQUFPQyxJQUFQLENBQVksU0FBRUMsQ0FBRixFQUFLQyxDQUFMO1FBQ1YsSUFBR0QsRUFBRUUsUUFBRixHQUFhRCxFQUFFQyxRQUFsQixFQUFBO21CQUNFLENBQUM7ZUFDRSxJQUFHRixFQUFFRSxRQUFGLEdBQWFELEVBQUVDLFFBQWxCLEVBQUE7bUJBQ0g7ZUFERzttQkFHSDs7SUFOUTtBQUREO0FBVWJwQixPQUNFO0lBQUFxQixNQUFNQyxJQUFBQSxnQkFBQSxFQUNKO1FBQUFDLE1BQU07UUFDTkMsU0FBUyxTQUFBLEdBQUVDLElBQUY7WUFDUCxNQUFNLElBQUlYLE1BQU0sQ0FBQSxvQ0FBQSxFQUF3Q1ksS0FBS0MsU0FBTCxDQUFlRixNQUF2RCxDQUFWO1FBREM7SUFEVDtBQURGO0FBS0ZILElBQUFBLGdCQUFBLEVBQVF0QixLQUFLcUIsSUFBYixFQUFtQmYsTUFBS3NCLFFBQXhCLEVBQWtDLFNBQUVDLE1BQUY7V0FDaEM7UUFBQUMsTUFBTTNCLGNBQWMwQixPQUFPQyxJQUFyQjtRQUNOQyxLQUFLRixPQUFPRSxHQURaO1FBRUFDLE1BQU05QixjQUFjMkIsT0FBT0csSUFBckI7SUFGTjtBQURnQztBQUtsQ1YsSUFBQUEsZ0JBQUEsRUFBUXRCLEtBQUtxQixJQUFiLEVBQW1CcEIsU0FBU0ssTUFBSzJCLEtBQWpDLEVBQXdDLFNBQUVELElBQUYsRUFBUUUsS0FBUjtXQUN0Q2xDLEtBQUtxQixJQUFMLENBQVU7UUFBRVc7UUFBTUYsTUFBTUk7SUFBZDtBQUQ0QjtBQUd4Q1osSUFBQUEsZ0JBQUEsRUFBUXRCLEtBQUtxQixJQUFiLEVBQW1CcEIsU0FBU0ssTUFBS3NCLFFBQWpDLEVBQTJDLFNBQUVJLElBQUYsRUFBUUgsTUFBUjtJQUMzQyxJQUFBTTtXQUFFO1FBQUFMLE1BQU0zQixjQUFjMEIsT0FBT0MsSUFBckI7UUFDTkMsS0FBS0YsT0FBT0UsR0FEWjtRQUVBQyxNQUFNOUIsY0FBQSxBQUFBaUMsQ0FBQUEsTUFBQU4sT0FBQUcsSUFBQSxLQUFBLE9BQUFHLE1BQTRCSDtJQUZsQztBQUR5QztBQU0zQ2pDLFFBQ0U7SUFBQXNCLE1BQU1DLElBQUFBLGdCQUFBLEVBQ0o7UUFBQUMsTUFBTTtRQUNOQyxTQUFTLFNBQUEsR0FBRUMsSUFBRjtZQUNQLE1BQU0sSUFBSVgsTUFBTSxDQUFBLHFDQUFBLEVBQXlDWSxLQUFLQyxTQUFMLENBQWVGLE1BQXhELENBQVY7UUFEQztJQURUO0FBREY7QUFLRkgsSUFBQUEsZ0JBQUEsRUFBUXZCLE1BQU1zQixJQUFkLEVBQW9CZixNQUFLc0IsUUFBekIsRUFBbUMsU0FBRUMsTUFBRjtJQUNuQyxJQUFBTyxjQUFBQyxPQUFBckIsUUFBQXNCLEdBQUFDLEdBQUFDLEtBQUFDLEtBQUFDLE1BQUF0QixVQUFBZSxLQUFBUSxNQUFBQztJQUFFNUIsU0FBUyxFQUFBO0lBQ1RvQixlQUFlO0lBQ2ZELE1BQUFVLFFBQUFDLE9BQUEsQ0FBQWpCO0lBQUEsSUFBQVMsSUFBQSxHQUFBRyxNQUFBTixJQUFBWSxNQUFBLEVBQUFULElBQUFHLEtBQUFILElBQUE7O1FBQ0VNLFFBQVFmLE1BQU0sQ0FBRVcsSUFBRjtRQUNkcEIsV0FBQSxBQUFBdUIsQ0FBQUEsT0FBQUMsTUFBQXhCLFFBQUEsS0FBQSxPQUFBdUIsT0FBNEI7UUFDNUIsSUFBR0gsUUFBTyxXQUFWO1lBQ0VKLGVBQWU7Z0JBQUVJO2dCQUFLSTtZQUFQO2VBRGpCO1lBR0UsSUFBY0osUUFBTyxPQUFyQjtnQkFBQUEsTUFBTVEsWUFBQTs7WUFDTmhDLE9BQU9pQyxJQUFQLENBQVk7Z0JBQUVUO2dCQUFLSTtnQkFBT3hCO1lBQWQ7O0lBUGhCO0lBU0FoQixXQUFXWTtJQUVYcUIsUUFBUSxFQUFBO0lBQ1IsSUFBQUUsSUFBQSxHQUFBRyxPQUFBMUIsT0FBQStCLE1BQUEsRUFBQVIsSUFBQUcsTUFBQUgsSUFBQTtRQUFJLENBQUEsRUFBRUMsR0FBRixFQUFPSSxLQUFQLEVBQUEsR0FBQTVCLE1BQUEsQ0FBQXVCLEVBQUE7UUFDRkYsTUFBTVksSUFBTixDQUFXakQsS0FBS3FCLElBQUwsQ0FBVW1CLEtBQUtJO0lBRDVCO0lBR0EsSUFBR1IsZ0JBQUEsTUFBSDs7UUFFRSxDQUFBLEVBQUVRLEtBQUYsRUFBQSxHQUFZUixZQUFBO1FBQ1osSUFBRzlCLE1BQUtzQixRQUFMLENBQWNnQixRQUFqQjtZQUNFUCxNQUFNWSxJQUFOLENBQVdqRCxLQUFLcUIsSUFBTCxDQUFVO2dCQUFFLEdBQUF1QixLQUFGO2dCQUFZZCxNQUFNO1lBQWxCO2VBRHZCO1lBR0VPLE1BQU1ZLElBQU4sQ0FBV2pELEtBQUtxQixJQUFMLENBQVU7Z0JBQUFTLE1BQU07Z0JBQU1FLE1BQU1ZO1lBQWxCOzs7V0FFekJQO0FBMUJpQztBQTZCbkNmLElBQUFBLGdCQUFBLEVBQVF2QixNQUFNc0IsSUFBZCxFQUFvQmYsTUFBSzRDLE9BQXpCLEVBQWtDLFNBQUVDLEtBQUY7SUFDbEMsSUFBQUMsTUFBQWQsR0FBQUcsS0FBQVk7SUFBRUEsVUFBQSxFQUFBO0lBQUEsSUFBQWYsSUFBQSxHQUFBRyxNQUFBVSxNQUFBSixNQUFBLEVBQUFULElBQUFHLEtBQUFILElBQUE7O3FCQUNFdEMsS0FBS3FCLElBQUwsQ0FBVStCO0lBRFo7O0FBRGdDO0FBSWxDOUIsSUFBQUEsZ0JBQUEsRUFBUXZCLE1BQU1zQixJQUFkLEVBQW9CZixNQUFLTSxVQUF6QixFQUFxQyxTQUFFMEMsQ0FBRjtJQUNyQyxJQUFBRjtJQUFFQSxPQUFPO1FBQUF0QixNQUFNO1FBQU1DLEtBQUt1QjtRQUFHdEIsTUFBTWdCLFlBQUE7SUFBMUI7V0FDUDtRQUFFaEQsS0FBS3FCLElBQUwsQ0FBVStCO0tBQVo7QUFGbUM7QUFJckM5QixJQUFBQSxnQkFBQSxFQUFRdkIsTUFBTXNCLElBQWQsRUFBb0JwQixTQUFTLFNBQUUrQixJQUFGO1dBQzNCakMsTUFBTXNCLElBQU4sQ0FBVztRQUFBLENBQUVXLEtBQUYsRUFBVTtJQUFWO0FBRGdCO0FBSzdCbEMsU0FDRTtJQUFBdUIsTUFBTSxTQUFFbUIsR0FBRixFQUFPSSxLQUFQO2VBQ0o7WUFBQXJCLE1BQU1pQjtZQUNOSCxPQUFPdEMsTUFBTXNCLElBQU4sQ0FBV3VCO1FBRGxCO0lBREk7QUFBTjtBQUtGL0MsVUFDRTtJQUFBd0IsTUFBTSxTQUFFa0MsS0FBRjtRQUNSLElBQUFqQixHQUFBRSxLQUFBQyxLQUFBZSxTQUFBckIsS0FBQVM7UUFBSSxJQUFHLENBQUV0QyxNQUFLc0IsUUFBTCxDQUFjMkIsUUFBbkI7WUFDRSxNQUFNLElBQUl6QyxNQUFNOztRQUVsQixJQUFJeUMsS0FBQSxDQUFBRSxjQUFBLENBQUEsSUFBQSxNQUFKO1lBQ0UsSUFBR0YsTUFBQUcsS0FBQSxJQUFBLE1BQUg7Z0JBQ0VILEtBQUssQ0FBRUUsY0FBRixDQUFMLEdBQWtCRixNQUFNRyxLQUFBO2dCQUN4QixPQUFPSCxNQUFNRyxLQUFBO21CQUZmO2dCQUlFLE1BQU0sSUFBSTVDLE1BQU07OztRQUVwQixJQUFJeUMsS0FBQSxDQUFBUCxZQUFBLENBQUEsSUFBQSxNQUFKO1lBQ0UsSUFBR08sTUFBQUksR0FBQSxJQUFBLE1BQUg7Z0JBQ0VKLEtBQUssQ0FBRVAsWUFBRixDQUFMLEdBQWdCTyxNQUFNSSxHQUFBO2dCQUN0QixPQUFPSixNQUFNSSxHQUFBOzs7O1FBR2pCSCxVQUFVO1lBQUFELE9BQU8sQ0FBQTtRQUFQO1FBRVZwQixNQUFBVSxRQUFBQyxPQUFBLENBQUFTO1FBQUEsSUFBQWpCLElBQUEsR0FBQUcsTUFBQU4sSUFBQVksTUFBQSxFQUFBVCxJQUFBRyxLQUFBSCxJQUFBOztZQUNFTSxRQUFRVyxLQUFLLENBQUVmLElBQUY7WUFDYmdCLFFBQVFELEtBQUssQ0FBRWYsSUFBZixHQUF1QjFDLE9BQU91QixJQUFQLENBQVltQixLQUFLSTtRQUYxQztlQUlBWTtJQXZCSTtBQUFOIn0=