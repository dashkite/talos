var Edge, Edges, Machine, Vertex, areVertexEdges, isState, normalizeMove, normalizeWhen, prioritize;
import { generic } from "@dashkite/joy/generic";
import * as Type from "@dashkite/joy/type";
import { $start, $end } from "./states";
isState = function(x) {
    return Type.isString(x) || Type.isSymbol(x);
};
areVertexEdges = function(x) {
    var edge, j, len, ref;
    if (x.edges == null) {
        return false;
    }
    if (!Type.isArray(x.edges)) {
        return false;
    }
    ref = x.edges;
    for(j = 0, len = ref.length; j < len; j++){
        edge = ref[j];
        if (!Type.isObject(edge)) {
            return false;
        }
    }
    return true;
};
normalizeWhen = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return event === condition;
        };
    } else if (Type.isFunction(x)) {
        return x;
    } else if (Type.isBoolean(x)) {
        return function() {
            return x;
        };
    } else {
        throw new Error("unable to normalize when description");
    }
};
normalizeMove = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return talos.state = x;
        };
    } else if (Type.isFunction(x)) {
        return x;
    } else {
        throw new Error("unable to normalize move description");
    }
};
prioritize = function(frames) {
    return frames.sort(function(a, b) {
        if (a.priority < b.priority) {
            return -1;
        } else if (a.priority > b.priority) {
            return 1;
        } else {
            return 0;
        }
    });
};
Edge = {
    make: generic({
        name: "talos: edge make"
    })
};
generic(Edge.make, Type.isObject, function(object) {
    return {
        when: normalizeWhen(object.when),
        run: object.run,
        move: normalizeMove(object.move)
    };
});
generic(Edge.make, isState, Type.isAny, function(move, _when) {
    return Edge.make({
        move,
        when: _when
    });
});
generic(Edge.make, isState, Type.isObject, function(move, object) {
    var ref, ref1;
    return {
        when: normalizeWhen((ref = object.when) != null ? ref : true),
        run: object.run,
        move: normalizeMove((ref1 = object.move) != null ? ref1 : move)
    };
});
Edges = {
    make: generic({
        name: "talos: edges make"
    })
};
generic(Edges.make, Type.isObject, function(object) {
    var defaultFrame, edges, frames, j, k, key, len, len1, priority, ref, ref1, value;
    frames = [];
    defaultFrame = null;
    ref = Reflect.ownKeys(object);
    for(j = 0, len = ref.length; j < len; j++){
        key = ref[j];
        value = object[key];
        priority = (ref1 = value.priority) != null ? ref1 : 100;
        if (key === "default") {
            defaultFrame = {
                key,
                value
            };
        } else {
            if (key === "end") {
                key = $end;
            }
            frames.push({
                key,
                value,
                priority
            });
        }
    }
    prioritize(frames);
    edges = [];
    for(k = 0, len1 = frames.length; k < len1; k++){
        ({ key, value } = frames[k]);
        edges.push(Edge.make(key, value));
    }
    if (defaultFrame != null) {
        // default is a special case emphasizing an always true "when" function.
        ({ value } = defaultFrame);
        if (Type.isObject(value)) {
            edges.push(Edge.make({
                ...value,
                when: true
            }));
        } else {
            edges.push(Edge.make({
                when: true,
                move: value
            }));
        }
    }
    return edges;
});
generic(Edges.make, Type.isArray, function(array) {
    var edge, j, len, results;
    results = [];
    for(j = 0, len = array.length; j < len; j++){
        edge = array[j];
        results.push(Edge.make(edge));
    }
    return results;
});
generic(Edges.make, Type.isFunction, function(f) {
    var edge;
    edge = {
        when: true,
        run: f,
        move: $end
    };
    return [
        Edge.make(edge)
    ];
});
generic(Edges.make, isState, function(move) {
    return Edges.make({
        [move]: true
    });
});
generic(Edges.make, areVertexEdges, function(param) {
    let { edges } = param;
    var edge, j, len, results;
    results = [];
    for(j = 0, len = edges.length; j < len; j++){
        edge = edges[j];
        results.push({
            when: edge.when,
            run: edge.run,
            move: edge.move
        });
    }
    return results;
});
Vertex = {
    make: function(key, value) {
        return {
            name: key,
            edges: Edges.make(value)
        };
    }
};
Machine = {
    make: function(value) {
        var _graph, j, key, len, machine, ref;
        _graph = Machine.format(value);
        machine = {
            graph: {}
        };
        ref = Reflect.ownKeys(_graph);
        for(j = 0, len = ref.length; j < len; j++){
            key = ref[j];
            value = _graph[key];
            machine.graph[key] = Vertex.make(key, value);
        }
        return machine;
    },
    format: function(value) {
        var _value, graph, j, key, len, ref;
        if (Type.isObject(value)) {
            graph = {};
            _value = value.graph != null ? value.graph : value;
            ref = Reflect.ownKeys(_value);
            for(j = 0, len = ref.length; j < len; j++){
                key = ref[j];
                graph[key] = _value[key];
            }
        } else if (Type.isArray(value)) {
            graph = Machine.expand(value);
        } else {
            throw new Error("Talos machine representation is malformed");
        }
        if (graph[$start] == null) {
            if (graph.start != null) {
                graph[$start] = graph.start;
                delete graph.start;
            } else {
                throw new Error("no start state defined for this machine");
            }
        }
        if (graph[$end] == null) {
            if (graph.end != null) {
                graph[$end] = graph.end;
                delete graph.end;
            }
        }
        return graph;
    },
    expand: function(fx) {
        var cache, current, f, getName, graph, i, j, k, len, len1, names, next, ref;
        for(j = 0, len = fx.length; j < len; j++){
            f = fx[j];
            if (f == null) {
                throw new Error("undefined item in function composition array");
            }
        }
        if (fx.length === 0) {
            return {
                [$start]: {
                    end: {
                        when: true,
                        next: $end
                    }
                }
            };
        }
        names = {};
        getName = function(f) {
            var name;
            name = f.name || "anonymous";
            if (names[name] != null) {
                return `${name}-${++names[name]}`;
            } else {
                names[name] = 1;
                return name;
            }
        };
        graph = {};
        cache = {};
        for(i = k = 0, len1 = fx.length; k < len1; i = ++k){
            f = fx[i];
            current = (ref = cache.current) != null ? ref : getName(f);
            if (i === 0) {
                cache.startName = current;
            }
            if (i === fx.length - 1) {
                next = $end;
            } else {
                next = getName(fx[i + 1]);
            }
            graph[current] = {
                next: {
                    when: true,
                    run: f,
                    move: next
                }
            };
            cache.current = next;
        }
        graph[$start] = {
            next: {
                when: true,
                move: cache.startName
            }
        };
        return graph;
    }
};
export { Machine, Vertex, Edges, Edge }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL21hY2hpbmUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLGNBQUEsRUFBQSxPQUFBLEVBQUEsYUFBQSxFQUFBLGFBQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVMsT0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxDQUFBLFFBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtFQUFpQixJQUFqQjtDQUFBLE1BQUE7O0FBRUEsT0FBQSxHQUFVLFFBQUEsQ0FBRSxDQUFGLENBQUE7U0FBUyxDQUFFLElBQUksQ0FBQyxRQUFMLENBQWMsQ0FBZCxDQUFGLENBQUEsSUFBdUIsQ0FBRSxJQUFJLENBQUMsUUFBTCxDQUFjLENBQWQsQ0FBRjtBQUFoQzs7QUFDVixjQUFBLEdBQWlCLFFBQUEsQ0FBRSxDQUFGLENBQUE7QUFDakIsTUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFFLElBQWlCLGVBQWpCO0FBQUEsV0FBTyxNQUFQOztFQUNBLElBQWdCLENBQUMsSUFBSSxDQUFDLE9BQUwsQ0FBYSxDQUFDLENBQUMsS0FBZixDQUFqQjtBQUFBLFdBQU8sTUFBUDs7QUFDQTtFQUFBLEtBQUEscUNBQUE7O1FBQXlCLENBQUMsSUFBSSxDQUFDLFFBQUwsQ0FBYyxJQUFkO0FBQ3hCLGFBQU87O0VBRFQ7U0FFQTtBQUxlOztBQVFqQixhQUFBLEdBQWdCLFFBQUEsQ0FBRSxDQUFGLENBQUE7RUFDZCxJQUFHLE9BQUEsQ0FBUSxDQUFSLENBQUg7V0FDRSxRQUFBLENBQUUsS0FBRixFQUFTLEtBQVQsQ0FBQTthQUFvQixLQUFBLEtBQVM7SUFBN0IsRUFERjtHQUFBLE1BRUssSUFBRyxJQUFJLENBQUMsVUFBTCxDQUFnQixDQUFoQixDQUFIO1dBQ0gsRUFERztHQUFBLE1BRUEsSUFBRyxJQUFJLENBQUMsU0FBTCxDQUFlLENBQWYsQ0FBSDtXQUNILFFBQUEsQ0FBQSxDQUFBO2FBQUc7SUFBSCxFQURHO0dBQUEsTUFBQTtJQUdILE1BQU0sSUFBSSxLQUFKLENBQVUsc0NBQVYsRUFISDs7QUFMUzs7QUFVaEIsYUFBQSxHQUFnQixRQUFBLENBQUUsQ0FBRixDQUFBO0VBQ2QsSUFBRyxPQUFBLENBQVEsQ0FBUixDQUFIO1dBQ0UsUUFBQSxDQUFFLEtBQUYsRUFBUyxLQUFULENBQUE7YUFBb0IsS0FBSyxDQUFDLEtBQU4sR0FBYztJQUFsQyxFQURGO0dBQUEsTUFFSyxJQUFHLElBQUksQ0FBQyxVQUFMLENBQWdCLENBQWhCLENBQUg7V0FDSCxFQURHO0dBQUEsTUFBQTtJQUdILE1BQU0sSUFBSSxLQUFKLENBQVUsc0NBQVYsRUFISDs7QUFIUzs7QUFRaEIsVUFBQSxHQUFhLFFBQUEsQ0FBRSxNQUFGLENBQUE7U0FDWCxNQUFNLENBQUMsSUFBUCxDQUFZLFFBQUEsQ0FBRSxDQUFGLEVBQUssQ0FBTCxDQUFBO0lBQ1YsSUFBRyxDQUFDLENBQUMsUUFBRixHQUFhLENBQUMsQ0FBQyxRQUFsQjthQUNFLENBQUMsRUFESDtLQUFBLE1BRUssSUFBRyxDQUFDLENBQUMsUUFBRixHQUFhLENBQUMsQ0FBQyxRQUFsQjthQUNILEVBREc7S0FBQSxNQUFBO2FBR0gsRUFIRzs7RUFISyxDQUFaO0FBRFc7O0FBVWIsSUFBQSxHQUNFO0VBQUEsSUFBQSxFQUFNLE9BQUEsQ0FBUTtJQUFBLElBQUEsRUFBTTtFQUFOLENBQVI7QUFBTjs7QUFFRixPQUFBLENBQVEsSUFBSSxDQUFDLElBQWIsRUFBbUIsSUFBSSxDQUFDLFFBQXhCLEVBQWtDLFFBQUEsQ0FBRSxNQUFGLENBQUE7U0FDaEM7SUFBQSxJQUFBLEVBQU0sYUFBQSxDQUFjLE1BQU0sQ0FBQyxJQUFyQixDQUFOO0lBQ0EsR0FBQSxFQUFLLE1BQU0sQ0FBQyxHQURaO0lBRUEsSUFBQSxFQUFNLGFBQUEsQ0FBYyxNQUFNLENBQUMsSUFBckI7RUFGTjtBQURnQyxDQUFsQzs7QUFLQSxPQUFBLENBQVEsSUFBSSxDQUFDLElBQWIsRUFBbUIsT0FBbkIsRUFBNEIsSUFBSSxDQUFDLEtBQWpDLEVBQXdDLFFBQUEsQ0FBRSxJQUFGLEVBQVEsS0FBUixDQUFBO1NBQ3RDLElBQUksQ0FBQyxJQUFMLENBQVU7SUFBRSxJQUFGO0lBQVEsSUFBQSxFQUFNO0VBQWQsQ0FBVjtBQURzQyxDQUF4Qzs7QUFHQSxPQUFBLENBQVEsSUFBSSxDQUFDLElBQWIsRUFBbUIsT0FBbkIsRUFBNEIsSUFBSSxDQUFDLFFBQWpDLEVBQTJDLFFBQUEsQ0FBRSxJQUFGLEVBQVEsTUFBUixDQUFBO0FBQzNDLE1BQUEsR0FBQSxFQUFBO1NBQUU7SUFBQSxJQUFBLEVBQU0sYUFBQSxxQ0FBNEIsSUFBNUIsQ0FBTjtJQUNBLEdBQUEsRUFBSyxNQUFNLENBQUMsR0FEWjtJQUVBLElBQUEsRUFBTSxhQUFBLHVDQUE0QixJQUE1QjtFQUZOO0FBRHlDLENBQTNDOztBQU1BLEtBQUEsR0FDRTtFQUFBLElBQUEsRUFBTSxPQUFBLENBQVE7SUFBQSxJQUFBLEVBQU07RUFBTixDQUFSO0FBQU47O0FBRUYsT0FBQSxDQUFRLEtBQUssQ0FBQyxJQUFkLEVBQW9CLElBQUksQ0FBQyxRQUF6QixFQUFtQyxRQUFBLENBQUUsTUFBRixDQUFBO0FBQ25DLE1BQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQTtFQUFFLE1BQUEsR0FBUztFQUNULFlBQUEsR0FBZTtBQUNmO0VBQUEsS0FBQSxxQ0FBQTs7SUFDRSxLQUFBLEdBQVEsTUFBTSxDQUFFLEdBQUY7SUFDZCxRQUFBLDRDQUE0QjtJQUM1QixJQUFHLEdBQUEsS0FBTyxTQUFWO01BQ0UsWUFBQSxHQUFlLENBQUUsR0FBRixFQUFPLEtBQVAsRUFEakI7S0FBQSxNQUFBO01BR0UsSUFBYyxHQUFBLEtBQU8sS0FBckI7UUFBQSxHQUFBLEdBQU0sS0FBTjs7TUFDQSxNQUFNLENBQUMsSUFBUCxDQUFZLENBQUUsR0FBRixFQUFPLEtBQVAsRUFBYyxRQUFkLENBQVosRUFKRjs7RUFIRjtFQVNBLFVBQUEsQ0FBVyxNQUFYO0VBRUEsS0FBQSxHQUFRO0VBQ1IsS0FBQSwwQ0FBQTtLQUFJLENBQUUsR0FBRixFQUFPLEtBQVA7SUFDRixLQUFLLENBQUMsSUFBTixDQUFXLElBQUksQ0FBQyxJQUFMLENBQVUsR0FBVixFQUFlLEtBQWYsQ0FBWDtFQURGO0VBR0EsSUFBRyxvQkFBSDs7SUFFRSxDQUFBLENBQUUsS0FBRixDQUFBLEdBQVksWUFBWjtJQUNBLElBQUcsSUFBSSxDQUFDLFFBQUwsQ0FBYyxLQUFkLENBQUg7TUFDRSxLQUFLLENBQUMsSUFBTixDQUFXLElBQUksQ0FBQyxJQUFMLENBQVU7UUFBRSxHQUFBLEtBQUY7UUFBWSxJQUFBLEVBQU07TUFBbEIsQ0FBVixDQUFYLEVBREY7S0FBQSxNQUFBO01BR0UsS0FBSyxDQUFDLElBQU4sQ0FBVyxJQUFJLENBQUMsSUFBTCxDQUFVO1FBQUEsSUFBQSxFQUFNLElBQU47UUFBWSxJQUFBLEVBQU07TUFBbEIsQ0FBVixDQUFYLEVBSEY7S0FIRjs7U0FRQTtBQTFCaUMsQ0FBbkM7O0FBNkJBLE9BQUEsQ0FBUSxLQUFLLENBQUMsSUFBZCxFQUFvQixJQUFJLENBQUMsT0FBekIsRUFBa0MsUUFBQSxDQUFFLEtBQUYsQ0FBQTtBQUNsQyxNQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUU7RUFBQSxLQUFBLHVDQUFBOztpQkFDRSxJQUFJLENBQUMsSUFBTCxDQUFVLElBQVY7RUFERixDQUFBOztBQURnQyxDQUFsQzs7QUFJQSxPQUFBLENBQVEsS0FBSyxDQUFDLElBQWQsRUFBb0IsSUFBSSxDQUFDLFVBQXpCLEVBQXFDLFFBQUEsQ0FBRSxDQUFGLENBQUE7QUFDckMsTUFBQTtFQUFFLElBQUEsR0FBTztJQUFBLElBQUEsRUFBTSxJQUFOO0lBQVksR0FBQSxFQUFLLENBQWpCO0lBQW9CLElBQUEsRUFBTTtFQUExQjtTQUNQLENBQUUsSUFBSSxDQUFDLElBQUwsQ0FBVSxJQUFWLENBQUY7QUFGbUMsQ0FBckM7O0FBSUEsT0FBQSxDQUFRLEtBQUssQ0FBQyxJQUFkLEVBQW9CLE9BQXBCLEVBQTZCLFFBQUEsQ0FBRSxJQUFGLENBQUE7U0FDM0IsS0FBSyxDQUFDLElBQU4sQ0FBVztJQUFBLENBQUUsSUFBRixDQUFBLEVBQVU7RUFBVixDQUFYO0FBRDJCLENBQTdCOztBQUdBLE9BQUEsQ0FBUSxLQUFLLENBQUMsSUFBZCxFQUFvQixjQUFwQixFQUFvQyxRQUFBLENBQUMsQ0FBRSxLQUFGLENBQUQsQ0FBQTtBQUNwQyxNQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUU7RUFBQSxLQUFBLHVDQUFBOztpQkFDRTtNQUFBLElBQUEsRUFBTSxJQUFJLENBQUMsSUFBWDtNQUNBLEdBQUEsRUFBSyxJQUFJLENBQUMsR0FEVjtNQUVBLElBQUEsRUFBTSxJQUFJLENBQUM7SUFGWDtFQURGLENBQUE7O0FBRGtDLENBQXBDOztBQU9BLE1BQUEsR0FDRTtFQUFBLElBQUEsRUFBTSxRQUFBLENBQUUsR0FBRixFQUFPLEtBQVAsQ0FBQTtXQUNKO01BQUEsSUFBQSxFQUFNLEdBQU47TUFDQSxLQUFBLEVBQU8sS0FBSyxDQUFDLElBQU4sQ0FBVyxLQUFYO0lBRFA7RUFESTtBQUFOOztBQUtGLE9BQUEsR0FDRTtFQUFBLElBQUEsRUFBTSxRQUFBLENBQUUsS0FBRixDQUFBO0FBQ1IsUUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBO0lBQUksTUFBQSxHQUFTLE9BQU8sQ0FBQyxNQUFSLENBQWUsS0FBZjtJQUNULE9BQUEsR0FBVTtNQUFBLEtBQUEsRUFBTyxDQUFBO0lBQVA7QUFFVjtJQUFBLEtBQUEscUNBQUE7O01BQ0UsS0FBQSxHQUFRLE1BQU0sQ0FBRSxHQUFGO01BQ2QsT0FBTyxDQUFDLEtBQUssQ0FBRSxHQUFGLENBQWIsR0FBdUIsTUFBTSxDQUFDLElBQVAsQ0FBWSxHQUFaLEVBQWlCLEtBQWpCO0lBRnpCO1dBSUE7RUFSSSxDQUFOO0VBVUEsTUFBQSxFQUFRLFFBQUEsQ0FBRSxLQUFGLENBQUE7QUFDVixRQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7SUFBSSxJQUFHLElBQUksQ0FBQyxRQUFMLENBQWMsS0FBZCxDQUFIO01BQ0UsS0FBQSxHQUFRLENBQUE7TUFDUixNQUFBLEdBQVksbUJBQUgsR0FBcUIsS0FBSyxDQUFDLEtBQTNCLEdBQXNDO0FBQy9DO01BQUEsS0FBQSxxQ0FBQTs7UUFDRSxLQUFLLENBQUUsR0FBRixDQUFMLEdBQWUsTUFBTSxDQUFFLEdBQUY7TUFEdkIsQ0FIRjtLQUFBLE1BS0ssSUFBRyxJQUFJLENBQUMsT0FBTCxDQUFhLEtBQWIsQ0FBSDtNQUNILEtBQUEsR0FBUSxPQUFPLENBQUMsTUFBUixDQUFlLEtBQWYsRUFETDtLQUFBLE1BQUE7TUFHSCxNQUFNLElBQUksS0FBSixDQUFVLDJDQUFWLEVBSEg7O0lBS0wsSUFBSSxxQkFBSjtNQUNFLElBQUcsbUJBQUg7UUFDRSxLQUFLLENBQUUsTUFBRixDQUFMLEdBQWtCLEtBQUssQ0FBQztRQUN4QixPQUFPLEtBQUssQ0FBQyxNQUZmO09BQUEsTUFBQTtRQUlFLE1BQU0sSUFBSSxLQUFKLENBQVUseUNBQVYsRUFKUjtPQURGOztJQU9BLElBQUksbUJBQUo7TUFDRSxJQUFHLGlCQUFIO1FBQ0UsS0FBSyxDQUFFLElBQUYsQ0FBTCxHQUFnQixLQUFLLENBQUM7UUFDdEIsT0FBTyxLQUFLLENBQUMsSUFGZjtPQURGOztXQUtBO0VBdkJNLENBVlI7RUFtQ0EsTUFBQSxFQUFRLFFBQUEsQ0FBRSxFQUFGLENBQUE7QUFDVixRQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBO0lBQUksS0FBQSxvQ0FBQTs7VUFBa0I7UUFDaEIsTUFBTSxJQUFJLEtBQUosQ0FBVSw4Q0FBVjs7SUFEUjtJQUdBLElBQUcsRUFBRSxDQUFDLE1BQUgsS0FBYSxDQUFoQjtBQUNFLGFBQ0U7UUFBQSxDQUFFLE1BQUYsQ0FBQSxFQUNFO1VBQUEsR0FBQSxFQUNFO1lBQUEsSUFBQSxFQUFNLElBQU47WUFDQSxJQUFBLEVBQU07VUFETjtRQURGO01BREYsRUFGSjs7SUFPQSxLQUFBLEdBQVEsQ0FBQTtJQUNSLE9BQUEsR0FBVSxRQUFBLENBQUUsQ0FBRixDQUFBO0FBQ2QsVUFBQTtNQUFNLElBQUEsR0FBTyxDQUFDLENBQUMsSUFBRixJQUFVO01BQ2pCLElBQUcsbUJBQUg7ZUFDRSxDQUFBLENBQUEsQ0FBSSxJQUFKLENBQUEsQ0FBQSxDQUFBLENBQWMsRUFBRSxLQUFLLENBQUUsSUFBRixDQUFyQixDQUFBLEVBREY7T0FBQSxNQUFBO1FBR0UsS0FBSyxDQUFFLElBQUYsQ0FBTCxHQUFnQjtlQUNoQixLQUpGOztJQUZRO0lBU1YsS0FBQSxHQUFRLENBQUE7SUFDUixLQUFBLEdBQVEsQ0FBQTtJQUNSLEtBQUEsOENBQUE7O01BQ0UsT0FBQSx5Q0FBMEIsT0FBQSxDQUFRLENBQVI7TUFDMUIsSUFBRyxDQUFBLEtBQUssQ0FBUjtRQUNFLEtBQUssQ0FBQyxTQUFOLEdBQWtCLFFBRHBCOztNQUdBLElBQUcsQ0FBQSxLQUFLLEVBQUUsQ0FBQyxNQUFILEdBQVksQ0FBcEI7UUFDRSxJQUFBLEdBQU8sS0FEVDtPQUFBLE1BQUE7UUFHRSxJQUFBLEdBQU8sT0FBQSxDQUFRLEVBQUUsQ0FBRSxDQUFBLEdBQUksQ0FBTixDQUFWLEVBSFQ7O01BS0EsS0FBSyxDQUFFLE9BQUYsQ0FBTCxHQUNFO1FBQUEsSUFBQSxFQUNFO1VBQUEsSUFBQSxFQUFNLElBQU47VUFDQSxHQUFBLEVBQUssQ0FETDtVQUVBLElBQUEsRUFBTTtRQUZOO01BREY7TUFLRixLQUFLLENBQUMsT0FBTixHQUFnQjtJQWhCbEI7SUFrQkEsS0FBSyxDQUFFLE1BQUYsQ0FBTCxHQUFrQjtNQUFBLElBQUEsRUFBTTtRQUFFLElBQUEsRUFBTSxJQUFSO1FBQWMsSUFBQSxFQUFNLEtBQUssQ0FBQztNQUExQjtJQUFOO1dBQ2xCO0VBMUNNO0FBbkNSOztBQWdGRixPQUFBO0VBQVMsT0FBVDtFQUFrQixNQUFsQjtFQUEwQixLQUExQjtFQUFpQyxJQUFqQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyaWMgfSBmcm9tIFwiQGRhc2hraXRlL2pveS9nZW5lcmljXCJcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSBcIkBkYXNoa2l0ZS9qb3kvdHlwZVwiXG5pbXBvcnQgeyAkc3RhcnQsICRlbmQgfSBmcm9tIFwiLi9zdGF0ZXNcIlxuXG5pc1N0YXRlID0gKCB4ICkgLT4gKCBUeXBlLmlzU3RyaW5nIHggKSB8fCAoIFR5cGUuaXNTeW1ib2wgeCApXG5hcmVWZXJ0ZXhFZGdlcyA9ICggeCApIC0+XG4gIHJldHVybiBmYWxzZSBpZiAheC5lZGdlcz9cbiAgcmV0dXJuIGZhbHNlIGlmICFUeXBlLmlzQXJyYXkgeC5lZGdlc1xuICBmb3IgZWRnZSBpbiB4LmVkZ2VzIHdoZW4gIVR5cGUuaXNPYmplY3QgZWRnZVxuICAgIHJldHVybiBmYWxzZVxuICB0cnVlXG5cblxubm9ybWFsaXplV2hlbiA9ICggeCApIC0+XG4gIGlmIGlzU3RhdGUgeFxuICAgICggdGFsb3MsIGV2ZW50ICkgLT4gZXZlbnQgPT0gY29uZGl0aW9uXG4gIGVsc2UgaWYgVHlwZS5pc0Z1bmN0aW9uIHhcbiAgICB4XG4gIGVsc2UgaWYgVHlwZS5pc0Jvb2xlYW4geFxuICAgIC0+IHhcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvciBcInVuYWJsZSB0byBub3JtYWxpemUgd2hlbiBkZXNjcmlwdGlvblwiXG5cbm5vcm1hbGl6ZU1vdmUgPSAoIHggKSAtPlxuICBpZiBpc1N0YXRlIHhcbiAgICAoIHRhbG9zLCBldmVudCApIC0+IHRhbG9zLnN0YXRlID0geFxuICBlbHNlIGlmIFR5cGUuaXNGdW5jdGlvbiB4XG4gICAgeFxuICBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yIFwidW5hYmxlIHRvIG5vcm1hbGl6ZSBtb3ZlIGRlc2NyaXB0aW9uXCJcblxucHJpb3JpdGl6ZSA9ICggZnJhbWVzICkgLT5cbiAgZnJhbWVzLnNvcnQgKCBhLCBiICkgLT4gXG4gICAgaWYgYS5wcmlvcml0eSA8IGIucHJpb3JpdHlcbiAgICAgIC0xXG4gICAgZWxzZSBpZiBhLnByaW9yaXR5ID4gYi5wcmlvcml0eVxuICAgICAgMVxuICAgIGVsc2VcbiAgICAgIDBcblxuXG5FZGdlID1cbiAgbWFrZTogZ2VuZXJpYyBuYW1lOiBcInRhbG9zOiBlZGdlIG1ha2VcIlxuXG5nZW5lcmljIEVkZ2UubWFrZSwgVHlwZS5pc09iamVjdCwgKCBvYmplY3QgKSAtPlxuICB3aGVuOiBub3JtYWxpemVXaGVuIG9iamVjdC53aGVuXG4gIHJ1bjogb2JqZWN0LnJ1blxuICBtb3ZlOiBub3JtYWxpemVNb3ZlIG9iamVjdC5tb3ZlXG5cbmdlbmVyaWMgRWRnZS5tYWtlLCBpc1N0YXRlLCBUeXBlLmlzQW55LCAoIG1vdmUsIF93aGVuICkgLT5cbiAgRWRnZS5tYWtlIHsgbW92ZSwgd2hlbjogX3doZW4gfVxuXG5nZW5lcmljIEVkZ2UubWFrZSwgaXNTdGF0ZSwgVHlwZS5pc09iamVjdCwgKCBtb3ZlLCBvYmplY3QgKSAtPlxuICB3aGVuOiBub3JtYWxpemVXaGVuIG9iamVjdC53aGVuID8gdHJ1ZVxuICBydW46IG9iamVjdC5ydW5cbiAgbW92ZTogbm9ybWFsaXplTW92ZSBvYmplY3QubW92ZSA/IG1vdmVcblxuXG5FZGdlcyA9IFxuICBtYWtlOiBnZW5lcmljIG5hbWU6IFwidGFsb3M6IGVkZ2VzIG1ha2VcIlxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIFR5cGUuaXNPYmplY3QsICggb2JqZWN0ICkgLT5cbiAgZnJhbWVzID0gW11cbiAgZGVmYXVsdEZyYW1lID0gbnVsbFxuICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBvYmplY3RcbiAgICB2YWx1ZSA9IG9iamVjdFsga2V5IF1cbiAgICBwcmlvcml0eSA9IHZhbHVlLnByaW9yaXR5ID8gMTAwXG4gICAgaWYga2V5ID09IFwiZGVmYXVsdFwiXG4gICAgICBkZWZhdWx0RnJhbWUgPSB7IGtleSwgdmFsdWUgfVxuICAgIGVsc2VcbiAgICAgIGtleSA9ICRlbmQgaWYga2V5ID09IFwiZW5kXCJcbiAgICAgIGZyYW1lcy5wdXNoIHsga2V5LCB2YWx1ZSwgcHJpb3JpdHkgfVxuXG4gIHByaW9yaXRpemUgZnJhbWVzXG5cbiAgZWRnZXMgPSBbXVxuICBmb3IgeyBrZXksIHZhbHVlIH0gaW4gZnJhbWVzXG4gICAgZWRnZXMucHVzaCBFZGdlLm1ha2Uga2V5LCB2YWx1ZVxuXG4gIGlmIGRlZmF1bHRGcmFtZT9cbiAgICAjIGRlZmF1bHQgaXMgYSBzcGVjaWFsIGNhc2UgZW1waGFzaXppbmcgYW4gYWx3YXlzIHRydWUgXCJ3aGVuXCIgZnVuY3Rpb24uXG4gICAgeyB2YWx1ZSB9ID0gZGVmYXVsdEZyYW1lXG4gICAgaWYgVHlwZS5pc09iamVjdCB2YWx1ZVxuICAgICAgZWRnZXMucHVzaCBFZGdlLm1ha2UgeyB2YWx1ZS4uLiwgd2hlbjogdHJ1ZSB9XG4gICAgZWxzZVxuICAgICAgZWRnZXMucHVzaCBFZGdlLm1ha2Ugd2hlbjogdHJ1ZSwgbW92ZTogdmFsdWVcbiAgXG4gIGVkZ2VzXG4gIFxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIFR5cGUuaXNBcnJheSwgKCBhcnJheSApIC0+XG4gIGZvciBlZGdlIGluIGFycmF5XG4gICAgRWRnZS5tYWtlIGVkZ2VcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzRnVuY3Rpb24sICggZiApIC0+XG4gIGVkZ2UgPSB3aGVuOiB0cnVlLCBydW46IGYsIG1vdmU6ICRlbmRcbiAgWyBFZGdlLm1ha2UgZWRnZSBdXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgaXNTdGF0ZSwgKCBtb3ZlICkgLT5cbiAgRWRnZXMubWFrZSBbIG1vdmUgXTogdHJ1ZVxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIGFyZVZlcnRleEVkZ2VzLCAoeyBlZGdlcyB9KSAtPlxuICBmb3IgZWRnZSBpbiBlZGdlc1xuICAgIHdoZW46IGVkZ2Uud2hlblxuICAgIHJ1bjogZWRnZS5ydW5cbiAgICBtb3ZlOiBlZGdlLm1vdmVcblxuXG5WZXJ0ZXggPVxuICBtYWtlOiAoIGtleSwgdmFsdWUgKSAtPlxuICAgIG5hbWU6IGtleVxuICAgIGVkZ2VzOiBFZGdlcy5tYWtlIHZhbHVlXG5cblxuTWFjaGluZSA9XG4gIG1ha2U6ICggdmFsdWUgKSAtPiBcbiAgICBfZ3JhcGggPSBNYWNoaW5lLmZvcm1hdCB2YWx1ZVxuICAgIG1hY2hpbmUgPSBncmFwaDoge31cblxuICAgIGZvciBrZXkgaW4gUmVmbGVjdC5vd25LZXlzIF9ncmFwaFxuICAgICAgdmFsdWUgPSBfZ3JhcGhbIGtleSBdXG4gICAgICBtYWNoaW5lLmdyYXBoWyBrZXkgXSA9IFZlcnRleC5tYWtlIGtleSwgdmFsdWVcbiAgICBcbiAgICBtYWNoaW5lXG5cbiAgZm9ybWF0OiAoIHZhbHVlICkgLT5cbiAgICBpZiBUeXBlLmlzT2JqZWN0IHZhbHVlXG4gICAgICBncmFwaCA9IHt9XG4gICAgICBfdmFsdWUgPSBpZiB2YWx1ZS5ncmFwaD8gdGhlbiB2YWx1ZS5ncmFwaCBlbHNlIHZhbHVlXG4gICAgICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBfdmFsdWVcbiAgICAgICAgZ3JhcGhbIGtleSBdID0gX3ZhbHVlWyBrZXkgXVxuICAgIGVsc2UgaWYgVHlwZS5pc0FycmF5IHZhbHVlXG4gICAgICBncmFwaCA9IE1hY2hpbmUuZXhwYW5kIHZhbHVlXG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yIFwiVGFsb3MgbWFjaGluZSByZXByZXNlbnRhdGlvbiBpcyBtYWxmb3JtZWRcIlxuICAgIFxuICAgIGlmICFncmFwaFsgJHN0YXJ0IF0/XG4gICAgICBpZiBncmFwaC5zdGFydD9cbiAgICAgICAgZ3JhcGhbICRzdGFydCBdID0gZ3JhcGguc3RhcnRcbiAgICAgICAgZGVsZXRlIGdyYXBoLnN0YXJ0XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvciBcIm5vIHN0YXJ0IHN0YXRlIGRlZmluZWQgZm9yIHRoaXMgbWFjaGluZVwiXG5cbiAgICBpZiAhZ3JhcGhbICRlbmQgXT9cbiAgICAgIGlmIGdyYXBoLmVuZD9cbiAgICAgICAgZ3JhcGhbICRlbmQgXSA9IGdyYXBoLmVuZFxuICAgICAgICBkZWxldGUgZ3JhcGguZW5kXG5cbiAgICBncmFwaFxuXG4gIGV4cGFuZDogKCBmeCApIC0+XG4gICAgZm9yIGYgaW4gZnggd2hlbiAhZj9cbiAgICAgIHRocm93IG5ldyBFcnJvciBcInVuZGVmaW5lZCBpdGVtIGluIGZ1bmN0aW9uIGNvbXBvc2l0aW9uIGFycmF5XCJcbiAgICBcbiAgICBpZiBmeC5sZW5ndGggPT0gMFxuICAgICAgcmV0dXJuIFxuICAgICAgICBbICRzdGFydCBdOiBcbiAgICAgICAgICBlbmQ6XG4gICAgICAgICAgICB3aGVuOiB0cnVlXG4gICAgICAgICAgICBuZXh0OiAkZW5kXG5cbiAgICBuYW1lcyA9IHt9XG4gICAgZ2V0TmFtZSA9ICggZiApIC0+XG4gICAgICBuYW1lID0gZi5uYW1lIHx8IFwiYW5vbnltb3VzXCJcbiAgICAgIGlmIG5hbWVzWyBuYW1lIF0/XG4gICAgICAgIFwiI3sgbmFtZSB9LSN7ICsrbmFtZXNbIG5hbWUgXSB9XCJcbiAgICAgIGVsc2VcbiAgICAgICAgbmFtZXNbIG5hbWUgXSA9IDFcbiAgICAgICAgbmFtZVxuXG5cbiAgICBncmFwaCA9IHt9XG4gICAgY2FjaGUgPSB7fVxuICAgIGZvciBmLCBpIGluIGZ4XG4gICAgICBjdXJyZW50ID0gY2FjaGUuY3VycmVudCA/IGdldE5hbWUgZlxuICAgICAgaWYgaSA9PSAwXG4gICAgICAgIGNhY2hlLnN0YXJ0TmFtZSA9IGN1cnJlbnRcbiAgICAgIFxuICAgICAgaWYgaSA9PSBmeC5sZW5ndGggLSAxXG4gICAgICAgIG5leHQgPSAkZW5kXG4gICAgICBlbHNlXG4gICAgICAgIG5leHQgPSBnZXROYW1lIGZ4WyBpICsgMSBdXG5cbiAgICAgIGdyYXBoWyBjdXJyZW50IF0gPSBcbiAgICAgICAgbmV4dDpcbiAgICAgICAgICB3aGVuOiB0cnVlXG4gICAgICAgICAgcnVuOiBmXG4gICAgICAgICAgbW92ZTogbmV4dFxuXG4gICAgICBjYWNoZS5jdXJyZW50ID0gbmV4dFxuICAgIFxuICAgIGdyYXBoWyAkc3RhcnQgXSA9IG5leHQ6IHsgd2hlbjogdHJ1ZSwgbW92ZTogY2FjaGUuc3RhcnROYW1lIH1cbiAgICBncmFwaFxuXG5cbmV4cG9ydCB7IE1hY2hpbmUsIFZlcnRleCwgRWRnZXMsIEVkZ2UgfSJdfQ==
 //# sourceURL=src/machine.coffee

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tYWNoaW5lLmNvZmZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmljIH0gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZ2VuZXJpY1wiXG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gXCJAZGFzaGtpdGUvam95L3R5cGVcIlxuaW1wb3J0IHsgJHN0YXJ0LCAkZW5kIH0gZnJvbSBcIi4vc3RhdGVzXCJcblxuaXNTdGF0ZSA9ICggeCApIC0+ICggVHlwZS5pc1N0cmluZyB4ICkgfHwgKCBUeXBlLmlzU3ltYm9sIHggKVxuYXJlVmVydGV4RWRnZXMgPSAoIHggKSAtPlxuICByZXR1cm4gZmFsc2UgaWYgIXguZWRnZXM/XG4gIHJldHVybiBmYWxzZSBpZiAhVHlwZS5pc0FycmF5IHguZWRnZXNcbiAgZm9yIGVkZ2UgaW4geC5lZGdlcyB3aGVuICFUeXBlLmlzT2JqZWN0IGVkZ2VcbiAgICByZXR1cm4gZmFsc2VcbiAgdHJ1ZVxuXG5cbm5vcm1hbGl6ZVdoZW4gPSAoIHggKSAtPlxuICBpZiBpc1N0YXRlIHhcbiAgICAoIHRhbG9zLCBldmVudCApIC0+IGV2ZW50ID09IGNvbmRpdGlvblxuICBlbHNlIGlmIFR5cGUuaXNGdW5jdGlvbiB4XG4gICAgeFxuICBlbHNlIGlmIFR5cGUuaXNCb29sZWFuIHhcbiAgICAtPiB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIHdoZW4gZGVzY3JpcHRpb25cIlxuXG5ub3JtYWxpemVNb3ZlID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiB0YWxvcy5zdGF0ZSA9IHhcbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvciBcInVuYWJsZSB0byBub3JtYWxpemUgbW92ZSBkZXNjcmlwdGlvblwiXG5cbnByaW9yaXRpemUgPSAoIGZyYW1lcyApIC0+XG4gIGZyYW1lcy5zb3J0ICggYSwgYiApIC0+IFxuICAgIGlmIGEucHJpb3JpdHkgPCBiLnByaW9yaXR5XG4gICAgICAtMVxuICAgIGVsc2UgaWYgYS5wcmlvcml0eSA+IGIucHJpb3JpdHlcbiAgICAgIDFcbiAgICBlbHNlXG4gICAgICAwXG5cblxuRWRnZSA9XG4gIG1ha2U6IGdlbmVyaWMgbmFtZTogXCJ0YWxvczogZWRnZSBtYWtlXCJcblxuZ2VuZXJpYyBFZGdlLm1ha2UsIFR5cGUuaXNPYmplY3QsICggb2JqZWN0ICkgLT5cbiAgd2hlbjogbm9ybWFsaXplV2hlbiBvYmplY3Qud2hlblxuICBydW46IG9iamVjdC5ydW5cbiAgbW92ZTogbm9ybWFsaXplTW92ZSBvYmplY3QubW92ZVxuXG5nZW5lcmljIEVkZ2UubWFrZSwgaXNTdGF0ZSwgVHlwZS5pc0FueSwgKCBtb3ZlLCBfd2hlbiApIC0+XG4gIEVkZ2UubWFrZSB7IG1vdmUsIHdoZW46IF93aGVuIH1cblxuZ2VuZXJpYyBFZGdlLm1ha2UsIGlzU3RhdGUsIFR5cGUuaXNPYmplY3QsICggbW92ZSwgb2JqZWN0ICkgLT5cbiAgd2hlbjogbm9ybWFsaXplV2hlbiBvYmplY3Qud2hlbiA/IHRydWVcbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmUgPyBtb3ZlXG5cblxuRWRnZXMgPSBcbiAgbWFrZTogZ2VuZXJpYyBuYW1lOiBcInRhbG9zOiBlZGdlcyBtYWtlXCJcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIGZyYW1lcyA9IFtdXG4gIGRlZmF1bHRGcmFtZSA9IG51bGxcbiAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgb2JqZWN0XG4gICAgdmFsdWUgPSBvYmplY3RbIGtleSBdXG4gICAgcHJpb3JpdHkgPSB2YWx1ZS5wcmlvcml0eSA/IDEwMFxuICAgIGlmIGtleSA9PSBcImRlZmF1bHRcIlxuICAgICAgZGVmYXVsdEZyYW1lID0geyBrZXksIHZhbHVlIH1cbiAgICBlbHNlXG4gICAgICBrZXkgPSAkZW5kIGlmIGtleSA9PSBcImVuZFwiXG4gICAgICBmcmFtZXMucHVzaCB7IGtleSwgdmFsdWUsIHByaW9yaXR5IH1cblxuICBwcmlvcml0aXplIGZyYW1lc1xuXG4gIGVkZ2VzID0gW11cbiAgZm9yIHsga2V5LCB2YWx1ZSB9IGluIGZyYW1lc1xuICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIGtleSwgdmFsdWVcblxuICBpZiBkZWZhdWx0RnJhbWU/XG4gICAgIyBkZWZhdWx0IGlzIGEgc3BlY2lhbCBjYXNlIGVtcGhhc2l6aW5nIGFuIGFsd2F5cyB0cnVlIFwid2hlblwiIGZ1bmN0aW9uLlxuICAgIHsgdmFsdWUgfSA9IGRlZmF1bHRGcmFtZVxuICAgIGlmIFR5cGUuaXNPYmplY3QgdmFsdWVcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHsgdmFsdWUuLi4sIHdoZW46IHRydWUgfVxuICAgIGVsc2VcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHdoZW46IHRydWUsIG1vdmU6IHZhbHVlXG4gIFxuICBlZGdlc1xuICBcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzQXJyYXksICggYXJyYXkgKSAtPlxuICBmb3IgZWRnZSBpbiBhcnJheVxuICAgIEVkZ2UubWFrZSBlZGdlXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgVHlwZS5pc0Z1bmN0aW9uLCAoIGYgKSAtPlxuICBlZGdlID0gd2hlbjogdHJ1ZSwgcnVuOiBmLCBtb3ZlOiAkZW5kXG4gIFsgRWRnZS5tYWtlIGVkZ2UgXVxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIGlzU3RhdGUsICggbW92ZSApIC0+XG4gIEVkZ2VzLm1ha2UgWyBtb3ZlIF06IHRydWVcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBhcmVWZXJ0ZXhFZGdlcywgKHsgZWRnZXMgfSkgLT5cbiAgZm9yIGVkZ2UgaW4gZWRnZXNcbiAgICB3aGVuOiBlZGdlLndoZW5cbiAgICBydW46IGVkZ2UucnVuXG4gICAgbW92ZTogZWRnZS5tb3ZlXG5cblxuVmVydGV4ID1cbiAgbWFrZTogKCBrZXksIHZhbHVlICkgLT5cbiAgICBuYW1lOiBrZXlcbiAgICBlZGdlczogRWRnZXMubWFrZSB2YWx1ZVxuXG5cbk1hY2hpbmUgPVxuICBtYWtlOiAoIHZhbHVlICkgLT4gXG4gICAgX2dyYXBoID0gTWFjaGluZS5mb3JtYXQgdmFsdWVcbiAgICBtYWNoaW5lID0gZ3JhcGg6IHt9XG5cbiAgICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBfZ3JhcGhcbiAgICAgIHZhbHVlID0gX2dyYXBoWyBrZXkgXVxuICAgICAgbWFjaGluZS5ncmFwaFsga2V5IF0gPSBWZXJ0ZXgubWFrZSBrZXksIHZhbHVlXG4gICAgXG4gICAgbWFjaGluZVxuXG4gIGZvcm1hdDogKCB2YWx1ZSApIC0+XG4gICAgaWYgVHlwZS5pc09iamVjdCB2YWx1ZVxuICAgICAgZ3JhcGggPSB7fVxuICAgICAgX3ZhbHVlID0gaWYgdmFsdWUuZ3JhcGg/IHRoZW4gdmFsdWUuZ3JhcGggZWxzZSB2YWx1ZVxuICAgICAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgX3ZhbHVlXG4gICAgICAgIGdyYXBoWyBrZXkgXSA9IF92YWx1ZVsga2V5IF1cbiAgICBlbHNlIGlmIFR5cGUuaXNBcnJheSB2YWx1ZVxuICAgICAgZ3JhcGggPSBNYWNoaW5lLmV4cGFuZCB2YWx1ZVxuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvciBcIlRhbG9zIG1hY2hpbmUgcmVwcmVzZW50YXRpb24gaXMgbWFsZm9ybWVkXCJcbiAgICBcbiAgICBpZiAhZ3JhcGhbICRzdGFydCBdP1xuICAgICAgaWYgZ3JhcGguc3RhcnQ/XG4gICAgICAgIGdyYXBoWyAkc3RhcnQgXSA9IGdyYXBoLnN0YXJ0XG4gICAgICAgIGRlbGV0ZSBncmFwaC5zdGFydFxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IgXCJubyBzdGFydCBzdGF0ZSBkZWZpbmVkIGZvciB0aGlzIG1hY2hpbmVcIlxuXG4gICAgaWYgIWdyYXBoWyAkZW5kIF0/XG4gICAgICBpZiBncmFwaC5lbmQ/XG4gICAgICAgIGdyYXBoWyAkZW5kIF0gPSBncmFwaC5lbmRcbiAgICAgICAgZGVsZXRlIGdyYXBoLmVuZFxuXG4gICAgZ3JhcGhcblxuICBleHBhbmQ6ICggZnggKSAtPlxuICAgIGZvciBmIGluIGZ4IHdoZW4gIWY/XG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmRlZmluZWQgaXRlbSBpbiBmdW5jdGlvbiBjb21wb3NpdGlvbiBhcnJheVwiXG4gICAgXG4gICAgaWYgZngubGVuZ3RoID09IDBcbiAgICAgIHJldHVybiBcbiAgICAgICAgWyAkc3RhcnQgXTogXG4gICAgICAgICAgZW5kOlxuICAgICAgICAgICAgd2hlbjogdHJ1ZVxuICAgICAgICAgICAgbmV4dDogJGVuZFxuXG4gICAgbmFtZXMgPSB7fVxuICAgIGdldE5hbWUgPSAoIGYgKSAtPlxuICAgICAgbmFtZSA9IGYubmFtZSB8fCBcImFub255bW91c1wiXG4gICAgICBpZiBuYW1lc1sgbmFtZSBdP1xuICAgICAgICBcIiN7IG5hbWUgfS0jeyArK25hbWVzWyBuYW1lIF0gfVwiXG4gICAgICBlbHNlXG4gICAgICAgIG5hbWVzWyBuYW1lIF0gPSAxXG4gICAgICAgIG5hbWVcblxuXG4gICAgZ3JhcGggPSB7fVxuICAgIGNhY2hlID0ge31cbiAgICBmb3IgZiwgaSBpbiBmeFxuICAgICAgY3VycmVudCA9IGNhY2hlLmN1cnJlbnQgPyBnZXROYW1lIGZcbiAgICAgIGlmIGkgPT0gMFxuICAgICAgICBjYWNoZS5zdGFydE5hbWUgPSBjdXJyZW50XG4gICAgICBcbiAgICAgIGlmIGkgPT0gZngubGVuZ3RoIC0gMVxuICAgICAgICBuZXh0ID0gJGVuZFxuICAgICAgZWxzZVxuICAgICAgICBuZXh0ID0gZ2V0TmFtZSBmeFsgaSArIDEgXVxuXG4gICAgICBncmFwaFsgY3VycmVudCBdID0gXG4gICAgICAgIG5leHQ6XG4gICAgICAgICAgd2hlbjogdHJ1ZVxuICAgICAgICAgIHJ1bjogZlxuICAgICAgICAgIG1vdmU6IG5leHRcblxuICAgICAgY2FjaGUuY3VycmVudCA9IG5leHRcbiAgICBcbiAgICBncmFwaFsgJHN0YXJ0IF0gPSBuZXh0OiB7IHdoZW46IHRydWUsIG1vdmU6IGNhY2hlLnN0YXJ0TmFtZSB9XG4gICAgZ3JhcGhcblxuXG5leHBvcnQgeyBNYWNoaW5lLCBWZXJ0ZXgsIEVkZ2VzLCBFZGdlIH0iXSwibmFtZXMiOlsiRWRnZSIsIkVkZ2VzIiwiTWFjaGluZSIsIlZlcnRleCIsImFyZVZlcnRleEVkZ2VzIiwiaXNTdGF0ZSIsIm5vcm1hbGl6ZU1vdmUiLCJub3JtYWxpemVXaGVuIiwicHJpb3JpdGl6ZSIsImdlbmVyaWMiLCJUeXBlIiwiJHN0YXJ0IiwiJGVuZCIsIngiLCJpc1N0cmluZyIsImlzU3ltYm9sIiwiZWRnZSIsImoiLCJsZW4iLCJyZWYiLCJlZGdlcyIsImlzQXJyYXkiLCJsZW5ndGgiLCJpc09iamVjdCIsInRhbG9zIiwiZXZlbnQiLCJjb25kaXRpb24iLCJpc0Z1bmN0aW9uIiwiaXNCb29sZWFuIiwiRXJyb3IiLCJzdGF0ZSIsImZyYW1lcyIsInNvcnQiLCJhIiwiYiIsInByaW9yaXR5IiwibWFrZSIsIm5hbWUiLCJvYmplY3QiLCJ3aGVuIiwicnVuIiwibW92ZSIsImlzQW55IiwiX3doZW4iLCJyZWYxIiwiZGVmYXVsdEZyYW1lIiwiayIsImtleSIsImxlbjEiLCJ2YWx1ZSIsIlJlZmxlY3QiLCJvd25LZXlzIiwicHVzaCIsImFycmF5IiwicmVzdWx0cyIsImYiLCJfZ3JhcGgiLCJtYWNoaW5lIiwiZm9ybWF0IiwiZ3JhcGgiLCJfdmFsdWUiLCJleHBhbmQiLCJzdGFydCIsImVuZCIsImZ4IiwiY2FjaGUiLCJjdXJyZW50IiwiZ2V0TmFtZSIsImkiLCJuYW1lcyIsIm5leHQiLCJzdGFydE5hbWUiXSwibWFwcGluZ3MiOiJBQUFBLElBQUFBLE1BQUFDLE9BQUFDLFNBQUFDLFFBQUFDLGdCQUFBQyxTQUFBQyxlQUFBQyxlQUFBQztBQUFBLFNBQVND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