var Step, build, pipe, pipeWith, run, start;
import { generic } from "@dashkite/joy/generic";
import * as Fn from "@dashkite/joy/function";
import * as Type from "@dashkite/joy/type";
import log from "@dashkite/kaiko";
import { Machine } from "./machine";
import { Talos } from "./talos";
Step = {
    matchVertex: function(talos) {
        var vertex;
        vertex = talos.machine.graph[talos.state];
        if (vertex == null) {
            talos.catch(new Error("talos state is not in machine graph"));
        }
        return vertex;
    },
    matchEdge: function(vertex, talos, event) {
        var edge, error, i, len, ref;
        ref = vertex.edges;
        for(i = 0, len = ref.length; i < len; i++){
            edge = ref[i];
            try {
                if (edge.when(talos, event) === true) {
                    return edge;
                }
            } catch (error1) {
                error = error1;
                return talos.catch(error);
            }
        }
        return talos.catch(new Error("no matching when condition"));
    },
    run: function(edge, talos, event) {
        var error;
        if (edge.run != null) {
            try {
                return edge.run(talos, event);
            } catch (error1) {
                error = error1;
                return talos.catch(error);
            }
        }
    },
    move: function(edge, talos, event) {
        var error;
        try {
            return edge.move(talos, event);
        } catch (error1) {
            error = error1;
            return talos.catch(error);
        }
    },
    tick: function*(talos, event) {
        var edge, vertex;
        vertex = Step.matchVertex(talos);
        yield talos;
        edge = Step.matchEdge(vertex, talos, event);
        yield talos;
        Step.run(edge, talos, event);
        yield talos;
        Step.move(edge, talos, event);
        return yield talos;
    }
};
start = generic({
    name: "talos: sync start",
    default: function() {
        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){
            args[_key] = arguments[_key];
        }
        throw new Error(`talos sync start: input is malformed ${JSON.stringify(args)}`);
    }
});
generic(start, Type.isObject, function(machine) {
    var talos;
    talos = Talos.make(machine);
    return start(talos);
});
// Create generator where state machine consumes its own context repeatedly.
generic(start, Talos.isType, function*(talos) {
    var ref;
    while(true){
        ref = Step.tick(talos, talos.context);
        for (talos of ref){
            if (talos.ended) {
                yield talos;
                return;
            }
        }
        yield talos; // prevents accumulation
    }
});
generic(start, Type.isObject, Type.isIterable, function(machine, events) {
    var talos;
    talos = Talos.make(machine);
    return start(talos, events);
});
// Create generator where state machine consumes values from iterator.
generic(start, Talos.isType, Type.isIterable, function*(talos, events) {
    var event, ref;
    for (event of events){
        ref = Step.tick(talos, event);
        for (talos of ref){
            if (talos.ended) {
                yield talos;
                return;
            }
        }
        yield talos; // prevents accumulation
    }
});
generic(start, Type.isObject, Type.isObject, function(machine, context) {
    var talos;
    talos = Talos.make(machine);
    talos.context = context;
    return start(talos);
});
generic(start, Talos.isType, Type.isObject, function(talos, context) {
    talos.context = context;
    return start(talos);
});
generic(start, Type.isObject, Type.isObject, Type.isIterable, function(machine, context, events) {
    var talos;
    talos = Talos.make(machine);
    talos.context = context;
    return start(talos, events);
});
generic(start, Talos.isType, Type.isObject, Type.isIterable, function(talos, context, events) {
    talos.context = context;
    return start(talos, events);
});
// Convenience function to keep going and only return the final talos.
run = generic({
    name: "talos: sync run",
    default: function() {
        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){
            args[_key] = arguments[_key];
        }
        throw new Error(`talos sync run: input is malformed ${JSON.stringify(args)}`);
    }
});
generic(run, Type.isIterable, function(cycle) {
    var result, talos;
    for (talos of cycle){
        result = talos;
    }
    return result;
});
// Convenience function to provide a curried functional interface for cycle run.
// "start" allows first argument to be talos instance or machine definition.
build = function(talos) {
    return function() {
        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){
            args[_key] = arguments[_key];
        }
        return run(start(talos, ...args));
    };
};
pipe = function(fx) {
    var machine;
    machine = Machine.make(fx);
    return function(context) {
        var cycle, talos;
        cycle = start(machine, context);
        talos = run(cycle);
        if (talos.error != null) {
            throw talos.error;
        }
        return talos.context;
    };
};
pipeWith = Fn.curry(function(f, gx) {
    var machine;
    machine = Machine.make(gx);
    return function(context) {
        var cycle, result, talos;
        cycle = start(machine, context);
        result = null;
        for (talos of cycle){
            f(talos);
            result = talos;
        }
        if (result.error != null) {
            throw result.error;
        }
        return result.context;
    };
});
export { Step, start, run, build, pipe, pipeWith }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL3N5bmMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVMsT0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxDQUFBLE1BQVAsTUFBQTs7QUFDQSxPQUFPLENBQUEsUUFBUCxNQUFBOztBQUNBLE9BQU8sR0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUyxPQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsS0FBVDtDQUFBLE1BQUE7O0FBR0EsSUFBQSxHQUNFO0VBQUEsV0FBQSxFQUFhLFFBQUEsQ0FBRSxLQUFGLENBQUE7QUFDZixRQUFBO0lBQUksTUFBQSxHQUFTLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFFLEtBQUssQ0FBQyxLQUFSO0lBQzVCLElBQUksY0FBSjtNQUNFLEtBQUssQ0FBQyxLQUFOLENBQVksSUFBSSxLQUFKLENBQVUscUNBQVYsQ0FBWixFQURGOztXQUVBO0VBSlcsQ0FBYjtFQU1BLFNBQUEsRUFBVyxRQUFBLENBQUUsTUFBRixFQUFVLEtBQVYsRUFBaUIsS0FBakIsQ0FBQTtBQUNiLFFBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUk7SUFBQSxLQUFBLHFDQUFBOztBQUNFO1FBQ0UsSUFBRyxDQUFFLElBQUksQ0FBQyxJQUFMLENBQVUsS0FBVixFQUFpQixLQUFqQixDQUFGLENBQUEsS0FBOEIsSUFBakM7QUFDRSxpQkFBTyxLQURUO1NBREY7T0FHQSxjQUFBO1FBQU07QUFDSixlQUFPLEtBQUssQ0FBQyxLQUFOLENBQVksS0FBWixFQURUOztJQUpGO1dBTUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFJLEtBQUosQ0FBVSw0QkFBVixDQUFaO0VBUFMsQ0FOWDtFQWVBLEdBQUEsRUFBSyxRQUFBLENB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a0IsQ0FBVDs7QUFZWCxPQUFBO0VBQ0UsSUFERjtFQUVFLEtBRkY7RUFHRSxHQUhGO0VBSUUsS0FKRjtFQUtFLElBTEY7RUFNRSxRQU5GIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJpYyB9IGZyb20gXCJAZGFzaGtpdGUvam95L2dlbmVyaWNcIlxuaW1wb3J0ICogYXMgRm4gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZnVuY3Rpb25cIlxuaW1wb3J0ICogYXMgVHlwZSBmcm9tIFwiQGRhc2hraXRlL2pveS90eXBlXCJcbmltcG9ydCBsb2cgZnJvbSBcIkBkYXNoa2l0ZS9rYWlrb1wiXG5pbXBvcnQgeyBNYWNoaW5lIH0gZnJvbSBcIi4vbWFjaGluZVwiXG5pbXBvcnQgeyBUYWxvcyB9IGZyb20gXCIuL3RhbG9zXCJcblxuXG5TdGVwID1cbiAgbWF0Y2hWZXJ0ZXg6ICggdGFsb3MgKSAtPlxuICAgIHZlcnRleCA9IHRhbG9zLm1hY2hpbmUuZ3JhcGhbIHRhbG9zLnN0YXRlIF1cbiAgICBpZiAhdmVydGV4P1xuICAgICAgdGFsb3MuY2F0Y2ggbmV3IEVycm9yIFwidGFsb3Mgc3RhdGUgaXMgbm90IGluIG1hY2hpbmUgZ3JhcGhcIlxuICAgIHZlcnRleFxuXG4gIG1hdGNoRWRnZTogKCB2ZXJ0ZXgsIHRhbG9zLCBldmVudCApIC0+XG4gICAgZm9yIGVkZ2UgaW4gdmVydGV4LmVkZ2VzXG4gICAgICB0cnlcbiAgICAgICAgaWYgKCBlZGdlLndoZW4gdGFsb3MsIGV2ZW50ICkgPT0gdHJ1ZVxuICAgICAgICAgIHJldHVybiBlZGdlXG4gICAgICBjYXRjaCBlcnJvclxuICAgICAgICByZXR1cm4gdGFsb3MuY2F0Y2ggZXJyb3JcbiAgICB0YWxvcy5jYXRjaCBuZXcgRXJyb3IgXCJubyBtYXRjaGluZyB3aGVuIGNvbmRpdGlvblwiXG5cbiAgcnVuOiAoIGVkZ2UsIHRhbG9zLCBldmVudCApIC0+XG4gICAgaWYgZWRnZS5ydW4/XG4gICAgICB0cnlcbiAgICAgICAgZWRnZS5ydW4gdGFsb3MsIGV2ZW50XG4gICAgICBjYXRjaCBlcnJvclxuICAgICAgICB0YWxvcy5jYXRjaCBlcnJvclxuXG4gIG1vdmU6ICggZWRnZSwgdGFsb3MsIGV2ZW50ICkgLT5cbiAgICB0cnlcbiAgICAgIGVkZ2UubW92ZSB0YWxvcywgZXZlbnRcbiAgICBjYXRjaCBlcnJvclxuICAgICAgdGFsb3MuY2F0Y2ggZXJyb3JcblxuICB0aWNrOiAoIHRhbG9zLCBldmVudCApIC0+XG4gICAgdmVydGV4ID0gU3RlcC5tYXRjaFZlcnRleCB0YWxvc1xuICAgIHlpZWxkIHRhbG9zXG4gICAgZWRnZSA9IFN0ZXAubWF0Y2hFZGdlIHZlcnRleCwgdGFsb3MsIGV2ZW50XG4gICAgeWllbGQgdGFsb3NcbiAgICBTdGVwLnJ1biBlZGdlLCB0YWxvcywgZXZlbnRcbiAgICB5aWVsZCB0YWxvc1xuICAgIFN0ZXAubW92ZSBlZGdlLCB0YWxvcywgZXZlbnRcbiAgICB5aWVsZCB0YWxvc1xuXG5cbnN0YXJ0ID0gZ2VuZXJpYyBcbiAgbmFtZTogXCJ0YWxvczogc3luYyBzdGFydFwiXG4gIGRlZmF1bHQ6ICggYXJncy4uLiApIC0+XG4gICAgdGhyb3cgbmV3IEVycm9yIFwidGFsb3Mgc3luYyBzdGFydDogaW5wdXQgaXMgbWFsZm9ybWVkICN7IEpTT04uc3RyaW5naWZ5IGFyZ3MgfVwiXG5cbmdlbmVyaWMgc3RhcnQsIFR5cGUuaXNPYmplY3QsICggbWFjaGluZSApIC0+XG4gIHRhbG9zID0gVGFsb3MubWFrZSBtYWNoaW5lXG4gIHN0YXJ0IHRhbG9zXG5cbiMgQ3JlYXRlIGdlbmVyYXRvciB3aGVyZSBzdGF0ZSBtYWNoaW5lIGNvbnN1bWVzIGl0cyBvd24gY29udGV4dCByZXBlYXRlZGx5LlxuZ2VuZXJpYyBzdGFydCwgVGFsb3MuaXNUeXBlLCAoIHRhbG9zICkgLT5cbiAgbG9vcFxuICAgIGZvciB0YWxvcyBmcm9tIFN0ZXAudGljayB0YWxvcywgdGFsb3MuY29udGV4dFxuICAgICAgaWYgdGFsb3MuZW5kZWRcbiAgICAgICAgeWllbGQgdGFsb3NcbiAgICAgICAgcmV0dXJuXG4gICAgeWllbGQgdGFsb3NcbiAgcmV0dXJuICMgcHJldmVudHMgYWNjdW11bGF0aW9uXG5cbmdlbmVyaWMgc3RhcnQsIFR5cGUuaXNPYmplY3QsIFR5cGUuaXNJdGVyYWJsZSwgKCBtYWNoaW5lLCBldmVudHMgKSAtPlxuICB0YWxvcyA9IFRhbG9zLm1ha2UgbWFjaGluZVxuICBzdGFydCB0YWxvcywgZXZlbnRzXG5cbiMgQ3JlYXRlIGdlbmVyYXRvciB3aGVyZSBzdGF0ZSBtYWNoaW5lIGNvbnN1bWVzIHZhbHVlcyBmcm9tIGl0ZXJhdG9yLlxuZ2VuZXJpYyBzdGFydCwgVGFsb3MuaXNUeXBlLCBUeXBlLmlzSXRlcmFibGUsICggdGFsb3MsIGV2ZW50cyApIC0+XG4gIGZvciBldmVudCBmcm9tIGV2ZW50c1xuICAgIGZvciB0YWxvcyBmcm9tIFN0ZXAudGljayB0YWxvcywgZXZlbnRcbiAgICAgIGlmIHRhbG9zLmVuZGVkXG4gICAgICAgIHlpZWxkIHRhbG9zXG4gICAgICAgIHJldHVyblxuICAgIHlpZWxkIHRhbG9zXG4gIHJldHVybiAjIHByZXZlbnRzIGFjY3VtdWxhdGlvblxuXG5nZW5lcmljIHN0YXJ0LCBUeXBlLmlzT2JqZWN0LCBUeXBlLmlzT2JqZWN0LCAoIG1hY2hpbmUsIGNvbnRleHQgKSAtPlxuICB0YWxvcyA9IFRhbG9zLm1ha2UgbWFjaGluZVxuICB0YWxvcy5jb250ZXh0ID0gY29udGV4dFxuICBzdGFydCB0YWxvc1xuXG5nZW5lcmljIHN0YXJ0LCBUYWxvcy5pc1R5cGUsIFR5cGUuaXNPYmplY3QsICggdGFsb3MsIGNvbnRleHQgKSAtPlxuICB0YWxvcy5jb250ZXh0ID0gY29udGV4dFxuICBzdGFydCB0YWxvc1xuXG5nZW5lcmljIHN0YXJ0LCBUeXBlLmlzT2JqZWN0LCBUeXBlLmlzT2JqZWN0LCBUeXBlLmlzSXRlcmFibGUsICggbWFjaGluZSwgY29udGV4dCwgZXZlbnRzICkgLT5cbiAgdGFsb3MgPSBUYWxvcy5tYWtlIG1hY2hpbmVcbiAgdGFsb3MuY29udGV4dCA9IGNvbnRleHRcbiAgc3RhcnQgdGFsb3MsIGV2ZW50c1xuXG5nZW5lcmljIHN0YXJ0LCBUYWxvcy5pc1R5cGUsIFR5cGUuaXNPYmplY3QsIFR5cGUuaXNJdGVyYWJsZSwgKCB0YWxvcywgY29udGV4dCwgZXZlbnRzICkgLT5cbiAgdGFsb3MuY29udGV4dCA9IGNvbnRleHRcbiAgc3RhcnQgdGFsb3MsIGV2ZW50c1xuXG5cbiMgQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8ga2VlcCBnb2luZyBhbmQgb25seSByZXR1cm4gdGhlIGZpbmFsIHRhbG9zLlxucnVuID0gZ2VuZXJpYyBcbiAgbmFtZTogXCJ0YWxvczogc3luYyBydW5cIlxuICBkZWZhdWx0OiAoIGFyZ3MuLi4gKSAtPiBcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ0YWxvcyBzeW5jIHJ1bjogaW5wdXQgaXMgbWFsZm9ybWVkICN7IEpTT04uc3RyaW5naWZ5IGFyZ3MgfVwiXG5cbmdlbmVyaWMgcnVuLCBUeXBlLmlzSXRlcmFibGUsICggY3ljbGUgKSAtPlxuICBmb3IgdGFsb3MgZnJvbSBjeWNsZVxuICAgIHJlc3VsdCA9IHRhbG9zXG4gIHJlc3VsdFxuXG4jIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIHByb3ZpZGUgYSBjdXJyaWVkIGZ1bmN0aW9uYWwgaW50ZXJmYWNlIGZvciBjeWNsZSBydW4uXG4jIFwic3RhcnRcIiBhbGxvd3MgZmlyc3QgYXJndW1lbnQgdG8gYmUgdGFsb3MgaW5zdGFuY2Ugb3IgbWFjaGluZSBkZWZpbml0aW9uLlxuYnVpbGQgPSAoIHRhbG9zICkgLT5cbiAgKCBhcmdzLi4uICkgLT4gcnVuIHN0YXJ0IHRhbG9zLCBhcmdzLi4uXG5cbnBpcGUgPSAoIGZ4ICkgLT5cbiAgbWFjaGluZSA9IE1hY2hpbmUubWFrZSBmeFxuICAoIGNvbnRleHQgKSAtPiBcbiAgICBjeWNsZSA9IHN0YXJ0IG1hY2hpbmUsIGNvbnRleHRcbiAgICB0YWxvcyA9IHJ1biBjeWNsZVxuICAgIGlmIHRhbG9zLmVycm9yP1xuICAgICAgdGhyb3cgdGFsb3MuZXJyb3JcbiAgICB0YWxvcy5jb250ZXh0XG5cbnBpcGVXaXRoID0gRm4uY3VycnkgKCBmLCBneCApIC0+XG4gIG1hY2hpbmUgPSBNYWNoaW5lLm1ha2UgZ3hcbiAgKCBjb250ZXh0ICkgLT4gXG4gICAgY3ljbGUgPSBzdGFydCBtYWNoaW5lLCBjb250ZXh0XG4gICAgcmVzdWx0ID0gbnVsbFxuICAgIGZvciB0YWxvcyBmcm9tIGN5Y2xlXG4gICAgICBmIHRhbG9zXG4gICAgICByZXN1bHQgPSB0YWxvc1xuICAgIGlmIHJlc3VsdC5lcnJvcj9cbiAgICAgIHRocm93IHJlc3VsdC5lcnJvclxuICAgIHJlc3VsdC5jb250ZXh0XG5cbmV4cG9ydCB7XG4gIFN0ZXAgIFxuICBzdGFydFxuICBydW5cbiAgYnVpbGRcbiAgcGlwZVxuICBwaXBlV2l0aFxufSJdfQ==
 //# sourceURL=src/sync.coffee

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9zeW5jLmNvZmZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmljIH0gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZ2VuZXJpY1wiXG5pbXBvcnQgKiBhcyBGbiBmcm9tIFwiQGRhc2hraXRlL2pveS9mdW5jdGlvblwiXG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gXCJAZGFzaGtpdGUvam95L3R5cGVcIlxuaW1wb3J0IGxvZyBmcm9tIFwiQGRhc2hraXRlL2thaWtvXCJcbmltcG9ydCB7IE1hY2hpbmUgfSBmcm9tIFwiLi9tYWNoaW5lXCJcbmltcG9ydCB7IFRhbG9zIH0gZnJvbSBcIi4vdGFsb3NcIlxuXG5cblN0ZXAgPVxuICBtYXRjaFZlcnRleDogKCB0YWxvcyApIC0+XG4gICAgdmVydGV4ID0gdGFsb3MubWFjaGluZS5ncmFwaFsgdGFsb3Muc3RhdGUgXVxuICAgIGlmICF2ZXJ0ZXg/XG4gICAgICB0YWxvcy5jYXRjaCBuZXcgRXJyb3IgXCJ0YWxvcyBzdGF0ZSBpcyBub3QgaW4gbWFjaGluZSBncmFwaFwiXG4gICAgdmVydGV4XG5cbiAgbWF0Y2hFZGdlOiAoIHZlcnRleCwgdGFsb3MsIGV2ZW50ICkgLT5cbiAgICBmb3IgZWRnZSBpbiB2ZXJ0ZXguZWRnZXNcbiAgICAgIHRyeVxuICAgICAgICBpZiAoIGVkZ2Uud2hlbiB0YWxvcywgZXZlbnQgKSA9PSB0cnVlXG4gICAgICAgICAgcmV0dXJuIGVkZ2VcbiAgICAgIGNhdGNoIGVycm9yXG4gICAgICAgIHJldHVybiB0YWxvcy5jYXRjaCBlcnJvclxuICAgIHRhbG9zLmNhdGNoIG5ldyBFcnJvciBcIm5vIG1hdGNoaW5nIHdoZW4gY29uZGl0aW9uXCJcblxuICBydW46ICggZWRnZSwgdGFsb3MsIGV2ZW50ICkgLT5cbiAgICBpZiBlZGdlLnJ1bj9cbiAgICAgIHRyeVxuICAgICAgICBlZGdlLnJ1biB0YWxvcywgZXZlbnRcbiAgICAgIGNhdGNoIGVycm9yXG4gICAgICAgIHRhbG9zLmNhdGNoIGVycm9yXG5cbiAgbW92ZTogKCBlZGdlLCB0YWxvcywgZXZlbnQgKSAtPlxuICAgIHRyeVxuICAgICAgZWRnZS5tb3ZlIHRhbG9zLCBldmVudFxuICAgIGNhdGNoIGVycm9yXG4gICAgICB0YWxvcy5jYXRjaCBlcnJvclxuXG4gIHRpY2s6ICggdGFsb3MsIGV2ZW50ICkgLT5cbiAgICB2ZXJ0ZXggPSBTdGVwLm1hdGNoVmVydGV4IHRhbG9zXG4gICAgeWllbGQgdGFsb3NcbiAgICBlZGdlID0gU3RlcC5tYXRjaEVkZ2UgdmVydGV4LCB0YWxvcywgZXZlbnRcbiAgICB5aWVsZCB0YWxvc1xuICAgIFN0ZXAucnVuIGVkZ2UsIHRhbG9zLCBldmVudFxuICAgIHlpZWxkIHRhbG9zXG4gICAgU3RlcC5tb3ZlIGVkZ2UsIHRhbG9zLCBldmVudFxuICAgIHlpZWxkIHRhbG9zXG5cblxuc3RhcnQgPSBnZW5lcmljIFxuICBuYW1lOiBcInRhbG9zOiBzeW5jIHN0YXJ0XCJcbiAgZGVmYXVsdDogKCBhcmdzLi4uICkgLT5cbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ0YWxvcyBzeW5jIHN0YXJ0OiBpbnB1dCBpcyBtYWxmb3JtZWQgI3sgSlNPTi5zdHJpbmdpZnkgYXJncyB9XCJcblxuZ2VuZXJpYyBzdGFydCwgVHlwZS5pc09iamVjdCwgKCBtYWNoaW5lICkgLT5cbiAgdGFsb3MgPSBUYWxvcy5tYWtlIG1hY2hpbmVcbiAgc3RhcnQgdGFsb3NcblxuIyBDcmVhdGUgZ2VuZXJhdG9yIHdoZXJlIHN0YXRlIG1hY2hpbmUgY29uc3VtZXMgaXRzIG93biBjb250ZXh0IHJlcGVhdGVkbHkuXG5nZW5lcmljIHN0YXJ0LCBUYWxvcy5pc1R5cGUsICggdGFsb3MgKSAtPlxuICBsb29wXG4gICAgZm9yIHRhbG9zIGZyb20gU3RlcC50aWNrIHRhbG9zLCB0YWxvcy5jb250ZXh0XG4gICAgICBpZiB0YWxvcy5lbmRlZFxuICAgICAgICB5aWVsZCB0YWxvc1xuICAgICAgICByZXR1cm5cbiAgICB5aWVsZCB0YWxvc1xuICByZXR1cm4gIyBwcmV2ZW50cyBhY2N1bXVsYXRpb25cblxuZ2VuZXJpYyBzdGFydCwgVHlwZS5pc09iamVjdCwgVHlwZS5pc0l0ZXJhYmxlLCAoIG1hY2hpbmUsIGV2ZW50cyApIC0+XG4gIHRhbG9zID0gVGFsb3MubWFrZSBtYWNoaW5lXG4gIHN0YXJ0IHRhbG9zLCBldmVudHNcblxuIyBDcmVhdGUgZ2VuZXJhdG9yIHdoZXJlIHN0YXRlIG1hY2hpbmUgY29uc3VtZXMgdmFsdWVzIGZyb20gaXRlcmF0b3IuXG5nZW5lcmljIHN0YXJ0LCBUYWxvcy5pc1R5cGUsIFR5cGUuaXNJdGVyYWJsZSwgKCB0YWxvcywgZXZlbnRzICkgLT5cbiAgZm9yIGV2ZW50IGZyb20gZXZlbnRzXG4gICAgZm9yIHRhbG9zIGZyb20gU3RlcC50aWNrIHRhbG9zLCBldmVudFxuICAgICAgaWYgdGFsb3MuZW5kZWRcbiAgICAgICAgeWllbGQgdGFsb3NcbiAgICAgICAgcmV0dXJuXG4gICAgeWllbGQgdGFsb3NcbiAgcmV0dXJuICMgcHJldmVudHMgYWNjdW11bGF0aW9uXG5cbmdlbmVyaWMgc3RhcnQsIFR5cGUuaXNPYmplY3QsIFR5cGUuaXNPYmplY3QsICggbWFjaGluZSwgY29udGV4dCApIC0+XG4gIHRhbG9zID0gVGFsb3MubWFrZSBtYWNoaW5lXG4gIHRhbG9zLmNvbnRleHQgPSBjb250ZXh0XG4gIHN0YXJ0IHRhbG9zXG5cbmdlbmVyaWMgc3RhcnQsIFRhbG9zLmlzVHlwZSwgVHlwZS5pc09iamVjdCwgKCB0YWxvcywgY29udGV4dCApIC0+XG4gIHRhbG9zLmNvbnRleHQgPSBjb250ZXh0XG4gIHN0YXJ0IHRhbG9zXG5cbmdlbmVyaWMgc3RhcnQsIFR5cGUuaXNPYmplY3QsIFR5cGUuaXNPYmplY3QsIFR5cGUuaXNJdGVyYWJsZSwgKCBtYWNoaW5lLCBjb250ZXh0LCBldmVudHMgKSAtPlxuICB0YWxvcyA9IFRhbG9zLm1ha2UgbWFjaGluZVxuICB0YWxvcy5jb250ZXh0ID0gY29udGV4dFxuICBzdGFydCB0YWxvcywgZXZlbnRzXG5cbmdlbmVyaWMgc3RhcnQsIFRhbG9zLmlzVHlwZSwgVHlwZS5pc09iamVjdCwgVHlwZS5pc0l0ZXJhYmxlLCAoIHRhbG9zLCBjb250ZXh0LCBldmVudHMgKSAtPlxuICB0YWxvcy5jb250ZXh0ID0gY29udGV4dFxuICBzdGFydCB0YWxvcywgZXZlbnRzXG5cblxuIyBDb252ZW5pZW5jZSBmdW5jdGlvbiB0byBrZWVwIGdvaW5nIGFuZCBvbmx5IHJldHVybiB0aGUgZmluYWwgdGFsb3MuXG5ydW4gPSBnZW5lcmljIFxuICBuYW1lOiBcInRhbG9zOiBzeW5jIHJ1blwiXG4gIGRlZmF1bHQ6ICggYXJncy4uLiApIC0+IFxuICAgIHRocm93IG5ldyBFcnJvciBcInRhbG9zIHN5bmMgcnVuOiBpbnB1dCBpcyBtYWxmb3JtZWQgI3sgSlNPTi5zdHJpbmdpZnkgYXJncyB9XCJcblxuZ2VuZXJpYyBydW4sIFR5cGUuaXNJdGVyYWJsZSwgKCBjeWNsZSApIC0+XG4gIGZvciB0YWxvcyBmcm9tIGN5Y2xlXG4gICAgcmVzdWx0ID0gdGFsb3NcbiAgcmVzdWx0XG5cbiMgQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gcHJvdmlkZSBhIGN1cnJpZWQgZnVuY3Rpb25hbCBpbnRlcmZhY2UgZm9yIGN5Y2xlIHJ1bi5cbiMgXCJzdGFydFwiIGFsbG93cyBmaXJzdCBhcmd1bWVudCB0byBiZSB0YWxvcyBpbnN0YW5jZSBvciBtYWNoaW5lIGRlZmluaXRpb24uXG5idWlsZCA9ICggdGFsb3MgKSAtPlxuICAoIGFyZ3MuLi4gKSAtPiBydW4gc3RhcnQgdGFsb3MsIGFyZ3MuLi5cblxucGlwZSA9ICggZnggKSAtPlxuICBtYWNoaW5lID0gTWFjaGluZS5tYWtlIGZ4XG4gICggY29udGV4dCApIC0+IFxuICAgIGN5Y2xlID0gc3RhcnQgbWFjaGluZSwgY29udGV4dFxuICAgIHRhbG9zID0gcnVuIGN5Y2xlXG4gICAgaWYgdGFsb3MuZXJyb3I/XG4gICAgICB0aHJvdyB0YWxvcy5lcnJvclxuICAgIHRhbG9zLmNvbnRleHRcblxucGlwZVdpdGggPSBGbi5jdXJyeSAoIGYsIGd4ICkgLT5cbiAgbWFjaGluZSA9IE1hY2hpbmUubWFrZSBneFxuICAoIGNvbnRleHQgKSAtPiBcbiAgICBjeWNsZSA9IHN0YXJ0IG1hY2hpbmUsIGNvbnRleHRcbiAgICByZXN1bHQgPSBudWxsXG4gICAgZm9yIHRhbG9zIGZyb20gY3ljbGVcbiAgICAgIGYgdGFsb3NcbiAgICAgIHJlc3VsdCA9IHRhbG9zXG4gICAgaWYgcmVzdWx0LmVycm9yP1xuICAgICAgdGhyb3cgcmVzdWx0LmVycm9yXG4gICAgcmVzdWx0LmNvbnRleHRcblxuZXhwb3J0IHtcbiAgU3RlcCAgXG4gIHN0YXJ0XG4gIHJ1blxuICBidWlsZFxuICBwaXBlXG4gIHBpcGVXaXRoXG59Il0sIm5hbWVzIjpbIlN0ZXAiLCJidWlsZCIsInBpcGUiLCJwaXBlV2l0aCIsInJ1biIsInN0YXJ0IiwiZ2VuZXJpYyIsIkZuIiwiVHlwZSIsImxvZyIsIk1hY2hpbmUiLCJUYWxvcyIsIm1hdGNoVmVydGV4IiwidGFsb3MiLCJ2ZXJ0ZXgiLCJtYWNoaW5lIiwiZ3JhcGgiLCJzdGF0ZSIsImNhdGNoIiwiRXJyb3IiLCJtYXRjaEVkZ2UiLCJldmVudCIsImVkZ2UiLCJlcnJvciIsImkiLCJsZW4iLCJyZWYiLCJlZGdlcyIsImxlbmd0aCIsIndoZW4iLCJlcnJvcjEiLCJtb3ZlIiwidGljayIsIm5hbWUiLCJkZWZhdWx0IiwiYXJncyIsIkpTT04iLCJzdHJpbmdpZnkiLCJpc09iamVjdCIsIm1ha2UiLCJpc1R5cGUiLCJjb250ZXh0IiwiZW5kZWQiLCJpc0l0ZXJhYmxlIiwiZXZlbnRzIiwiY3ljbGUiLCJyZXN1bHQiLCJmeCIsImN1cnJ5IiwiZiIsImd4Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxNQUFBQyxPQUFBQyxNQUFBQyxVQUFBQyxLQUFBQztBQUFBLFNBQVNDLE9BQVQsUUFBQSx3QkFBQTtBQUNBLFlBQU9DLFFBQVAseUJBQUE7QUFDQSxZQUFPQyxVQUFQLHFCQUFBO0FBQ0Es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