var Edge, Edges, Machine, Vertex, areVertexEdges, isState, normalizeMove, normalizeWhen, prioritize;
import { generic } from "@dashkite/joy/generic";
import * as Type from "@dashkite/joy/type";
import { $start, $end } from "./states";
isState = function(x) {
    return Type.isString(x) || Type.isSymbol(x);
};
areVertexEdges = function(x) {
    var edge, j, len, ref;
    if (x.edges == null) {
        return false;
    }
    if (!Type.isArray(x.edges)) {
        return false;
    }
    ref = x.edges;
    for(j = 0, len = ref.length; j < len; j++){
        edge = ref[j];
        if (!Type.isObject(edge)) {
            return false;
        }
    }
    return true;
};
normalizeWhen = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return event === condition;
        };
    } else if (Type.isFunction(x)) {
        return x;
    } else if (Type.isBoolean(x)) {
        return function() {
            return x;
        };
    } else {
        throw new Error("unable to normalize when description");
    }
};
normalizeMove = function(x) {
    if (isState(x)) {
        return function(talos, event) {
            return talos.state = x;
        };
    } else if (Type.isFunction(x)) {
        return x;
    } else {
        throw new Error("unable to normalize move description");
    }
};
prioritize = function(frames) {
    return frames.sort(function(a, b) {
        if (a.priority < b.priority) {
            return -1;
        } else if (a.priority > b.priority) {
            return 1;
        } else {
            return 0;
        }
    });
};
Edge = {
    make: generic({
        name: "talos: edge make"
    })
};
generic(Edge.make, Type.isObject, function(object) {
    return {
        when: normalizeWhen(object.when),
        run: object.run,
        move: normalizeMove(object.move)
    };
});
generic(Edge.make, isState, Type.isAny, function(move, _when) {
    return Edge.make({
        move,
        when: _when
    });
});
generic(Edge.make, isState, Type.isObject, function(move, object) {
    var ref, ref1;
    return {
        when: normalizeWhen((ref = object.when) != null ? ref : true),
        run: object.run,
        move: normalizeMove((ref1 = object.move) != null ? ref1 : move)
    };
});
Edges = {
    make: generic({
        name: "talos: edges make"
    })
};
generic(Edges.make, Type.isObject, function(object) {
    var defaultFrame, edges, frames, j, k, key, len, len1, priority, ref, ref1, value;
    frames = [];
    defaultFrame = null;
    ref = Reflect.ownKeys(object);
    for(j = 0, len = ref.length; j < len; j++){
        key = ref[j];
        value = object[key];
        priority = (ref1 = value.priority) != null ? ref1 : 100;
        if (key === "default") {
            defaultFrame = {
                key,
                value
            };
        } else {
            if (key === "end") {
                key = $end;
            }
            frames.push({
                key,
                value,
                priority
            });
        }
    }
    prioritize(frames);
    edges = [];
    for(k = 0, len1 = frames.length; k < len1; k++){
        ({ key, value } = frames[k]);
        edges.push(Edge.make(key, value));
    }
    if (defaultFrame != null) {
        // default is a special case emphasizing an always true "when" function.
        ({ value } = defaultFrame);
        if (Type.isObject(value)) {
            edges.push(Edge.make({
                ...value,
                when: true
            }));
        } else {
            edges.push(Edge.make({
                when: true,
                move: value
            }));
        }
    }
    return edges;
});
generic(Edges.make, Type.isArray, function(array) {
    var edge, j, len, results;
    results = [];
    for(j = 0, len = array.length; j < len; j++){
        edge = array[j];
        results.push(Edge.make(edge));
    }
    return results;
});
generic(Edges.make, Type.isFunction, function(f) {
    var edge;
    edge = {
        when: true,
        run: f,
        move: $end
    };
    return [
        Edge.make(edge)
    ];
});
generic(Edges.make, isState, function(move) {
    return Edges.make({
        [move]: true
    });
});
generic(Edges.make, areVertexEdges, function(param) {
    let { edges } = param;
    var edge, j, len, results;
    results = [];
    for(j = 0, len = edges.length; j < len; j++){
        edge = edges[j];
        results.push({
            when: edge.when,
            run: edge.run,
            move: edge.move
        });
    }
    return results;
});
Vertex = {
    make: function(key, value) {
        return {
            name: key,
            edges: Edges.make(value)
        };
    }
};
Machine = {
    make: function(value) {
        var _graph, j, key, len, machine, ref, ref1;
        _graph = Machine.format(value);
        machine = {
            name: (ref = value.name) != null ? ref : "anonymous",
            graph: {}
        };
        ref1 = Reflect.ownKeys(_graph);
        for(j = 0, len = ref1.length; j < len; j++){
            key = ref1[j];
            value = _graph[key];
            machine.graph[key] = Vertex.make(key, value);
        }
        return machine;
    },
    format: function(value) {
        var graph, j, key, len, ref;
        if (Type.isObject(value)) {
            graph = {};
            ref = Reflect.ownKeys(value.graph);
            for(j = 0, len = ref.length; j < len; j++){
                key = ref[j];
                graph[key] = value.graph[key];
            }
        } else if (Type.isArray(value)) {
            graph = Machine.expand(value);
        } else {
            throw new Error("Talos machine representation is malformed");
        }
        if (graph[$start] == null) {
            if (graph.start != null) {
                graph[$start] = graph.start;
                delete graph.start;
            } else {
                throw new Error("no start state defined for this machine");
            }
        }
        if (graph[$end] == null) {
            if (graph.end != null) {
                graph[$end] = graph.end;
                delete graph.end;
            }
        }
        return graph;
    },
    expand: function(fx) {
        var cache, current, f, getName, graph, i, j, k, len, len1, names, next, ref;
        for(j = 0, len = fx.length; j < len; j++){
            f = fx[j];
            if (f == null) {
                throw new Error("undefined item in function composition array");
            }
        }
        if (fx.length === 0) {
            return {
                [$start]: {
                    end: {
                        when: true,
                        next: $end
                    }
                }
            };
        }
        names = {};
        getName = function(f) {
            var name;
            name = f.name || "anonymous";
            if (names[name] != null) {
                return `${name}-${++names[name]}`;
            } else {
                names[name] = 1;
                return name;
            }
        };
        graph = {};
        cache = {};
        for(i = k = 0, len1 = fx.length; k < len1; i = ++k){
            f = fx[i];
            current = (ref = cache.current) != null ? ref : getName(f);
            if (i === 0) {
                cache.startName = current;
            }
            if (i === fx.length - 1) {
                next = $end;
            } else {
                next = getName(fx[i + 1]);
            }
            graph[current] = {
                next: {
                    when: true,
                    run: f,
                    move: next
                }
            };
            cache.current = next;
        }
        graph[$start] = {
            next: {
                when: true,
                move: cache.startName
            }
        };
        return graph;
    }
};
export { Machine, Vertex, Edges, Edge }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL21hY2hpbmUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLGNBQUEsRUFBQSxPQUFBLEVBQUEsYUFBQSxFQUFBLGFBQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVMsT0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxDQUFBLFFBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtFQUFpQixJQUFqQjtDQUFBLE1BQUE7O0FBRUEsT0FBQSxHQUFVLFFBQUEsQ0FBRSxDQUFGLENBQUE7U0FBUyxDQUFFLElBQUksQ0FBQyxRQUFMLENBQWMsQ0FBZCxDQUFGLENBQUEsSUFBdUIsQ0FBRSxJQUFJLENBQUMsUUFBTCxDQUFjLENBQWQsQ0FBRjtBQUFoQzs7QUFDVixjQUFBLEdBQWlCLFFBQUEsQ0FBRSxDQUFGLENBQUE7QUFDakIsTUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFFLElBQWlCLGVBQWpCO0FBQUEsV0FBTyxNQUFQOztFQUNBLElBQWdCLENBQUMsSUFBSSxDQUFDLE9BQUwsQ0FBYSxDQUFDLENBQUMsS0FBZixDQUFqQjtBQUFBLFdBQU8sTUFBUDs7QUFDQTtFQUFBLEtBQUEscUNBQUE7O1FBQXlCLENBQUMsSUFBSSxDQUFDLFFBQUwsQ0FBYyxJQUFkO0FBQ3hCLGFBQU87O0VBRFQ7U0FFQTtBQUxlOztBQVFqQixhQUFBLEdBQWdCLFFBQUEsQ0FBRSxDQUFGLENBQUE7RUFDZCxJQUFHLE9BQUEsQ0FBUSxDQUFSLENBQUg7V0FDRSxRQUFBLENBQUUsS0FBRixFQUFTLEtBQVQsQ0FBQTthQUFvQixLQUFBLEtBQVM7SUFBN0IsRUFERjtHQUFBLE1BRUssSUFBRyxJQUFJLENBQUMsVUFBTCxDQUFnQixDQUFoQixDQUFIO1dBQ0gsRUFERztHQUFBLE1BRUEsSUFBRyxJQUFJLENBQUMsU0FBTCxD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R0FBa0I7TUFBQSxJQUFBLEVBQU07UUFBRSxJQUFBLEVBQU0sSUFBUjtRQUFjLElBQUEsRUFBTSxLQUFLLENBQUM7TUFBMUI7SUFBTjtXQUNsQjtFQTFDTTtBQXBDUjs7QUFpRkYsT0FBQTtFQUFTLE9BQVQ7RUFBa0IsTUFBbEI7RUFBMEIsS0FBMUI7RUFBaUMsSUFBakMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmljIH0gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZ2VuZXJpY1wiXG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gXCJAZGFzaGtpdGUvam95L3R5cGVcIlxuaW1wb3J0IHsgJHN0YXJ0LCAkZW5kIH0gZnJvbSBcIi4vc3RhdGVzXCJcblxuaXNTdGF0ZSA9ICggeCApIC0+ICggVHlwZS5pc1N0cmluZyB4ICkgfHwgKCBUeXBlLmlzU3ltYm9sIHggKVxuYXJlVmVydGV4RWRnZXMgPSAoIHggKSAtPlxuICByZXR1cm4gZmFsc2UgaWYgIXguZWRnZXM/XG4gIHJldHVybiBmYWxzZSBpZiAhVHlwZS5pc0FycmF5IHguZWRnZXNcbiAgZm9yIGVkZ2UgaW4geC5lZGdlcyB3aGVuICFUeXBlLmlzT2JqZWN0IGVkZ2VcbiAgICByZXR1cm4gZmFsc2VcbiAgdHJ1ZVxuXG5cbm5vcm1hbGl6ZVdoZW4gPSAoIHggKSAtPlxuICBpZiBpc1N0YXRlIHhcbiAgICAoIHRhbG9zLCBldmVudCApIC0+IGV2ZW50ID09IGNvbmRpdGlvblxuICBlbHNlIGlmIFR5cGUuaXNGdW5jdGlvbiB4XG4gICAgeFxuICBlbHNlIGlmIFR5cGUuaXNCb29sZWFuIHhcbiAgICAtPiB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIHdoZW4gZGVzY3JpcHRpb25cIlxuXG5ub3JtYWxpemVNb3ZlID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiB0YWxvcy5zdGF0ZSA9IHhcbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvciBcInVuYWJsZSB0byBub3JtYWxpemUgbW92ZSBkZXNjcmlwdGlvblwiXG5cbnByaW9yaXRpemUgPSAoIGZyYW1lcyApIC0+XG4gIGZyYW1lcy5zb3J0ICggYSwgYiApIC0+IFxuICAgIGlmIGEucHJpb3JpdHkgPCBiLnByaW9yaXR5XG4gICAgICAtMVxuICAgIGVsc2UgaWYgYS5wcmlvcml0eSA+IGIucHJpb3JpdHlcbiAgICAgIDFcbiAgICBlbHNlXG4gICAgICAwXG5cblxuRWRnZSA9XG4gIG1ha2U6IGdlbmVyaWMgbmFtZTogXCJ0YWxvczogZWRnZSBtYWtlXCJcblxuZ2VuZXJpYyBFZGdlLm1ha2UsIFR5cGUuaXNPYmplY3QsICggb2JqZWN0ICkgLT5cbiAgd2hlbjogbm9ybWFsaXplV2hlbiBvYmplY3Qud2hlblxuICBydW46IG9iamVjdC5ydW5cbiAgbW92ZTogbm9ybWFsaXplTW92ZSBvYmplY3QubW92ZVxuXG5nZW5lcmljIEVkZ2UubWFrZSwgaXNTdGF0ZSwgVHlwZS5pc0FueSwgKCBtb3ZlLCBfd2hlbiApIC0+XG4gIEVkZ2UubWFrZSB7IG1vdmUsIHdoZW46IF93aGVuIH1cblxuZ2VuZXJpYyBFZGdlLm1ha2UsIGlzU3RhdGUsIFR5cGUuaXNPYmplY3QsICggbW92ZSwgb2JqZWN0ICkgLT5cbiAgd2hlbjogbm9ybWFsaXplV2hlbiBvYmplY3Qud2hlbiA/IHRydWVcbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmUgPyBtb3ZlXG5cblxuRWRnZXMgPSBcbiAgbWFrZTogZ2VuZXJpYyBuYW1lOiBcInRhbG9zOiBlZGdlcyBtYWtlXCJcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIGZyYW1lcyA9IFtdXG4gIGRlZmF1bHRGcmFtZSA9IG51bGxcbiAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgb2JqZWN0XG4gICAgdmFsdWUgPSBvYmplY3RbIGtleSBdXG4gICAgcHJpb3JpdHkgPSB2YWx1ZS5wcmlvcml0eSA/IDEwMFxuICAgIGlmIGtleSA9PSBcImRlZmF1bHRcIlxuICAgICAgZGVmYXVsdEZyYW1lID0geyBrZXksIHZhbHVlIH1cbiAgICBlbHNlXG4gICAgICBrZXkgPSAkZW5kIGlmIGtleSA9PSBcImVuZFwiXG4gICAgICBmcmFtZXMucHVzaCB7IGtleSwgdmFsdWUsIHByaW9yaXR5IH1cblxuICBwcmlvcml0aXplIGZyYW1lc1xuXG4gIGVkZ2VzID0gW11cbiAgZm9yIHsga2V5LCB2YWx1ZSB9IGluIGZyYW1lc1xuICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIGtleSwgdmFsdWVcblxuICBpZiBkZWZhdWx0RnJhbWU/XG4gICAgIyBkZWZhdWx0IGlzIGEgc3BlY2lhbCBjYXNlIGVtcGhhc2l6aW5nIGFuIGFsd2F5cyB0cnVlIFwid2hlblwiIGZ1bmN0aW9uLlxuICAgIHsgdmFsdWUgfSA9IGRlZmF1bHRGcmFtZVxuICAgIGlmIFR5cGUuaXNPYmplY3QgdmFsdWVcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHsgdmFsdWUuLi4sIHdoZW46IHRydWUgfVxuICAgIGVsc2VcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHdoZW46IHRydWUsIG1vdmU6IHZhbHVlXG4gIFxuICBlZGdlc1xuICBcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzQXJyYXksICggYXJyYXkgKSAtPlxuICBmb3IgZWRnZSBpbiBhcnJheVxuICAgIEVkZ2UubWFrZSBlZGdlXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgVHlwZS5pc0Z1bmN0aW9uLCAoIGYgKSAtPlxuICBlZGdlID0gd2hlbjogdHJ1ZSwgcnVuOiBmLCBtb3ZlOiAkZW5kXG4gIFsgRWRnZS5tYWtlIGVkZ2UgXVxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIGlzU3RhdGUsICggbW92ZSApIC0+XG4gIEVkZ2VzLm1ha2UgWyBtb3ZlIF06IHRydWVcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBhcmVWZXJ0ZXhFZGdlcywgKHsgZWRnZXMgfSkgLT5cbiAgZm9yIGVkZ2UgaW4gZWRnZXNcbiAgICB3aGVuOiBlZGdlLndoZW5cbiAgICBydW46IGVkZ2UucnVuXG4gICAgbW92ZTogZWRnZS5tb3ZlXG5cblxuVmVydGV4ID1cbiAgbWFrZTogKCBrZXksIHZhbHVlICkgLT5cbiAgICBuYW1lOiBrZXlcbiAgICBlZGdlczogRWRnZXMubWFrZSB2YWx1ZVxuXG5cbk1hY2hpbmUgPVxuICBtYWtlOiAoIHZhbHVlICkgLT4gXG4gICAgX2dyYXBoID0gTWFjaGluZS5mb3JtYXQgdmFsdWVcbiAgICBtYWNoaW5lID0gXG4gICAgICBuYW1lOiB2YWx1ZS5uYW1lID8gXCJhbm9ueW1vdXNcIlxuICAgICAgZ3JhcGg6IHt9XG5cbiAgICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBfZ3JhcGhcbiAgICAgIHZhbHVlID0gX2dyYXBoWyBrZXkgXVxuICAgICAgbWFjaGluZS5ncmFwaFsga2V5IF0gPSBWZXJ0ZXgubWFrZSBrZXksIHZhbHVlXG4gICAgXG4gICAgbWFjaGluZVxuXG4gIGZvcm1hdDogKCB2YWx1ZSApIC0+XG4gICAgaWYgVHlwZS5pc09iamVjdCB2YWx1ZVxuICAgICAgZ3JhcGggPSB7fVxuICAgICAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgdmFsdWUuZ3JhcGhcbiAgICAgICAgZ3JhcGhbIGtleSBdID0gdmFsdWUuZ3JhcGhbIGtleSBdXG4gICAgZWxzZSBpZiBUeXBlLmlzQXJyYXkgdmFsdWVcbiAgICAgIGdyYXBoID0gTWFjaGluZS5leHBhbmQgdmFsdWVcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJUYWxvcyBtYWNoaW5lIHJlcHJlc2VudGF0aW9uIGlzIG1hbGZvcm1lZFwiXG4gICAgXG4gICAgaWYgIWdyYXBoWyAkc3RhcnQgXT9cbiAgICAgIGlmIGdyYXBoLnN0YXJ0P1xuICAgICAgICBncmFwaFsgJHN0YXJ0IF0gPSBncmFwaC5zdGFydFxuICAgICAgICBkZWxldGUgZ3JhcGguc3RhcnRcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwibm8gc3RhcnQgc3RhdGUgZGVmaW5lZCBmb3IgdGhpcyBtYWNoaW5lXCJcblxuICAgIGlmICFncmFwaFsgJGVuZCBdP1xuICAgICAgaWYgZ3JhcGguZW5kP1xuICAgICAgICBncmFwaFsgJGVuZCBdID0gZ3JhcGguZW5kXG4gICAgICAgIGRlbGV0ZSBncmFwaC5lbmRcblxuICAgIGdyYXBoXG5cbiAgZXhwYW5kOiAoIGZ4ICkgLT5cbiAgICBmb3IgZiBpbiBmeCB3aGVuICFmP1xuICAgICAgdGhyb3cgbmV3IEVycm9yIFwidW5kZWZpbmVkIGl0ZW0gaW4gZnVuY3Rpb24gY29tcG9zaXRpb24gYXJyYXlcIlxuICAgIFxuICAgIGlmIGZ4Lmxlbmd0aCA9PSAwXG4gICAgICByZXR1cm4gXG4gICAgICAgIFsgJHN0YXJ0IF06IFxuICAgICAgICAgIGVuZDpcbiAgICAgICAgICAgIHdoZW46IHRydWVcbiAgICAgICAgICAgIG5leHQ6ICRlbmRcblxuICAgIG5hbWVzID0ge31cbiAgICBnZXROYW1lID0gKCBmICkgLT5cbiAgICAgIG5hbWUgPSBmLm5hbWUgfHwgXCJhbm9ueW1vdXNcIlxuICAgICAgaWYgbmFtZXNbIG5hbWUgXT9cbiAgICAgICAgXCIjeyBuYW1lIH0tI3sgKytuYW1lc1sgbmFtZSBdIH1cIlxuICAgICAgZWxzZVxuICAgICAgICBuYW1lc1sgbmFtZSBdID0gMVxuICAgICAgICBuYW1lXG5cblxuICAgIGdyYXBoID0ge31cbiAgICBjYWNoZSA9IHt9XG4gICAgZm9yIGYsIGkgaW4gZnhcbiAgICAgIGN1cnJlbnQgPSBjYWNoZS5jdXJyZW50ID8gZ2V0TmFtZSBmXG4gICAgICBpZiBpID09IDBcbiAgICAgICAgY2FjaGUuc3RhcnROYW1lID0gY3VycmVudFxuICAgICAgXG4gICAgICBpZiBpID09IGZ4Lmxlbmd0aCAtIDFcbiAgICAgICAgbmV4dCA9ICRlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgbmV4dCA9IGdldE5hbWUgZnhbIGkgKyAxIF1cblxuICAgICAgZ3JhcGhbIGN1cnJlbnQgXSA9IFxuICAgICAgICBuZXh0OlxuICAgICAgICAgIHdoZW46IHRydWVcbiAgICAgICAgICBydW46IGZcbiAgICAgICAgICBtb3ZlOiBuZXh0XG5cbiAgICAgIGNhY2hlLmN1cnJlbnQgPSBuZXh0XG4gICAgXG4gICAgZ3JhcGhbICRzdGFydCBdID0gbmV4dDogeyB3aGVuOiB0cnVlLCBtb3ZlOiBjYWNoZS5zdGFydE5hbWUgfVxuICAgIGdyYXBoXG5cblxuZXhwb3J0IHsgTWFjaGluZSwgVmVydGV4LCBFZGdlcywgRWRnZSB9Il19
 //# sourceURL=src/machine.coffee

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tYWNoaW5lLmNvZmZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmljIH0gZnJvbSBcIkBkYXNoa2l0ZS9qb3kvZ2VuZXJpY1wiXG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gXCJAZGFzaGtpdGUvam95L3R5cGVcIlxuaW1wb3J0IHsgJHN0YXJ0LCAkZW5kIH0gZnJvbSBcIi4vc3RhdGVzXCJcblxuaXNTdGF0ZSA9ICggeCApIC0+ICggVHlwZS5pc1N0cmluZyB4ICkgfHwgKCBUeXBlLmlzU3ltYm9sIHggKVxuYXJlVmVydGV4RWRnZXMgPSAoIHggKSAtPlxuICByZXR1cm4gZmFsc2UgaWYgIXguZWRnZXM/XG4gIHJldHVybiBmYWxzZSBpZiAhVHlwZS5pc0FycmF5IHguZWRnZXNcbiAgZm9yIGVkZ2UgaW4geC5lZGdlcyB3aGVuICFUeXBlLmlzT2JqZWN0IGVkZ2VcbiAgICByZXR1cm4gZmFsc2VcbiAgdHJ1ZVxuXG5cbm5vcm1hbGl6ZVdoZW4gPSAoIHggKSAtPlxuICBpZiBpc1N0YXRlIHhcbiAgICAoIHRhbG9zLCBldmVudCApIC0+IGV2ZW50ID09IGNvbmRpdGlvblxuICBlbHNlIGlmIFR5cGUuaXNGdW5jdGlvbiB4XG4gICAgeFxuICBlbHNlIGlmIFR5cGUuaXNCb29sZWFuIHhcbiAgICAtPiB4XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IgXCJ1bmFibGUgdG8gbm9ybWFsaXplIHdoZW4gZGVzY3JpcHRpb25cIlxuXG5ub3JtYWxpemVNb3ZlID0gKCB4ICkgLT5cbiAgaWYgaXNTdGF0ZSB4XG4gICAgKCB0YWxvcywgZXZlbnQgKSAtPiB0YWxvcy5zdGF0ZSA9IHhcbiAgZWxzZSBpZiBUeXBlLmlzRnVuY3Rpb24geFxuICAgIHhcbiAgZWxzZVxuICAgIHRocm93IG5ldyBFcnJvciBcInVuYWJsZSB0byBub3JtYWxpemUgbW92ZSBkZXNjcmlwdGlvblwiXG5cbnByaW9yaXRpemUgPSAoIGZyYW1lcyApIC0+XG4gIGZyYW1lcy5zb3J0ICggYSwgYiApIC0+IFxuICAgIGlmIGEucHJpb3JpdHkgPCBiLnByaW9yaXR5XG4gICAgICAtMVxuICAgIGVsc2UgaWYgYS5wcmlvcml0eSA+IGIucHJpb3JpdHlcbiAgICAgIDFcbiAgICBlbHNlXG4gICAgICAwXG5cblxuRWRnZSA9XG4gIG1ha2U6IGdlbmVyaWMgbmFtZTogXCJ0YWxvczogZWRnZSBtYWtlXCJcblxuZ2VuZXJpYyBFZGdlLm1ha2UsIFR5cGUuaXNPYmplY3QsICggb2JqZWN0ICkgLT5cbiAgd2hlbjogbm9ybWFsaXplV2hlbiBvYmplY3Qud2hlblxuICBydW46IG9iamVjdC5ydW5cbiAgbW92ZTogbm9ybWFsaXplTW92ZSBvYmplY3QubW92ZVxuXG5nZW5lcmljIEVkZ2UubWFrZSwgaXNTdGF0ZSwgVHlwZS5pc0FueSwgKCBtb3ZlLCBfd2hlbiApIC0+XG4gIEVkZ2UubWFrZSB7IG1vdmUsIHdoZW46IF93aGVuIH1cblxuZ2VuZXJpYyBFZGdlLm1ha2UsIGlzU3RhdGUsIFR5cGUuaXNPYmplY3QsICggbW92ZSwgb2JqZWN0ICkgLT5cbiAgd2hlbjogbm9ybWFsaXplV2hlbiBvYmplY3Qud2hlbiA/IHRydWVcbiAgcnVuOiBvYmplY3QucnVuXG4gIG1vdmU6IG5vcm1hbGl6ZU1vdmUgb2JqZWN0Lm1vdmUgPyBtb3ZlXG5cblxuRWRnZXMgPSBcbiAgbWFrZTogZ2VuZXJpYyBuYW1lOiBcInRhbG9zOiBlZGdlcyBtYWtlXCJcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzT2JqZWN0LCAoIG9iamVjdCApIC0+XG4gIGZyYW1lcyA9IFtdXG4gIGRlZmF1bHRGcmFtZSA9IG51bGxcbiAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgb2JqZWN0XG4gICAgdmFsdWUgPSBvYmplY3RbIGtleSBdXG4gICAgcHJpb3JpdHkgPSB2YWx1ZS5wcmlvcml0eSA/IDEwMFxuICAgIGlmIGtleSA9PSBcImRlZmF1bHRcIlxuICAgICAgZGVmYXVsdEZyYW1lID0geyBrZXksIHZhbHVlIH1cbiAgICBlbHNlXG4gICAgICBrZXkgPSAkZW5kIGlmIGtleSA9PSBcImVuZFwiXG4gICAgICBmcmFtZXMucHVzaCB7IGtleSwgdmFsdWUsIHByaW9yaXR5IH1cblxuICBwcmlvcml0aXplIGZyYW1lc1xuXG4gIGVkZ2VzID0gW11cbiAgZm9yIHsga2V5LCB2YWx1ZSB9IGluIGZyYW1lc1xuICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIGtleSwgdmFsdWVcblxuICBpZiBkZWZhdWx0RnJhbWU/XG4gICAgIyBkZWZhdWx0IGlzIGEgc3BlY2lhbCBjYXNlIGVtcGhhc2l6aW5nIGFuIGFsd2F5cyB0cnVlIFwid2hlblwiIGZ1bmN0aW9uLlxuICAgIHsgdmFsdWUgfSA9IGRlZmF1bHRGcmFtZVxuICAgIGlmIFR5cGUuaXNPYmplY3QgdmFsdWVcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHsgdmFsdWUuLi4sIHdoZW46IHRydWUgfVxuICAgIGVsc2VcbiAgICAgIGVkZ2VzLnB1c2ggRWRnZS5tYWtlIHdoZW46IHRydWUsIG1vdmU6IHZhbHVlXG4gIFxuICBlZGdlc1xuICBcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBUeXBlLmlzQXJyYXksICggYXJyYXkgKSAtPlxuICBmb3IgZWRnZSBpbiBhcnJheVxuICAgIEVkZ2UubWFrZSBlZGdlXG5cbmdlbmVyaWMgRWRnZXMubWFrZSwgVHlwZS5pc0Z1bmN0aW9uLCAoIGYgKSAtPlxuICBlZGdlID0gd2hlbjogdHJ1ZSwgcnVuOiBmLCBtb3ZlOiAkZW5kXG4gIFsgRWRnZS5tYWtlIGVkZ2UgXVxuXG5nZW5lcmljIEVkZ2VzLm1ha2UsIGlzU3RhdGUsICggbW92ZSApIC0+XG4gIEVkZ2VzLm1ha2UgWyBtb3ZlIF06IHRydWVcblxuZ2VuZXJpYyBFZGdlcy5tYWtlLCBhcmVWZXJ0ZXhFZGdlcywgKHsgZWRnZXMgfSkgLT5cbiAgZm9yIGVkZ2UgaW4gZWRnZXNcbiAgICB3aGVuOiBlZGdlLndoZW5cbiAgICBydW46IGVkZ2UucnVuXG4gICAgbW92ZTogZWRnZS5tb3ZlXG5cblxuVmVydGV4ID1cbiAgbWFrZTogKCBrZXksIHZhbHVlICkgLT5cbiAgICBuYW1lOiBrZXlcbiAgICBlZGdlczogRWRnZXMubWFrZSB2YWx1ZVxuXG5cbk1hY2hpbmUgPVxuICBtYWtlOiAoIHZhbHVlICkgLT4gXG4gICAgX2dyYXBoID0gTWFjaGluZS5mb3JtYXQgdmFsdWVcbiAgICBtYWNoaW5lID0gXG4gICAgICBuYW1lOiB2YWx1ZS5uYW1lID8gXCJhbm9ueW1vdXNcIlxuICAgICAgZ3JhcGg6IHt9XG5cbiAgICBmb3Iga2V5IGluIFJlZmxlY3Qub3duS2V5cyBfZ3JhcGhcbiAgICAgIHZhbHVlID0gX2dyYXBoWyBrZXkgXVxuICAgICAgbWFjaGluZS5ncmFwaFsga2V5IF0gPSBWZXJ0ZXgubWFrZSBrZXksIHZhbHVlXG4gICAgXG4gICAgbWFjaGluZVxuXG4gIGZvcm1hdDogKCB2YWx1ZSApIC0+XG4gICAgaWYgVHlwZS5pc09iamVjdCB2YWx1ZVxuICAgICAgZ3JhcGggPSB7fVxuICAgICAgZm9yIGtleSBpbiBSZWZsZWN0Lm93bktleXMgdmFsdWUuZ3JhcGhcbiAgICAgICAgZ3JhcGhbIGtleSBdID0gdmFsdWUuZ3JhcGhbIGtleSBdXG4gICAgZWxzZSBpZiBUeXBlLmlzQXJyYXkgdmFsdWVcbiAgICAgIGdyYXBoID0gTWFjaGluZS5leHBhbmQgdmFsdWVcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJUYWxvcyBtYWNoaW5lIHJlcHJlc2VudGF0aW9uIGlzIG1hbGZvcm1lZFwiXG4gICAgXG4gICAgaWYgIWdyYXBoWyAkc3RhcnQgXT9cbiAgICAgIGlmIGdyYXBoLnN0YXJ0P1xuICAgICAgICBncmFwaFsgJHN0YXJ0IF0gPSBncmFwaC5zdGFydFxuICAgICAgICBkZWxldGUgZ3JhcGguc3RhcnRcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwibm8gc3RhcnQgc3RhdGUgZGVmaW5lZCBmb3IgdGhpcyBtYWNoaW5lXCJcblxuICAgIGlmICFncmFwaFsgJGVuZCBdP1xuICAgICAgaWYgZ3JhcGguZW5kP1xuICAgICAgICBncmFwaFsgJGVuZCBdID0gZ3JhcGguZW5kXG4gICAgICAgIGRlbGV0ZSBncmFwaC5lbmRcblxuICAgIGdyYXBoXG5cbiAgZXhwYW5kOiAoIGZ4ICkgLT5cbiAgICBmb3IgZiBpbiBmeCB3aGVuICFmP1xuICAgICAgdGhyb3cgbmV3IEVycm9yIFwidW5kZWZpbmVkIGl0ZW0gaW4gZnVuY3Rpb24gY29tcG9zaXRpb24gYXJyYXlcIlxuICAgIFxuICAgIGlmIGZ4Lmxlbmd0aCA9PSAwXG4gICAgICByZXR1cm4gXG4gICAgICAgIFsgJHN0YXJ0IF06IFxuICAgICAgICAgIGVuZDpcbiAgICAgICAgICAgIHdoZW46IHRydWVcbiAgICAgICAgICAgIG5leHQ6ICRlbmRcblxuICAgIG5hbWVzID0ge31cbiAgICBnZXROYW1lID0gKCBmICkgLT5cbiAgICAgIG5hbWUgPSBmLm5hbWUgfHwgXCJhbm9ueW1vdXNcIlxuICAgICAgaWYgbmFtZXNbIG5hbWUgXT9cbiAgICAgICAgXCIjeyBuYW1lIH0tI3sgKytuYW1lc1sgbmFtZSBdIH1cIlxuICAgICAgZWxzZVxuICAgICAgICBuYW1lc1sgbmFtZSBdID0gMVxuICAgICAgICBuYW1lXG5cblxuICAgIGdyYXBoID0ge31cbiAgICBjYWNoZSA9IHt9XG4gICAgZm9yIGYsIGkgaW4gZnhcbiAgICAgIGN1cnJlbnQgPSBjYWNoZS5jdXJyZW50ID8gZ2V0TmFtZSBmXG4gICAgICBpZiBpID09IDBcbiAgICAgICAgY2FjaGUuc3RhcnROYW1lID0gY3VycmVudFxuICAgICAgXG4gICAgICBpZiBpID09IGZ4Lmxlbmd0aCAtIDFcbiAgICAgICAgbmV4dCA9ICRlbmRcbiAgICAgIGVsc2VcbiAgICAgICAgbmV4dCA9IGdldE5hbWUgZnhbIGkgKyAxIF1cblxuICAgICAgZ3JhcGhbIGN1cnJlbnQgXSA9IFxuICAgICAgICBuZXh0OlxuICAgICAgICAgIHdoZW46IHRydWVcbiAgICAgICAgICBydW46IGZcbiAgICAgICAgICBtb3ZlOiBuZXh0XG5cbiAgICAgIGNhY2hlLmN1cnJlbnQgPSBuZXh0XG4gICAgXG4gICAgZ3JhcGhbICRzdGFydCBdID0gbmV4dDogeyB3aGVuOiB0cnVlLCBtb3ZlOiBjYWNoZS5zdGFydE5hbWUgfVxuICAgIGdyYXBoXG5cblxuZXhwb3J0IHsgTWFjaGluZSwgVmVydGV4LCBFZGdlcywgRWRnZSB9Il0sIm5hbWVzIjpbIkVkZ2UiLCJFZGdlcyIsIk1hY2hpbmUiLCJWZXJ0ZXgiLCJhcmVWZXJ0ZXhFZGdlcyIsImlzU3RhdGUiLCJub3JtYWxpemVNb3ZlIiwibm9ybWFsaXplV2hlbiIsInByaW9yaXRpemUiLCJnZW5lcmljIiwiVHlwZSIsIiRzdGFydCIsIiRlbmQiLCJ4IiwiaXNTdHJpbmciLCJpc1N5bWJvbCIsImVkZ2UiLCJqIiwibGVuIiwicmVmIiwiZWRnZXMiLCJpc0FycmF5IiwibGVuZ3RoIiwiaXNPYmplY3QiLCJ0YWxvcyIsImV2ZW50IiwiY29uZGl0aW9uIiwiaXNGdW5jdGlvbiIsImlzQm9vbGVhbiIsIkVycm9yIiwic3RhdGUiLCJmcmFtZXMiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eSIsIm1ha2UiLCJuYW1lIiwib2JqZWN0Iiwid2hlbiIsInJ1biIsIm1vdmUiLCJpc0FueSIsIl93aGVuIiwicmVmMSIsImRlZmF1bHRGcmFtZSIsImsiLCJrZXkiLCJsZW4xIiwidmFsdWUiLCJSZWZsZWN0Iiwib3duS2V5cyIsInB1c2giLCJhcnJheSIsInJlc3VsdHMiLCJmIiwiX2dyYXBoIiwibWFjaGluZSIsImZvcm1hdCIsImdyYXBoIiwiZXhwYW5kIiwic3RhcnQiLCJlbmQiLCJmeCIsImNhY2hlIiwiY3VycmVudCIsImdldE5hbWUiLCJpIiwibmFtZXMiLCJuZXh0Iiwic3RhcnROYW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxNQUFBQyxPQUFBQyxTQUFBQyxRQUFBQyxnQkFBQUMsU0FBQUMsZUFBQUMsZUFBQUM7QUFBQSxTQUFTQyxPQUFULFFBQUEs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